<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Pythonic Perambulations]]></title>
  <link href="http://jakevdp.github.com/atom.xml" rel="self"/>
  <link href="http://jakevdp.github.com/"/>
  <updated>2013-02-16T08:25:29-08:00</updated>
  <id>http://jakevdp.github.com/</id>
  <author>
    <name><![CDATA[Jake Vanderplas]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Animating the Lorentz System in 3D]]></title>
    <link href="http://jakevdp.github.com/blog/2013/02/16/animating-the-lorentz-system-in-3d/"/>
    <updated>2013-02-16T08:05:00-08:00</updated>
    <id>http://jakevdp.github.com/blog/2013/02/16/animating-the-lorentz-system-in-3d</id>
    <content type="html"><![CDATA[<p>One of the things I really enjoy about Python is how easy it makes it to solve
interesting problems and visualize those solutions in a compelling way. I&#8217;ve
done several posts on creating animations using matplotlib&#8217;s relatively new
<a href="http://matplotlib.sourceforge.net/api/animation_api.html">animation toolkit</a>:
(some examples are a chaotic
<a href="http://jakevdp.github.com/blog/2012/08/18/matplotlib-animation-tutorial/">double pendulum</a>,
the collisions of
<a href="http://jakevdp.github.com/blog/2012/08/18/matplotlib-animation-tutorial/">particles in a box</a>,
the time-evolution of a
<a href="http://jakevdp.github.com/blog/2012/09/05/quantum-python/">quantum-mechanical wavefunction</a>,
and even a scene from the classic video game,
<a href="http://jakevdp.github.com/blog/2013/01/13/hacking-super-mario-bros-with-python/">Super Mario Bros.</a>).</p>

<p>Recently, a reader <a href="http://jakevdp.github.com/blog/2012/08/18/matplotlib-animation-tutorial/#comment-799781196">commented</a> asking whether I might do a 3D animation example.  Matplotlib
has a decent 3D toolkit called
<a href="http://matplotlib.org/mpl_toolkits/mplot3d/index.html">mplot3D</a>,
and though I haven&#8217;t previously seen it used in conjunction with the
animation tools, there&#8217;s nothing fundamental that prevents it.</p>

<p>At the commenter&#8217;s suggestion, I decided to try this out with a simple
example of a chaotic system: the Lorentz equations.</p>

<!-- more -->


<h2>Solving the Lorentz System</h2>

<p>The <a href="http://en.wikipedia.org/wiki/Lorenz_system">Lorentz Equations</a> are a
system of three coupled, first-order, nonlinear differential equations
which describe the trajectory of a particle through time.
The system was originally derived by Lorentz as a model
of atmospheric convection, but the deceptive simplicity
of the equations have made them an often-used example in fields beyond
atmospheric physics.</p>

<p>The equations describe the evolution of the spatial variables $x$, $y$,
and $z$, given the governing parameters $\sigma$, $\beta$, and $\rho$,
through the specification of the time-derivatives of the spatial variables:</p>

<p>${\rm d}x/{\rm d}t = \sigma(y - x)$</p>

<p>${\rm d}y/{\rm d}t = x(\rho - z) - y$</p>

<p>${\rm d}z/{\rm d}t = xy - \beta z$</p>

<p>The resulting dynamics are entirely deterministic giving a starting point
$(x_0, y_0, z_0)$ and a time interval $t$.  Though it looks straightforward,
for certain choices of the parameters $(\sigma, \rho, \beta)$, the
trajectories become chaotic, and the resulting trajectories display some
surprising properties.</p>

<p>Though no general analytic solution exists for this system, the solutions
can be computed numerically.
Python makes this sort of problem very easy to solve: one can
simply use Scipy&#8217;s interface to
<a href="https://computation.llnl.gov/casc/odepack/odepack_home.html">ODEPACK</a>,
an optimized Fortran package for solving ordinary differential equations.
Here&#8217;s how the problem can be set up:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">integrate</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Note: t0 is required for the odeint function, though it&#39;s not used here.</span>
</span><span class='line'><span class="k">def</span> <span class="nf">lorentz_deriv</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">),</span> <span class="n">t0</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="mf">8.</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">rho</span><span class="o">=</span><span class="mf">28.0</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;Compute the time-derivative of a Lorentz system.&quot;&quot;&quot;</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">[</span><span class="n">sigma</span> <span class="o">*</span> <span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">x</span><span class="p">),</span> <span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="n">rho</span> <span class="o">-</span> <span class="n">z</span><span class="p">)</span> <span class="o">-</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span> <span class="o">-</span> <span class="n">beta</span> <span class="o">*</span> <span class="n">z</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">x0</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>  <span class="c"># starting vector</span>
</span><span class='line'><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>  <span class="c"># one thousand time steps</span>
</span><span class='line'><span class="n">x_t</span> <span class="o">=</span> <span class="n">integrate</span><span class="o">.</span><span class="n">odeint</span><span class="p">(</span><span class="n">lorentz_deriv</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>That&#8217;s all there is to it!</p>

<h2>Visualizing the results</h2>

<p>Now that we&#8217;ve computed these results, we can use matplotlib&#8217;s
animation and 3D plotting toolkits
to visualize the trajectories of several particles.  Because
I&#8217;ve described the animation tools in-depth in a
<a href="http://jakevdp.github.com/blog/2012/08/18/matplotlib-animation-tutorial/">previous post</a>,
I will skip that discussion here and jump straight into the code:</p>

<figure class='code'><figcaption><span>Lorentz System (lorentz_animation.py)</span> <a href='http://jakevdp.github.com/downloads/code/lorentz_animation.py'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
</pre></td><td class='code'><pre><code class='py'><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">integrate</span>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="kn">import</span> <span class="n">Axes3D</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">cnames</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">animation</span>
</span><span class='line'>
</span><span class='line'><span class="n">N_trajectories</span> <span class="o">=</span> <span class="mi">20</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">lorentz_deriv</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">),</span> <span class="n">t0</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="mf">8.</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">rho</span><span class="o">=</span><span class="mf">28.0</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;Compute the time-derivative of a Lorentz system.&quot;&quot;&quot;</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">[</span><span class="n">sigma</span> <span class="o">*</span> <span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">x</span><span class="p">),</span> <span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="n">rho</span> <span class="o">-</span> <span class="n">z</span><span class="p">)</span> <span class="o">-</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span> <span class="o">-</span> <span class="n">beta</span> <span class="o">*</span> <span class="n">z</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># Choose random starting points, uniformly distributed from -15 to 15</span>
</span><span class='line'><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'><span class="n">x0</span> <span class="o">=</span> <span class="o">-</span><span class="mi">15</span> <span class="o">+</span> <span class="mi">30</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="n">N_trajectories</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Solve for the trajectories</span>
</span><span class='line'><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
</span><span class='line'><span class="n">x_t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="n">integrate</span><span class="o">.</span><span class="n">odeint</span><span class="p">(</span><span class="n">lorentz_deriv</span><span class="p">,</span> <span class="n">x0i</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
</span><span class='line'>                  <span class="k">for</span> <span class="n">x0i</span> <span class="ow">in</span> <span class="n">x0</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Set up figure &amp; 3D axis for animation</span>
</span><span class='line'><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span class='line'><span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">projection</span><span class="o">=</span><span class="s">&#39;3d&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s">&#39;off&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># choose a different color for each trajectory</span>
</span><span class='line'><span class="n">colors</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">jet</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">N_trajectories</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="c"># set up lines and points</span>
</span><span class='line'><span class="n">lines</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
</span><span class='line'>             <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">],</span> <span class="p">[])</span>
</span><span class='line'><span class="n">pts</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="s">&#39;o&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
</span><span class='line'>           <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">],</span> <span class="p">[])</span>
</span><span class='line'>
</span><span class='line'><span class="c"># prepare the axes limits</span>
</span><span class='line'><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="o">-</span><span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">))</span>
</span><span class='line'><span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="o">-</span><span class="mi">35</span><span class="p">,</span> <span class="mi">35</span><span class="p">))</span>
</span><span class='line'><span class="n">ax</span><span class="o">.</span><span class="n">set_zlim</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">55</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="c"># set point-of-view: specified by (altitude degrees, azimuth degrees)</span>
</span><span class='line'><span class="n">ax</span><span class="o">.</span><span class="n">view_init</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># initialization function: plot the background of each frame</span>
</span><span class='line'><span class="k">def</span> <span class="nf">init</span><span class="p">():</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">line</span><span class="p">,</span> <span class="n">pt</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">pts</span><span class="p">):</span>
</span><span class='line'>        <span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">([],</span> <span class="p">[])</span>
</span><span class='line'>        <span class="n">line</span><span class="o">.</span><span class="n">set_3d_properties</span><span class="p">([])</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">pt</span><span class="o">.</span><span class="n">set_data</span><span class="p">([],</span> <span class="p">[])</span>
</span><span class='line'>        <span class="n">pt</span><span class="o">.</span><span class="n">set_3d_properties</span><span class="p">([])</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">lines</span> <span class="o">+</span> <span class="n">pts</span>
</span><span class='line'>
</span><span class='line'><span class="c"># animation function.  This will be called sequentially with the frame number</span>
</span><span class='line'><span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
</span><span class='line'>    <span class="c"># we&#39;ll step two time-steps per frame.  This leads to nice results.</span>
</span><span class='line'>    <span class="n">i</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="n">x_t</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">line</span><span class="p">,</span> <span class="n">pt</span><span class="p">,</span> <span class="n">xi</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">pts</span><span class="p">,</span> <span class="n">x_t</span><span class="p">):</span>
</span><span class='line'>        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">xi</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">T</span>
</span><span class='line'>        <span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span class='line'>        <span class="n">line</span><span class="o">.</span><span class="n">set_3d_properties</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">pt</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:],</span> <span class="n">y</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>
</span><span class='line'>        <span class="n">pt</span><span class="o">.</span><span class="n">set_3d_properties</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">ax</span><span class="o">.</span><span class="n">view_init</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mf">0.3</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>
</span><span class='line'>    <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">lines</span> <span class="o">+</span> <span class="n">pts</span>
</span><span class='line'>
</span><span class='line'><span class="c"># instantiate the animator.</span>
</span><span class='line'><span class="n">anim</span> <span class="o">=</span> <span class="n">animation</span><span class="o">.</span><span class="n">FuncAnimation</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">animate</span><span class="p">,</span> <span class="n">init_func</span><span class="o">=</span><span class="n">init</span><span class="p">,</span>
</span><span class='line'>                               <span class="n">frames</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">blit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Save as mp4. This requires mplayer or ffmpeg to be installed</span>
</span><span class='line'><span class="c">#anim.save(&#39;lorentz_attractor.mp4&#39;, fps=15, extra_args=[&#39;-vcodec&#39;, &#39;libx264&#39;])</span>
</span><span class='line'>
</span><span class='line'><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>The resulting animation looks something like this:</p>

<p><video width='360' height='270' preload='none' controls poster=' /downloads/videos/lorentz_attractor_frame.png'><source src='http://jakevdp.github.com/downloads/videos/lorentz_attractor.mp4' type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'/></video></p>

<p>Notice that there are two locations in the space that seem to draw-in all
paths: these are the so-called &#8220;Lorentz attractors&#8221;, and have some interesting
properties which you can read about elsewhere.  The qualitative
characteristics of these Lorentz attractors
vary in somewhat surprising ways as the parameters
$(\sigma, \rho, \beta)$ are changed.  If you are so inclined, you may
wish to download the above code and play with these values to see what
the results look like.</p>

<p>I hope that this brief exercise has shown you the power and flexibility of
Python for understanding and visualizing a large array of problems, and
perhaps given you the inspiration to explore similar problems.</p>

<p>Happy coding!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Setting Up a Mac for Python Development]]></title>
    <link href="http://jakevdp.github.com/blog/2013/02/02/setting-up-a-mac-for-python-development/"/>
    <updated>2013-02-02T11:01:00-08:00</updated>
    <id>http://jakevdp.github.com/blog/2013/02/02/setting-up-a-mac-for-python-development</id>
    <content type="html"><![CDATA[<p><img class="left" src="http://jakevdp.github.com/images/OSX10.8.png" title="'OSX 10.8 Logo'" > A few weeks ago,
after years of using Linux exclusively for all my computing,
I started a research fellowship in a new department
and found a brand new Macbook Pro on my
desk.  Naturally, my first instinct was to set up the system for efficient
Python development.  In order to help others who  might find themself in a
similar situation, I took some notes on the process, and I&#8217;ll summarize
what I learned below.</p>

<!-- more -->


<p>First, a disclaimer: I can&#8217;t promise that these suggestions are the best or most
effective way to proceed.  I&#8217;m by no stretch of the imagination
a Mac expert: the last Apple product I used regularly was the trusty
Macintosh Classic my parents bought when I was in middle school.  I
primarily used it for all-day marathons of
<a href="http://en.wikipedia.org/wiki/RoboSport">RoboSport</a> and
<a href="http://en.wikipedia.org/wiki/Civilization_%28video_game%29">Civilization</a>,
with occasional breaks to teach myself programming in Hypercard. But I digress.</p>

<p>Before moving on to the summary of what I learned,
I should note that all of the following was done on OSX 10.8: there
will likely be differences between OSX versions.  I&#8217;ve done my best to note
all the relevant details, and I hope you will find this helpful!</p>

<h2>Accessing the Terminal</h2>

<p><img class="left" src="http://jakevdp.github.com/images/OSX_terminal.png" title="'OSX 10.8 Terminal Icon'" >
Being from a Linux background, I was interested in setting up a
Linux-like work environment, doing nearly everything from the terminal.
Fortunately, OSX is built on unix, with a terminal integrated into the
operating system.</p>

<p>To open a terminal, open the finder, click &#8220;Applications&#8221; and search for
&#8220;Terminal&#8221;.  To make it easier to access in the future, I dragged the icon down
to the <em>dock</em>, the collection of icons usually found on the bottom or side
of the screen.  Clicking the icon will open a familiar bash terminal that
can be used to explore your Mac in a more user-friendly way.</p>

<h2>Setting Up MacPorts</h2>

<p>To set up the rest of the system components, I opted to use MacPorts, which is
a package management system similar to <code>apt</code> or <code>yum</code> on ubuntu and
debian systems.  There are probably alternatives to MacPorts, but I found
it very intuitive, quick, and powerful.</p>

<p>You can download MacPorts for free on the
<a href="http://www.macports.org">MacPorts website</a>.  You&#8217;ll have to install it for
the correct OSX version &#8211;  to check which OSX version you&#8217;re running,
click &#8220;about this computer&#8221; under the apple icon at the top-left of
the desktop. Unfortunately, I was following the slightly outdated
<a href="http://guide.macports.org/">MacPorts guide</a> and got a few errors:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Error: No Xcode installation was found.
</span><span class='line'>Error: Please install Xcode and/or run xcode-select to specify its location.
</span><span class='line'>Error:
</span><span class='line'>Warning: xcodebuild exists but failed to execute
</span><span class='line'>Warning: Xcode does not appear to be installed; most ports will likely fail to build.</span></code></pre></td></tr></table></div></figure>


<p>This indicates that <a href="https://developer.apple.com/xcode/">Xcode</a>
is not yet installed.  Xcode is a a collection of developer tools for the
Mac, and it can be freely downloaded at the Apple App store.  You&#8217;ll need
to create an Apple account to access it, and then make sure you have a
fast internet connection: the download is about 1.6GB.  Once it&#8217;s downloaded,
find the XCode icon in the Applications menu and click to install.</p>

<p>With this done, I tried installing MacPorts again, but still got an error:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Error: Unable to open port: can't read "build.cmd": Failed to locate 'make' in path: '/opt/local/bin:/opt/local/sbin:/bin:/sbin:/usr/bin:/usr/sbin' or at its MacPorts configuration time location, did you move it?</span></code></pre></td></tr></table></div></figure>


<p>This indicates that the command-line tools are not installed by default.
To fix this, run Xcode, select Xcode->preferences from the menu bar, click
downloads, select &#8220;command-line tools&#8221;, and click install.
You&#8217;ll also need Xorg tools, which I installed through
<a href="http://xquartz.macosforge.org/landing/">XQuartz</a>.</p>

<h2>Installing Python</h2>

<p>Now that MacPorts is installed, it&#8217;s very straightforward to install several
versions of Python and other programs.  MacPorts allows access to a standard
repository of programs and packages, which can be explored, downloaded, and
installed using the <code>port</code> command.</p>

<p>First of all, run</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo port selfupdate</span></code></pre></td></tr></table></div></figure>


<p>which updates the MacPorts base to the latest release.  Another useful
thing to know about is the MacPorts <code>search</code> command.  For example, to
see all the available packages which mention &#8220;python&#8221;, use</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>port search python</span></code></pre></td></tr></table></div></figure>


<p>This will list all the python versions available.  I installed both Python
2.7 and Python 3.3</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo port install python27
</span><span class='line'>sudo port install python33</span></code></pre></td></tr></table></div></figure>


<p>If you want <code>python</code> on the command-line to point to a particular version,
this can be specified with the <code>select</code> command:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo port select --set python python27</span></code></pre></td></tr></table></div></figure>


<p>You can now check that typing <code>python --version</code> in the terminal returns
version 2.7.</p>

<h2>Installing Numpy, Scipy, etc.</h2>

<p>My scientific development in Python relies on several packages:
particularly <code>numpy</code>, <code>scipy</code>, <code>matplotlib</code>, <code>ipython</code>, <code>cython</code>,
<code>scikits-learn</code>, <code>virtualenv</code>, <code>nose</code>, <code>pep8</code>, and <code>pip</code>.
Here is the series of commands to set these up for Python 2.7:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>>& sudo port install py27-numpy
</span><span class='line'>sudo port install py27-scipy
</span><span class='line'>sudo port install py27-matplotlib
</span><span class='line'>
</span><span class='line'>sudo port install py27-tornado
</span><span class='line'>sudo port install py27-zmq  # zmq & tornado needed for notebook/parallel
</span><span class='line'>sudo port install py27-ipython
</span><span class='line'>sudo port select --set ipython ipython27
</span><span class='line'>
</span><span class='line'>sudo port install py27-cython
</span><span class='line'>sudo port select --set python cython27
</span><span class='line'>
</span><span class='line'>sudo port install py27-scikits-learn
</span><span class='line'>
</span><span class='line'>sudo port install py27-virtualenv
</span><span class='line'>sudo port install virtualenv_select
</span><span class='line'>sudo port select --set virtualenv virtualenv27
</span><span class='line'>
</span><span class='line'>sudo port install py27-nose-testconfig
</span><span class='line'>sudo port select --set nosetests nosetests27
</span><span class='line'>
</span><span class='line'>sudo port install py27-pep8
</span><span class='line'>sudo port install pep8_select
</span><span class='line'>sudo port select --set pep8 pep827
</span><span class='line'>
</span><span class='line'>sudo port install py27-pip</span></code></pre></td></tr></table></div></figure>


<p>Unfortunately, there seems to not yet be a <code>port select</code> command
for pip.  This bug has been reported and is noted
<a href="http://trac.macports.org/ticket/36178">here</a>.</p>

<h3>Setting up a Virtual Environment</h3>

<p>For Python development, I find it vital to make a good use of virtual
environments.  Virtual environments, enabled by the
<a href="http://pypi.python.org/pypi/virtualenv">virtualenv</a> package,
allow you to install several different versions of various python packages,
such that the installations are mostly independent.  I generally keep
stable released versions of packages in the system-wide python install,
and use these environments to develop the packages.  That way, I can
test the compilation/installation of a new feature in scipy or scikit-learn
without breaking my tried-and-true system installation.</p>

<p>Here we&#8217;ll set up a virtual environment called <code>default</code>
in a <code>PyEnv</code> subdirectory, and
then install <code>numpy</code> in that environment using <code>pip</code>.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mkdir ~/PyEnv
</span><span class='line'>cd ~/PyEnv
</span><span class='line'>virtualenv default
</span><span class='line'>source default/bin/activate
</span><span class='line'>pip install numpy</span></code></pre></td></tr></table></div></figure>


<h2>Other Programs to Install</h2>

<p>There are several other things I found helpful to install.  First, the <code>g95</code>
Fortran compiler for building scipy and other packages which require fortran:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo port install g95</span></code></pre></td></tr></table></div></figure>


<p>Also, we&#8217;ll install and configure the tool every open source developer needs:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo port install git
</span><span class='line'>git config --global user.name "John Doe"
</span><span class='line'>git config --global user.email john@doe.com</span></code></pre></td></tr></table></div></figure>


<p>Another essential is a good text editor.  There are several good open source
options for this.</p>

<p><img class="left" src="http://jakevdp.github.com/images/textmate_icon.jpg" width="80" height="80" title="'Textmate icon'" >
<strong>Textmate</strong> is a Mac native text editor which has many nice features, works
nicely on mac, and is fairly clean and nice to use:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo port install textmate2
</span><span class='line'>mate tmp.txt</span></code></pre></td></tr></table></div></figure>


<p><img class="left" src="http://jakevdp.github.com/images/vim_icon.png" width="80" height="80" title="'Vim icon'" >
<strong>Vim</strong> is another popular text editor: there is both a command-line version
and a GUI version available:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo port install vim
</span><span class='line'>sudo port install MacVim
</span><span class='line'>vim tmp.txt</span></code></pre></td></tr></table></div></figure>


<p><img class="left" src="http://jakevdp.github.com/images/emacs_icon.jpeg" width="80" height="80" title="'Emacs icon'" >
<strong>Emacs</strong> is my text editor of choice, and like Vim there is both a
command-line version and a GUI version:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo port install emacs
</span><span class='line'>sudo port install emacs-app
</span><span class='line'>emacs tmp.txt</span></code></pre></td></tr></table></div></figure>


<p>There are several other GUI emacs versions available as well (e.g.
<code>xemacs</code> and <code>emacs-mac-app</code>): I found that I liked <code>emacs-app</code> the
best.  Unfortunately, it lives in the &#8220;Applications&#8221; folder, and there
doesn&#8217;t seem to be a way to configure the emacs GUI to work the same way
as the default emacs behavior on linux (see the related discussion thread
<a href="http://stackoverflow.com/questions/10171280/how-to-launch-gui-emacs-from-command-line-in-osx">here</a>).
I ended up putting the emacs GUI in the dock next to the terminal, and I
access it from there.</p>

<h2>Final Thoughts</h2>

<p>I&#8217;ve had this setup on my new Macbook for about two weeks now,
and it seems to be working well for my daily python programming tasks.
I hope that this post will be useful to someone out there.  I&#8217;m still
learning as well &#8211; if you have any pro tips for me or for other readers,
feel free to leave them in the comments below!</p>

<p>Happy hacking.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hacking Super Mario Bros. with Python]]></title>
    <link href="http://jakevdp.github.com/blog/2013/01/13/hacking-super-mario-bros-with-python/"/>
    <updated>2013-01-13T10:32:00-08:00</updated>
    <id>http://jakevdp.github.com/blog/2013/01/13/hacking-super-mario-bros-with-python</id>
    <content type="html"><![CDATA[<p>This weekend I was coming home from the meeting of the
<a href="http://www.lsst.org">LSST</a> Dark Energy Science Collaboration,
and found myself with a few extra hours in the airport.
I started passing the time by poking around on the <a href="http://imgur.com">imgur</a>
gallery, and saw a couple animated gifs based on
one of my all-time favorite games, Super Mario Bros.
It got me wondering: could I use matplotlib&#8217;s animation tools to create these
sorts of gifs in Python?  Over a few beers at an SFO bar, I started to try
to figure it out.  To spoil the punchline a bit, I managed to do it, and the
result looks like this:</p>

<p><img class="center" src="http://jakevdp.github.com/images/mario.gif"></p>

<p>This animation was created <em>entirely in Python and matplotlib</em>, by scraping the
image data directly from the Super Mario Bros. ROM.  Below I&#8217;ll explain how
I managed to do it.</p>

<!-- more -->


<h2>Scraping the Pixel Data</h2>

<p>Clearly, the first requirement for this pursuit
is to get the pixel data used to construct the
mario graphics.  My first thought was to do something sophisticated like
<a href="http://en.wikipedia.org/wiki/Machine_learning#Sparse_Dictionary_Learning">dictionary learning</a> on a collection of screen-shots from the game
to build up a library of thumbnails.  That would be an interesting pursuit
in itself, but it turns out it&#8217;s much more straightforward to directly
scrape the graphics from the source.</p>

<p>It&#8217;s possible to find digital copies of most
Nintendo Entertainment System (NES) games online.
These are known as ROMs, and can be played using one of
several NES emulators available for various operating systems.
I&#8217;m not sure about the legality of these
digital game copies, so I won&#8217;t provide a link to them here.  But the internet
being what it is, you can search Google for some variation of &#8220;Super Mario
ROM&#8221; and pretty easily find a copy to download.</p>

<p>One interesting aspect of ROMs for the original NES is that
they use raw byte-strings to store 2-bit (i.e. 4-color), 8x8 thumbnails from
which all of the game&#8217;s graphics are built.
The collection of these byte-strings
are known as the &#8220;pattern table&#8221; for the game, and there is generally a
separate pattern table for foreground and background images.
In the case of NES games, there are
256 foreground and 256 background tiles, which can be extracted directly from
the ROMs if you know where to look (incidentally, this is one of the things
that made the NES an &#8220;8-bit&#8221; system.  2<sup>8</sup> = 256, so eight bits are required
to specify any single tile from the table).</p>

<h2>Extracting Raw Bits from a File</h2>

<p>If you&#8217;re able to obtain a copy of the ROM, the first step to getting at the
graphics is to extract the raw bit information.
This can be done easily in Python using <code>numpy.unpackbits</code>
and <code>numpy.frombuffer</code> or <code>numpy.fromfile</code>.
Additionally, the ROMs are generally stored using
zip compression.  The uncompressed data can be extracted using Python&#8217;s
built-in <code>zipfile</code> module.  Combining all of this, we extract the raw file
bits using a function like the following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">zipfile</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">extract_bits</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">is_zipfile</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
</span><span class='line'>        <span class="n">zp</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span class='line'>        <span class="n">raw_buffer</span> <span class="o">=</span> <span class="n">zp</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">zp</span><span class="o">.</span><span class="n">filelist</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span class='line'>        <span class="nb">bytes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">raw_buffer</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="nb">bytes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fromfile</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">unpackbits</span><span class="p">(</span><span class="nb">bytes</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>This function checks whether the file is compressed using zip, and extracts
the raw bit information in the appropriate way.</p>

<h2>Assembling the Pattern Tables</h2>

<p>The thumbnails which contain the game&#8217;s graphics patterns are not at any set
location within the file.  The location is specified within the assembly
code that comprises the program, but for our purposes
it&#8217;s much simpler to just visualize
the data and find it by-eye.  To accomplish this,
I wrote a Python script
(download it <a href="http://jakevdp.github.com/downloads/code/mario/view_pattern_table.py">here</a>)
based on the above data extraction code
which uses matplotlib to interactively display the contents of the file.
Each thumbnail is composed from 128 bits:
two 64-bit chunks each representing an 8x8 image with one bit per pixel.
Stacking the two results in two bits per pixel, which are able to
represent four colors within each thumbnail.
The first few hundred chunks are difficult to interpret by-eye. They appear
similar to a 2D bar code: in this case the &#8220;bar code&#8221; represents pieces of the
assembly code which store the Super Mario Bros. program.</p>

<p><img class="center" src="http://jakevdp.github.com/images/mario_pattern_sourcecode.png" width="400"></p>

<p>Scrolling down toward the end of the file, however, we can quickly recognize
the thumbnails which make up the game&#8217;s graphics:</p>

<p><img class="center" src="http://jakevdp.github.com/images/mario_pattern_foreground.png" width="400"></p>

<p>This first pattern table contains all the foreground graphics for the game.
Looking closely, the first few thumbnails
are clearly recognizable as pieces of Mario&#8217;s head and body.
Going on we see pieces of various enemies in the game, as well as the iconic
mushrooms and fire-flowers.</p>

<p><img class="center" src="http://jakevdp.github.com/images/mario_pattern_background.png" width="400"></p>

<p>The second pattern table contains all the background graphics for the game.
Along with numbers and text, this contains the pieces which make up mario&#8217;s
world: bricks, blocks, clouds, bushes, and coins.
Though all of the above tiles are shown in grayscale, we can add color by
simply changing the matplotlib Colormap, as we&#8217;ll see below.</p>

<h2>Combining Thumbnails and Adding Color</h2>

<p>Examining the pattern tables above, we can see that big Mario is made up of
eight pattern tiles stitched together, while small Mario is made up of four.
With a bit of trial and error, we can create each of the full frames and
add color to make them look more authentic.  Below are all of the frames used
to animate Mario&#8217;s motion throughout the game:</p>

<p><img class="center" src="http://jakevdp.github.com/images/mario_graphics1.png" width="400"></p>

<p>Similarly, we can use the thumbnails to construct some of the other
familiar graphics from the game, including the goombas, koopa troopas,
beetle baileys, mushrooms, fire flowers, and more.</p>

<p><img class="center" src="http://jakevdp.github.com/images/mario_graphics2.png" width="350"></p>

<p>The Python code to extract, assemble, and plot these images can be downloaded
<a href="http://jakevdp.github.com/downloads/code/mario/draw_mario.py">here</a>.</p>

<h2>Animating Mario</h2>

<p>With all of this in place, creating an animation of Mario is relatively easy.
Using matplotlib&#8217;s animation tools (described in a
<a href="http://jakevdp.github.com/blog/2012/08/18/matplotlib-animation-tutorial/">previous post</a>), all it
takes is to decide on the content of each frame, and stitch the frames together
using matplotlib&#8217;s animation toolkit.  Putting together big Mario with some
scenery and a few of his friends, we can create a cleanly looping animated gif.</p>

<p>The code used to generate this animation is shown below.  We use the same
<code>NESGraphics</code> class used to draw the frames above, and stitch them together
with a custom class that streamlines the building-up of the frames.
By uncommenting the line near the bottom, the result will be saved as an
animated GIF using the ImageMagick animation writer that I
<a href="https://github.com/matplotlib/matplotlib/pull/1337">recently contributed</a>
to matplotlib.  The ImageMatick plugin has not yet made it into a
released matplotlib version, so using the save command below will
require installing the development version of matplotlib, available for
download on <a href="http://github.com/matplotlib/matplotlib">github</a>.</p>

<figure class='code'><figcaption><span>&#8220;Mario Animation&#8221; (animate_mario.py)</span> <a href='http://jakevdp.github.com/downloads/code/mario/animate_mario.py'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
<span class='line-number'>191</span>
<span class='line-number'>192</span>
<span class='line-number'>193</span>
<span class='line-number'>194</span>
<span class='line-number'>195</span>
<span class='line-number'>196</span>
<span class='line-number'>197</span>
<span class='line-number'>198</span>
<span class='line-number'>199</span>
<span class='line-number'>200</span>
<span class='line-number'>201</span>
<span class='line-number'>202</span>
<span class='line-number'>203</span>
<span class='line-number'>204</span>
<span class='line-number'>205</span>
<span class='line-number'>206</span>
<span class='line-number'>207</span>
<span class='line-number'>208</span>
<span class='line-number'>209</span>
<span class='line-number'>210</span>
<span class='line-number'>211</span>
<span class='line-number'>212</span>
<span class='line-number'>213</span>
<span class='line-number'>214</span>
</pre></td><td class='code'><pre><code class='py'><span class='line'><span class="sd">&quot;&quot;&quot;Extract and draw graphics from Mario</span>
</span><span class='line'>
</span><span class='line'><span class="sd">By Jake Vanderplas, 2013 &lt;http://jakevdp.github.com&gt;</span>
</span><span class='line'><span class="sd">License: GPL.</span>
</span><span class='line'><span class="sd">Feel free to use and distribute, but keep this attribution intact.</span>
</span><span class='line'><span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">zipfile</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">ListedColormap</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">animation</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">NESGraphics</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;Class interface for stripping graphics from an NES ROM&quot;&quot;&quot;</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">&#39;mario_ROM.zip&#39;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">2049</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">offset</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">is_zipfile</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
</span><span class='line'>            <span class="n">zp</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span class='line'>            <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unpackbits</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">zp</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">zp</span><span class="o">.</span><span class="n">filelist</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span class='line'>                                               <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">))</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unpackbits</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">fromfile</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">))</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">generate_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">transparent</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;Generate an image from the pattern table.</span>
</span><span class='line'>
</span><span class='line'><span class="sd">        Parameters</span>
</span><span class='line'><span class="sd">        ----------</span>
</span><span class='line'><span class="sd">        A : array_like</span>
</span><span class='line'><span class="sd">            an array of integers indexing the thumbnails to use.</span>
</span><span class='line'><span class="sd">            The upper-left corner of the image is A[0, 0], and the</span>
</span><span class='line'><span class="sd">            bottom-right corner is A[-1, -1].  A negative index indicates</span>
</span><span class='line'><span class="sd">            that the thumbnail should be flipped horizontally.</span>
</span><span class='line'><span class="sd">        C : array-like</span>
</span><span class='line'><span class="sd">            The color table for A.  C should have shape A.shape + (4,).</span>
</span><span class='line'><span class="sd">            C[i, j] gives the values associated with the four bits of A</span>
</span><span class='line'><span class="sd">            for the output image.</span>
</span><span class='line'><span class="sd">        transparent : array_like</span>
</span><span class='line'><span class="sd">            if true, then zero-values in A will be masked for transparency</span>
</span><span class='line'>
</span><span class='line'><span class="sd">        Returns</span>
</span><span class='line'><span class="sd">        -------</span>
</span><span class='line'><span class="sd">        im : ndarray or masked array</span>
</span><span class='line'><span class="sd">             the image encoded by A and C</span>
</span><span class='line'><span class="sd">        &quot;&quot;&quot;</span>
</span><span class='line'>        <span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">C</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>            <span class="n">C</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># broadcast C to the shape of A</span>
</span><span class='line'>        <span class="n">C</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">shape</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span><span class="p">,))</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">im</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">8</span> <span class="o">*</span> <span class="n">A</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">8</span> <span class="o">*</span> <span class="n">A</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span class='line'>            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span class='line'>                <span class="c"># extract bits</span>
</span><span class='line'>                <span class="n">ind</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
</span><span class='line'>                <span class="n">thumb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">ind</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>                <span class="c"># set bit colors</span>
</span><span class='line'>                <span class="n">thumb</span> <span class="o">=</span> <span class="n">C</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">thumb</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>                <span class="c"># flip image if negative</span>
</span><span class='line'>                <span class="k">if</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">thumb</span> <span class="o">=</span> <span class="n">thumb</span><span class="p">[:,</span> <span class="p">::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>                <span class="n">im</span><span class="p">[</span><span class="mi">8</span> <span class="o">*</span> <span class="n">i</span><span class="p">:</span><span class="mi">8</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">8</span> <span class="o">*</span> <span class="n">j</span><span class="p">:</span><span class="mi">8</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="n">thumb</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="n">transparent</span><span class="p">:</span>
</span><span class='line'>            <span class="n">im</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_equal</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">im</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">NESAnimator</span><span class="p">():</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;Class for animating NES graphics&quot;&quot;&quot;</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">framesize</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
</span><span class='line'>                 <span class="n">filename</span><span class="o">=</span><span class="s">&#39;mario_ROM.zip&#39;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">2049</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">NG</span> <span class="o">=</span> <span class="n">NESGraphics</span><span class="p">()</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">figsize</span> <span class="o">=</span> <span class="n">figsize</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">framesize</span> <span class="o">=</span> <span class="n">framesize</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">frames</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[])</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">ims</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">add_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ctable</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
</span><span class='line'>                  <span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">transparent</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;add a frame to the animation.</span>
</span><span class='line'><span class="sd">        A &amp; C are passed to NESGraphics.generate_image&quot;&quot;&quot;</span>
</span><span class='line'>        <span class="n">cmap</span> <span class="o">=</span> <span class="n">ListedColormap</span><span class="p">(</span><span class="n">ctable</span><span class="p">)</span>
</span><span class='line'>        <span class="n">im</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NG</span><span class="o">.</span><span class="n">generate_image</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">transparent</span><span class="o">=</span><span class="n">transparent</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">im</span><span class="p">,</span> <span class="n">cmap</span><span class="p">,</span> <span class="n">offset</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;initialize animation&quot;&quot;&quot;</span>
</span><span class='line'>        <span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_equal</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">keys</span><span class="p">())):</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">ims</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s">&#39;nearest&#39;</span><span class="p">,</span>
</span><span class='line'>                                           <span class="n">zorder</span><span class="o">=</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">framesize</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">framesize</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ims</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ims</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_animate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;animation step&quot;&quot;&quot;</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
</span><span class='line'>            <span class="n">im</span><span class="p">,</span> <span class="n">cmap</span><span class="p">,</span> <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">i</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">[</span><span class="n">key</span><span class="p">])]</span>
</span><span class='line'>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">ims</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">ims</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">set_cmap</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">ims</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">set_clim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">cmap</span><span class="o">.</span><span class="n">colors</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">ims</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">set_extent</span><span class="p">((</span><span class="n">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span class='line'>                                      <span class="n">im</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">8</span> <span class="o">+</span> <span class="n">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span class='line'>                                      <span class="n">offset</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span class='line'>                                      <span class="n">im</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="mi">8</span> <span class="o">+</span> <span class="n">offset</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ims</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ims</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interval</span><span class="p">,</span> <span class="n">frames</span><span class="p">,</span> <span class="n">blit</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;animate the frames&quot;&quot;&quot;</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">figsize</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">frameon</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
</span><span class='line'>                                    <span class="n">xticks</span><span class="o">=</span><span class="p">[],</span> <span class="n">yticks</span><span class="o">=</span><span class="p">[])</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">NullFormatter</span><span class="p">())</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">NullFormatter</span><span class="p">())</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">anim</span> <span class="o">=</span> <span class="n">animation</span><span class="o">.</span><span class="n">FuncAnimation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="p">,</span>
</span><span class='line'>                                            <span class="bp">self</span><span class="o">.</span><span class="n">_animate</span><span class="p">,</span>
</span><span class='line'>                                            <span class="n">init_func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_initialize</span><span class="p">,</span>
</span><span class='line'>                                            <span class="n">frames</span><span class="o">=</span><span class="n">frames</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="n">interval</span><span class="p">,</span>
</span><span class='line'>                                            <span class="n">blit</span><span class="o">=</span><span class="n">blit</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">anim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">anim</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">anim</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">animate_mario</span><span class="p">():</span>
</span><span class='line'>    <span class="n">NA</span> <span class="o">=</span> <span class="n">NESAnimator</span><span class="p">(</span><span class="n">framesize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Set up the background frames</span>
</span><span class='line'>    <span class="n">bg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">18</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
</span><span class='line'>    <span class="n">bg_colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
</span><span class='line'>    <span class="n">bg_ctable</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;#88AACC&#39;</span><span class="p">,</span> <span class="s">&#39;tan&#39;</span><span class="p">,</span> <span class="s">&#39;brown&#39;</span><span class="p">,</span> <span class="s">&#39;black&#39;</span><span class="p">,</span>
</span><span class='line'>                 <span class="s">&#39;green&#39;</span><span class="p">,</span> <span class="s">&#39;#DDAA11&#39;</span><span class="p">,</span> <span class="s">&#39;#FFCC00&#39;</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># blue sky</span>
</span><span class='line'>    <span class="n">bg</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="mi">292</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># brown bricks on the ground</span>
</span><span class='line'>    <span class="n">bg</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="mi">9</span> <span class="o">*</span> <span class="p">[</span><span class="mi">436</span><span class="p">,</span> <span class="mi">437</span><span class="p">]</span>
</span><span class='line'>    <span class="n">bg</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="mi">9</span> <span class="o">*</span> <span class="p">[</span><span class="mi">438</span><span class="p">,</span> <span class="mi">439</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># little green hill </span>
</span><span class='line'>    <span class="n">bg</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">305</span><span class="p">,</span> <span class="mi">306</span><span class="p">]</span>
</span><span class='line'>    <span class="n">bg</span><span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">304</span><span class="p">,</span> <span class="mi">308</span><span class="p">,</span> <span class="mi">294</span><span class="p">,</span> <span class="mi">307</span><span class="p">]</span>
</span><span class='line'>    <span class="n">bg_colors</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</span><span class='line'>    <span class="n">bg_colors</span><span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># brown bricks</span>
</span><span class='line'>    <span class="n">bg</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span><span class="mi">18</span><span class="p">]</span> <span class="o">=</span> <span class="mi">325</span>
</span><span class='line'>    <span class="n">bg</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span><span class="mi">18</span><span class="p">]</span> <span class="o">=</span> <span class="mi">327</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># gold question block</span>
</span><span class='line'>    <span class="n">bg</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">339</span><span class="p">,</span> <span class="mi">340</span><span class="p">]</span>
</span><span class='line'>    <span class="n">bg</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">341</span><span class="p">,</span> <span class="mi">342</span><span class="p">]</span>
</span><span class='line'>    <span class="n">bg_colors</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># duplicate background for clean wrapping</span>
</span><span class='line'>    <span class="n">bg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span><span class="n">bg</span><span class="p">,</span> <span class="n">bg</span><span class="p">])</span>
</span><span class='line'>    <span class="n">bg_colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span><span class="n">bg_colors</span><span class="p">,</span> <span class="n">bg_colors</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># get index of yellow pixels to make them flash</span>
</span><span class='line'>    <span class="n">i_yellow</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">bg_colors</span> <span class="o">==</span> <span class="mi">6</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># create background frames by offsetting the image</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">offset</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">36</span><span class="p">):</span>
</span><span class='line'>        <span class="n">bg_colors</span><span class="p">[</span><span class="n">i_yellow</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">][</span><span class="n">offset</span> <span class="o">%</span> <span class="mi">9</span><span class="p">]</span>
</span><span class='line'>        <span class="n">NA</span><span class="o">.</span><span class="n">add_frame</span><span class="p">(</span><span class="s">&#39;bg&#39;</span><span class="p">,</span> <span class="n">bg</span><span class="p">,</span> <span class="n">bg_colors</span><span class="p">,</span> <span class="n">bg_ctable</span><span class="p">,</span>
</span><span class='line'>                     <span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">offset</span><span class="p">),</span>
</span><span class='line'>                     <span class="n">transparent</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Create mario frames</span>
</span><span class='line'>    <span class="n">mario_colors</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;white&#39;</span><span class="p">,</span> <span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="s">&#39;orange&#39;</span><span class="p">,</span> <span class="s">&#39;brown&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="n">NA</span><span class="o">.</span><span class="n">add_frame</span><span class="p">(</span><span class="s">&#39;mario&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]],</span>
</span><span class='line'>                 <span class="n">ctable</span><span class="o">=</span><span class="n">mario_colors</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</span><span class='line'>    <span class="n">NA</span><span class="o">.</span><span class="n">add_frame</span><span class="p">(</span><span class="s">&#39;mario&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">],</span> <span class="p">[</span><span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">]],</span>
</span><span class='line'>                 <span class="n">ctable</span><span class="o">=</span><span class="n">mario_colors</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</span><span class='line'>    <span class="n">NA</span><span class="o">.</span><span class="n">add_frame</span><span class="p">(</span><span class="s">&#39;mario&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">],</span> <span class="p">[</span><span class="mi">18</span><span class="p">,</span> <span class="mi">19</span><span class="p">],</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">],</span> <span class="p">[</span><span class="mi">22</span><span class="p">,</span> <span class="mi">23</span><span class="p">]],</span>
</span><span class='line'>                 <span class="n">ctable</span><span class="o">=</span><span class="n">mario_colors</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Create koopa-troopa frames</span>
</span><span class='line'>    <span class="n">troopa_colors</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;white&#39;</span><span class="p">,</span> <span class="s">&#39;green&#39;</span><span class="p">,</span> <span class="s">&#39;white&#39;</span><span class="p">,</span> <span class="s">&#39;orange&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="n">NA</span><span class="o">.</span><span class="n">add_frame</span><span class="p">(</span><span class="s">&#39;troopa&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="mi">252</span><span class="p">,</span> <span class="mi">160</span><span class="p">],</span> <span class="p">[</span><span class="mi">161</span><span class="p">,</span> <span class="mi">162</span><span class="p">],</span> <span class="p">[</span><span class="mi">163</span><span class="p">,</span> <span class="mi">164</span><span class="p">]],</span>
</span><span class='line'>                 <span class="n">ctable</span><span class="o">=</span><span class="n">troopa_colors</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
</span><span class='line'>    <span class="n">NA</span><span class="o">.</span><span class="n">add_frame</span><span class="p">(</span><span class="s">&#39;troopa&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="mi">252</span><span class="p">,</span> <span class="mi">165</span><span class="p">],</span> <span class="p">[</span><span class="mi">166</span><span class="p">,</span> <span class="mi">167</span><span class="p">],</span> <span class="p">[</span><span class="mi">168</span><span class="p">,</span> <span class="mi">169</span><span class="p">]],</span>
</span><span class='line'>                 <span class="n">ctable</span><span class="o">=</span><span class="n">troopa_colors</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Create goomba frames</span>
</span><span class='line'>    <span class="n">goomba_colors</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;white&#39;</span><span class="p">,</span> <span class="s">&#39;black&#39;</span><span class="p">,</span> <span class="s">&#39;#EECCCC&#39;</span><span class="p">,</span> <span class="s">&#39;#BB3333&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="n">NA</span><span class="o">.</span><span class="n">add_frame</span><span class="p">(</span><span class="s">&#39;goomba&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="mi">112</span><span class="p">,</span> <span class="mi">113</span><span class="p">],</span> <span class="p">[</span><span class="mi">114</span><span class="p">,</span> <span class="mi">115</span><span class="p">]],</span>
</span><span class='line'>                 <span class="n">ctable</span><span class="o">=</span><span class="n">goomba_colors</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
</span><span class='line'>    <span class="n">NA</span><span class="o">.</span><span class="n">add_frame</span><span class="p">(</span><span class="s">&#39;goomba&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="mi">112</span><span class="p">,</span> <span class="mi">113</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">115</span><span class="p">,</span> <span class="o">-</span><span class="mi">114</span><span class="p">]],</span>
</span><span class='line'>                 <span class="n">ctable</span><span class="o">=</span><span class="n">goomba_colors</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">NA</span><span class="o">.</span><span class="n">animate</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">frames</span><span class="o">=</span><span class="mi">36</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">anim</span> <span class="o">=</span> <span class="n">animate_mario</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># saving as animated gif requires matplotlib 0.13+ and imagemagick</span>
</span><span class='line'>    <span class="c">#anim.save(&#39;mario_animation.gif&#39;, writer=&#39;imagemagick&#39;, fps=10)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>The result looks like this:</p>

<p><img class="center" src="http://jakevdp.github.com/images/mario.gif"></p>

<p>Pretty good!  With a bit more work, it would
be relatively straightforward to use the above code to do some more
sophisticated animations: perhaps recreate a full
level from the original Super Mario Bros, or even design your own custom
level.  You might think about taking the extra step and trying to make Mario&#8217;s
movements interactive.  This could be a lot of fun, but probably very difficult
to do well within matplotlib.
For tackling an interactive mario in Python, another framework such as
<a href="http://docs.python.org/2/library/tkinter.html">Tkinter</a> or
<a href="http://www.pygame.org/">pygame</a> might be a better choice.</p>

<p>I hope you enjoyed this one as much as I did &#8211; happy coding!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Will Scientists Ever Move to Python 3?]]></title>
    <link href="http://jakevdp.github.com/blog/2013/01/03/will-scientists-ever-move-to-python-3/"/>
    <updated>2013-01-03T17:08:00-08:00</updated>
    <id>http://jakevdp.github.com/blog/2013/01/03/will-scientists-ever-move-to-python-3</id>
    <content type="html"><![CDATA[<p>It&#8217;s been just over four years since the introduction of Python 3, and there
are still about as many opinions on it as there are Python users.  For
those who haven&#8217;t been following, Python 3 is a release
which offers several nice improvements over the 2.x series
(summarized <a href="http://docs.python.org/3/whatsnew/3.0.html">here</a>)
with the distinct disadvantage that it broke backward compatibility:
though Python 3.x (often referred to as &#8220;Py3k&#8221; for short)
is true to the spirit of earlier Python versions,
there are a few valid 2.x constructions which will not parse under 3.x.</p>

<p>Breaking backward compatibility was controversial, to say the least.  I
think of the debate as one between the pragmatists &#8211; those who see Python
as an extremely useful tool, which should not be unnecessarily tampered with &#8211;
and the idealists &#8211; those who view the Python language
as a living, breathing entity, which should be allowed to grow into the
fullest and most Pythonic possible version of itself.</p>

<!-- more -->


<p>The scientific Python community has largely leaned to the pragmatist side.  Some
of this is due to the pragmatism inherent to science (in the publish-or-perish
world, one does not often have time for idealistic thinking about one&#8217;s tools),
and some of this is due to institutional pressures, which I&#8217;ll mention below.
But regardless of the cause, the scientific Python community has been
particularly slow in moving to Py3k.  <a href="http://www.numpy.org">Numpy</a>, the
core of the scientific Python ecosystem, first supported Py3k in version
1.5, released in 2010, nearly two years after the release of Py3k.
<a href="http://www.scipy.org">Scipy</a> followed suit with version 0.9
in March 2011.  <a href="http://www.ipython.org">IPython</a> added Py3k support
with version 0.12 in December 2011.  The final holdout among
the core scientific packages was matplotlib, which now supports Py3k in the
1.2 release as of November 2012.</p>

<p>The casual observer might look at this progress
and infer that the transition is near
complete: scientists can now start moving to Py3k without fear of losing
access to the tools of their trade.  But in reality, nothing could be further
from the truth.  Consider that the Numpy and Scipy development teams only
last month made the decision to drop support for Python 2.4 (which was first
released in March of 2005).  Even then, there has been considerable talk of how
to make sure the final 2.4-compatible release is long-term-stable for those
users who will use 2.4 well into the future (many institutional Linux
distributions, such as Red Hat Linux, are very slow to update their
native Python version).
All else being equal, we might extrapolate and say that support for Python 2.7
(first released in July 2010) might be dropped by mid 2018.  But this would
be an overly simplistic expectation, for reasons I&#8217;ll outline below.
There&#8217;s a vital component of this transition that I haven&#8217;t yet heard
mentioned by anyone else:
I would argue that the main limitation to the adoption of Python 3
by the scientific community lies in <em>the lack of a well-developed 3-to-2
conversion tool</em>.  I&#8217;ll explain this thought below.</p>

<h2>The Types of Users</h2>

<p>To begin to evaluate what it will take for the
scientific community to transition to
Python 3, I&#8217;d like to divide members of the community into three general
categories.  These are certainly not mutually exclusive (I fall pretty
squarely in all three), but the categories will
help us think about the forces involved in the
decision to switch to Py3k.  The groups are as follows:</p>

<ul>
<li><p><strong>Individual Scientists</strong> are the researchers who primarily use
Python for their own individual tasks: statistical analysis of their data,
creation of figures, and writing scripts to stitch together various legacy
codes.</p></li>
<li><p><strong>Institutional Scientists</strong> are the researchers who are part of a large
research team or collaboration with a common Python code-base.  An example
that I personally am
familiar with is the <a href="http://www.lsst.org">LSST</a> collaboration:
the LSST software stack has been developed by a large team over the course
of several years, and is written primarily in C++ and Python 2.x.</p></li>
<li><p><strong>Scientific Python Developers</strong>
are the scientists who may be part of one or both of the above groups,
but also go the extra mile and contribute to the packages that
make the scientific Python ecosystem what it is.  I wouldn&#8217;t limit this to
just the NumPy/SciPy/IPython/Matplotlib packages mentioned above, but also
the expanding circle of packages geared toward specific fields and
applications.</p></li>
</ul>


<p>Members of these three groups have very different needs and constraints that
will affect how easily they can move to Py3k:</p>

<h3>Individual Scientists</h3>

<p>This group is probably the most flexible of the three, and for that reason
are perhaps the lowest-hanging fruit of the bunch.
Free from the constraints of a large legacy
code-base, they can adopt Py3k virtually at-will.  I witnessed
a similar transition take place
over the course of my graduate schooling at University of Washington: at the
beginning of my PhD program, nearly everybody in the department was
using the proprietary language <a href="http://www.exelisvis.com/idl/">IDL</a>.
By the time I graduated,
close to half the department was primarily using Python.</p>

<p>As much as I&#8217;d like
to take some of the credit for that transition (I was a tireless proseletizer
of the virtues of Python over IDL),
it likely had more to do with the adoption of
Python by several important astronomical research collaborations, as well
as the influence of several newer professors who recommended Python to
their advisees.  This points to the fact that
although an individual could easily upgrade to Py3k virtually at
will, in practice it is unlikely to happen unless others around them have
begun to do so as well.</p>

<h3>Institutional Scientists</h3>

<p>As hinted above, even the most independent scientists are not entirely
insulated from their colleagues, and the tools chosen by influential
members of their team will affect their choice of tools for their own tasks.
But aside from this peer pressure, scientists who are part of a large
collaboration are additionally constrained by the countless hours
already invested in their present code-base. And if that code-base is
in Python 2.x, it will take a lot more than some unicode and iterator
enhancements to effect a transition to Python 3.</p>

<p>Because of this, I&#8217;ve seen a lot of incredulity (and even some
anger) about the decision of the Python core devs to move forward with a
backward-incompatible release.  In a conversation, one Princeton
astrophysicist I know (who is famous for &#8211; among other things &#8211;
the brashness of his opining) called
the py3k release &#8220;utterly inane&#8221;, and went on to say that astronomy will
<em>never</em> adopt Python 3.  I&#8217;m a bit more optimistic myself, but this is
indicative of the general attitude toward Py3k within the scientific
community.</p>

<h3>Scientific Python Developers</h3>

<p>Those scientists who take the time to contribute to the greater community are
a bit of a special case.  They tend to be less pragmatic about Python than
their peers, and may have some silly hobbies (like using their free time
to write blog posts with &#8220;Python&#8221; in the title).
They are generally comfortable using multiple Python installs
on each of their several computers, and as such are less influenced by the
preferences of whatever research group they may be in at the time.
Yet even this group is unlikely to be using Python 3.x currently.
It might be because Matplotlib &#8211; a core scientific tool &#8211; only just moved
to Py3k compatibility, but I think it&#8217;s even deeper than that.  I, for one,
did not jump up to make the switch the minute the matplotlib 1.2 announcement
came out, and I doubt that others did either.</p>

<p>The core of the problem is this: even though NumPy/SciPy/IPython/Matplotlib
are compatible with Py3k, the <em>development</em> still takes place in Python 2.x.
The Py3k compatibility is bootstrapped in using
<a href="http://wiki.python.org/moin/2to3">2to3</a>
and other scripts of that ilk.  And herein lies the problem:
absent another compelling reason, as long as the development takes place
in Python 2.x, these developers will be very unlikely to move
their own work to Py3k.</p>

<h2>The Outlook</h2>

<p>Exploring the needs and drivers of these three groups paints a pretty dim
picture for Py3k in the scientific world.
Individuals have no pressure to switch, and
collaborations become so entrenched that switching is near impossible.
Even those who are actively contributing to the Numpy and Scipy codebases
cannot use Python 3 for this task, and thus have no big driver for change.
This final piece holds perhaps the biggest opportunity,
because the Scientific Python developers have the potential
to catalyze change in the rest of the community: these are the folks who write
the online Python documentation and tutorials; they give talks and tutorials
at <a href="http://conference.scipy.org/">SciPy</a>, <a href="http://www.pydata.org">PyData</a>,
<a href="http://www.pycon.org">PyCon</a>,
and conferences specific to their own field; they influence the
curricula used in Python bootcamps like those facilitated by
<a href="http://software-carpentry.org/">Software Carpentry</a>.  In short, perhaps the
sole hope of moving the scientific community to Python 3 lies in the
scientific python developers.  Move the <em>development</em> of Numpy, Scipy, IPython,
Matplotlib, and other core packages to Python 3, and the rest of the
community will follow.</p>

<p>The problem is, this is impossible right now.  Realistically, Python 2.x will
have to be supported by Numpy and Scipy for at least another decade.
If Numpy &amp; Scipy development is to be moved to Py3k, what is needed is a
fully-developed, mature 3-to-2 conversion tool which can convert 3.x back as
far as Python 2.5.  With this, development could continue in Py3k while still
maintaining 2.x support.  A basic form of such a tool
<a href="http://wiki.python.org/moin/3to2">is available</a>, but it is not nearly
as mature (nor as easy a task)
as the <a href="http://wiki.python.org/moin/2to3">2to3</a> tool.
The tool&#8217;s relative immaturity
is understandable: converting the new to the old is not nearly as sexy as
converting the old to the new.  But for the reasons I outlined above, I
believe it to be vital.</p>

<p>So here&#8217;s my challenge to any Python idealists out there:
<em>if you want the scientific community to ever fully adopt Python 3,
prioritize the development of a full-featured 3to2 tool,
and start doing all you can to encourage NumPy to move to
developing in Py3k</em>.  I&#8217;d do it myself, but I&#8217;m too much of
a pragmatist: python 2.7 is more than sufficient for my own research.
But I&#8217;d be willing to bet &#8211; if someone does this, the rest of us will
soon follow.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Sparse SVDs in Python]]></title>
    <link href="http://jakevdp.github.com/blog/2012/12/19/sparse-svds-in-python/"/>
    <updated>2012-12-19T08:21:00-08:00</updated>
    <id>http://jakevdp.github.com/blog/2012/12/19/sparse-svds-in-python</id>
    <content type="html"><![CDATA[<p>After <a href="http://fseoane.net/blog/2012/singular-value-decomposition-in-scipy/">Fabian&#8217;s post</a> on the topic, I have recently returned to thinking about the
subject of sparse singular value decompositions (SVDs) in Python.</p>

<p>For those who haven&#8217;t used it, the SVD is an extremely powerful technique.
It is the core routine of many applications,
from filtering to dimensionality
reduction to graph analysis to supervised classification and much, much more.</p>

<p>I first came across the need for a fast sparse SVD when applying a technique
called Locally Linear Embedding (LLE) to astronomy spectra: it was the first
astronomy paper I published, and you can read it <a href="http://adsabs.harvard.edu/abs/2009AJ....138.1365V">here</a>.  In LLE, one visualizes the nonlinear relationship
between high-dimensional observations.  The computational cost is extreme: for
<em>N</em> objects, one must compute the null space (intimately related to the SVD)
of a <em>N</em> by <em>N</em> matrix.  Using direct methods (e.g. LAPACK), this can scale
as bad as <em>O[N<sup>3</sup> ]</em> in both memory and speed!</p>

<!-- more -->


<p>I needed a better option.  I came across the package
<a href="http://www.caam.rice.edu/software/ARPACK/">ARPACK</a>, a well-tested
implementation of iterative Arnoldi Factorization written in Fortran.
The shift-invert mode of ARPACK served my needs, so I spent some time
extending the <a href="http://docs.scipy.org/doc/scipy/reference/tutorial/arpack.html">scipy ARPACK wrapper</a> so I could address my problem.  I also helped
Fabian and others implement the beginnings of the <a href="http://scikit-learn.org/dev/modules/manifold.html">manifold learning</a> module in scikit-learn.</p>

<p>Even after moving on to other problems, I found that
the SVD was at the core of nearly every component of my research
while working toward my PhD.  You can see this in
<a href="http://adsabs.harvard.edu/abs/2011AAS...21715304C">several</a>
<a href="http://adsabs.harvard.edu/abs/2011ApJ...727..118V">other</a>
<a href="http://adsabs.harvard.edu/abs/2011AJ....142..203D">projects</a>
I was involved with over the years, including my
<a href="http://gradworks.umi.com/35/42/3542228.html">PhD Thesis</a>, which centered
on Astronomical applications of Karhunen-Loeve analysis &#8211; a method, again,
intimately linked with the SVD.</p>

<p>Hopefully this brief tour has convinced you of the power of the SVD in
addressing real research problems.  Now to the code.</p>

<h1>Sparse SVD Implementations</h1>

<p>What I didn&#8217;t know at the time I worked on the ARPACK wrapper is that there
are several more good options available for computing SVDs - and most now have
passable Python wrappers which integrate well with scipy&#8217;s sparse matrices.
I&#8217;ll briefly describe them here.</p>

<h2>LAPACK</h2>

<p><a href="http://www.netlib.org/lapack/">LAPACK</a>
is the standard specification of efficient linear algebra routines
across computing systems, and contains routines to
compute a direct (i.e. non-iterative)
SVD of a dense matrix.  The performance of LAPACK varies from system to
system, and implementation to implementation.  The algorithm is generally
<em>O[N<sup>3</sup> ]</em>, and partial decompositions are (in general) not available.  Though
not technically the same, I would group alternatives like
<a href="http://math-atlas.sourceforge.net/">ATLAS</a> (an optimized open-source
matrix library) and <a href="http://software.intel.com/en-us/intel-mkl">MKL</a>
(Intel&#8217;s proprietery library for fast numerics) in the same category.
I don&#8217;t have much personal experience with MKL, so if I&#8217;m not doing it justice,
please feel free to admonish me in the comments!</p>

<p>LAPACK is wrapped by Numpy and Scipy, and is
at the core of many of the routines in <code>numpy.linalg</code> and
<code>scipy.linalg</code>, including the <code>svd</code> function in each.</p>

<h2>ARPACK</h2>

<p>As I mentioned above, <a href="http://www.caam.rice.edu/software/ARPACK/">ARPACK</a>
implements a fast iterative/partial eigenvalue decomposition on a general
linear operator.  One of its strengths is that unlike LAPACK, it does not
depend on your matrix being stored in any standard layout: all that is required
is to provide a routine which implements matrix-vector multiplication.  This
means that as well as dense matrices, ARPACK can be used on any sparse matrix
or even a general linear operator which maps one vector space to another.</p>

<p>ARPACK does not have a native SVD implementation, but it is possible to
exploit the relationship between eigenvalue decompositions and singular
value decompositions to compute an ARPACK svd: this is what the current
<code>svds</code> routine in <code>scipy.sparse.linalg</code> does: see the documentation
<a href="http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.linalg.svds.html">here</a>.  One issue with this implementation is that to compute the SVD of
a matrix <em>M</em>, it must implicitly compute <em>M<sup>T</sup> M</em>,
and that may lead to issues of both
numerical accuracy and computational efficiency.</p>

<h2>SVDLIBC</h2>

<p>Before Fabian&#8217;s blog post, mentioned above, I had never heard of
<a href="http://tedlab.mit.edu/~dr/SVDLIBC/">SVDLIBC</a>.  It
is also an Arnoldi-iteration based implementation, but SVDLIBC requires a
specific sparse matrix format to operate.  Fortunately for scipy users, this
storage format maps directly to the CSC sparse matrix format, so the SVDLIBC
svd can be computed without any memory copies of the scipy matrix (assuming,
of course, your matrix is already stored as CSC or CSR!).  A bare-bones python
wrapper for the routine exists in the <a href="http://pypi.python.org/pypi/sparsesvd/">sparsesvd</a> package.</p>

<h2>PROPACK</h2>

<p><a href="http://soi.stanford.edu/~rmunk/PROPACK/">PROPACK</a> is another well-tested
Fortran package which computes the SVD directly using an Arnoldi Factorization
scheme: like ARPACK, it only depends on a callback implementing left- and
right-multiplication operations, rather than making use of any specific
sparse storage format.  Like SVDLIBC, it  computes the svd directly, saving
computation time and leading to greater numerical accuracy.  From my brief
search, it seems that
no python wrapper is readily available (though I heard that David Cournapeau
had worked on one).  Until recently, the PROPACK license was unspecified,
precluding its inclusion in Scipy or other BSD-licensed packages.  It appears
that just recently, PROPACK itself was moved to a BSD license, so there is
now the possibility of including it in the Scipy universe.</p>

<p>I have begun working on a full-featured PROPACK wrapper in the Scipy style,
using the excellent F2Py Fortran interface generator.  You can find the
code in my <a href="https://github.com/jakevdp/pypropack">pypropack repository</a>
on Github.  As of this writing, there is still a lot to do to make the
code releasable, but there is enough there to enable some quick benchmarks.</p>

<h1>Benchmark Comparisons</h1>

<p>To benchmark these four SVD options, I used the following code:</p>

<figure class='code'><figcaption><span>SVD Benchmarks (plot_svd_benchmarks.py)</span> <a href='http://jakevdp.github.com/downloads/code/plot_svd_benchmarks.py'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
</pre></td><td class='code'><pre><code class='py'><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">scipy.sparse</span> <span class="kn">import</span> <span class="n">csc_matrix</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">sparse_matrix</span><span class="p">(</span><span class="n">N1</span><span class="p">,</span> <span class="n">N2</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">conversion</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">,</span> <span class="n">rseed</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;create NxN matrix with an approximate fraction f of nonzero entries&quot;&quot;&quot;</span>
</span><span class='line'>    <span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">RandomState</span><span class="p">(</span><span class="n">rseed</span><span class="p">)</span>
</span><span class='line'>    <span class="n">M</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">N1</span><span class="p">,</span> <span class="n">N2</span><span class="p">)</span>
</span><span class='line'>    <span class="n">M</span><span class="p">[</span><span class="n">M</span> <span class="o">&gt;</span> <span class="n">f</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">conversion</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">time_svd</span><span class="p">(</span><span class="n">svdfunc</span><span class="p">,</span> <span class="n">N1</span><span class="p">,</span> <span class="n">N2</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">rseed</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">bestof</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">matfunc</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">args</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>        <span class="n">args</span> <span class="o">=</span> <span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">N1_N2_f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">broadcast</span><span class="p">(</span><span class="n">N1</span><span class="p">,</span> <span class="n">N2</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</span><span class='line'>    <span class="n">times</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="n">N1</span><span class="p">,</span> <span class="n">N2</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> <span class="ow">in</span> <span class="n">N1_N2_f</span><span class="p">:</span>
</span><span class='line'>        <span class="n">M</span> <span class="o">=</span> <span class="n">sparse_matrix</span><span class="p">(</span><span class="n">N1</span><span class="p">,</span> <span class="n">N2</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">matfunc</span><span class="p">,</span> <span class="n">rseed</span><span class="p">)</span>
</span><span class='line'>        <span class="n">t_best</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bestof</span><span class="p">):</span>
</span><span class='line'>            <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
</span><span class='line'>            <span class="n">res</span> <span class="o">=</span> <span class="n">svdfunc</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span class='line'>            <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
</span><span class='line'>            <span class="n">t_best</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">t_best</span><span class="p">,</span> <span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">times</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t_best</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">times</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">N1_N2_f</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">plot_propack</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">N1</span><span class="p">,</span> <span class="n">N2</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
</span><span class='line'>    <span class="kn">from</span> <span class="nn">pypropack</span> <span class="kn">import</span> <span class="n">svdp</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;computing execution times for propack...&quot;</span>
</span><span class='line'>    <span class="n">t</span> <span class="o">=</span> <span class="n">time_svd</span><span class="p">(</span><span class="n">svdp</span><span class="p">,</span> <span class="n">N1</span><span class="p">,</span> <span class="n">N2</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">kmax</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
</span><span class='line'>                 <span class="n">matfunc</span><span class="o">=</span><span class="n">csc_matrix</span><span class="p">)</span>
</span><span class='line'>    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">N1</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;propack (k=</span><span class="si">%i</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="n">k</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">plot_arpack</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">N1</span><span class="p">,</span> <span class="n">N2</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
</span><span class='line'>    <span class="kn">from</span> <span class="nn">scipy.sparse.linalg</span> <span class="kn">import</span> <span class="n">svds</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;computing execution times for arpack...&quot;</span>
</span><span class='line'>    <span class="n">t</span> <span class="o">=</span> <span class="n">time_svd</span><span class="p">(</span><span class="n">svds</span><span class="p">,</span> <span class="n">N1</span><span class="p">,</span> <span class="n">N2</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">matfunc</span><span class="o">=</span><span class="n">csc_matrix</span><span class="p">)</span>
</span><span class='line'>    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">N1</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;arpack (k=</span><span class="si">%i</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="n">k</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">plot_svdlibc</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">N1</span><span class="p">,</span> <span class="n">N2</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
</span><span class='line'>    <span class="kn">from</span> <span class="nn">sparsesvd</span> <span class="kn">import</span> <span class="n">sparsesvd</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;computing execution times for svdlibc...&quot;</span>
</span><span class='line'>    <span class="n">t</span> <span class="o">=</span> <span class="n">time_svd</span><span class="p">(</span><span class="n">sparsesvd</span><span class="p">,</span> <span class="n">N1</span><span class="p">,</span> <span class="n">N2</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,),</span> <span class="n">matfunc</span><span class="o">=</span><span class="n">csc_matrix</span><span class="p">)</span>
</span><span class='line'>    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">N1</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;svdlibc (k=</span><span class="si">%i</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="n">k</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">plot_lapack</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">N1</span><span class="p">,</span> <span class="n">N2</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
</span><span class='line'>    <span class="kn">from</span> <span class="nn">scipy.linalg</span> <span class="kn">import</span> <span class="n">svd</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;computing execution times for lapack...&quot;</span>
</span><span class='line'>    <span class="n">t</span> <span class="o">=</span> <span class="n">time_svd</span><span class="p">(</span><span class="n">svd</span><span class="p">,</span> <span class="n">N1</span><span class="p">,</span> <span class="n">N2</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">full_matrices</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'>    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">N1</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;lapack (full)&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">N</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">**</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
</span><span class='line'>    <span class="n">f</span> <span class="o">=</span> <span class="mf">0.6</span>
</span><span class='line'>    <span class="n">k</span> <span class="o">=</span> <span class="mi">5</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">xscale</span><span class="o">=</span><span class="s">&#39;log&#39;</span><span class="p">,</span> <span class="n">yscale</span><span class="o">=</span><span class="s">&#39;log&#39;</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">try</span><span class="p">:</span>
</span><span class='line'>        <span class="n">plot_propack</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
</span><span class='line'>    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
</span><span class='line'>        <span class="k">print</span> <span class="s">&quot;propack cannot be loaded&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">try</span><span class="p">:</span>
</span><span class='line'>        <span class="n">plot_arpack</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
</span><span class='line'>    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
</span><span class='line'>        <span class="k">print</span> <span class="s">&quot;scipy arpack wrapper cannot be loaded&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">try</span><span class="p">:</span>
</span><span class='line'>        <span class="n">plot_svdlibc</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
</span><span class='line'>    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
</span><span class='line'>        <span class="k">print</span> <span class="s">&quot;svdlibc cannot be loaded&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">try</span><span class="p">:</span>
</span><span class='line'>        <span class="n">plot_lapack</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
</span><span class='line'>    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
</span><span class='line'>        <span class="k">print</span> <span class="s">&quot;scipy lapack wrapper cannot be loaded&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'>    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;N&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;t (s)&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;Execution Times for k=5&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;gray&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>This creates square sparse matrices, measures the computation time as a function
of the matrix size, and plots the results.  The results on my 3-year old
linux box are below:</p>

<p><img src="http://jakevdp.github.com/figures/svd_benchmarks.png" title="[SVD benchmarks]" ></p>

<p>A few comments: First, as expected, LAPACK is much slower than the rest.  This
is due to two factors: first, LAPACK computes the full SVD, while the other
methods compute only partial SVDs (the <em>k=5</em> largest singular values).
Second, the LAPACK on my system is not
well-optimized: I could probably reduce this by at least an order of magnitude
if I were to use an ATLAS install optimized for my system.  If you need a
full SVD, it will be hard to beat LAPACK/ATLAS/MKL in terms of speed (but
in terms of memory consumption, as
<a href="http://fseoane.net/blog/2012/singular-value-decomposition-in-scipy/">Fabian showed</a>,
LAPACK can be pretty bad).  Because SVDLIBC, ARPACK, and PROPACK all use
Lanczos/Arnoldi iteration, they should all similarly out-perform LAPACK on
the memory question.</p>

<p>Second, the good performance of SVDLIBC for small matrices is probably due to
its direct use of the CSC memory within the Fortran code.  For matrices this
size, the Python overhead of invoking the callback in ARPACK and PROPACK kills
any performance gains from the more sophisticated algorithms.  As the matrices
grow, we see that ARPACK and PROPACK begin to out-perform SVDLIBC.</p>

<p>Finally, we see that for these test cases, PROPACK is consistently
faster than ARPACK by a factor of 5 or so: nothing to scoff at!
I haven&#8217;t rigorously tested the claims of increased numerical stability
in PROPACK, but those two pieces point to PROPACK as the
preferred method by far.</p>

<h1>Next Steps</h1>

<p>I hope to continue developing the <code>pypropack</code> wrapper on github, and once
I&#8217;m happy with it, incorporate it into Scipy&#8217;s sparse linear algebra tools.
I would love help with this: in particular, if there are any F2Py wizards out
there, I&#8217;m currently having what I think is a
<a href="https://github.com/jakevdp/pypropack/issues/1">memory issue</a>
with the callback function that I can&#8217;t seem to track down.</p>

<p>Hopefully this post has helped convince you of the importance of SVDs in
scientific computing, and also of the benefits of working on PROPACK
incorporation in the scientific Python universe.  This sort of thing
won&#8217;t happen unless someone like <strong>you</strong> decides to work on it!  That
fact ends up being both a weakness and an incredible strength of
open-source packages.</p>

<p>Happy coding!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Minesweeper in Matplotlib]]></title>
    <link href="http://jakevdp.github.com/blog/2012/12/06/minesweeper-in-matplotlib/"/>
    <updated>2012-12-06T18:23:00-08:00</updated>
    <id>http://jakevdp.github.com/blog/2012/12/06/minesweeper-in-matplotlib</id>
    <content type="html"><![CDATA[<p>Lately I&#8217;ve been playing around with interactivity in matplotlib.  A couple
weeks ago, I discussed briefly how to use event callbacks to implement
<a href="http://jakevdp.github.com/blog/2012/11/24/simple-3d-visualization-in-matplotlib/">simple 3D visualization</a>
and later used this as a base for creating a
<a href="http://jakevdp.github.com/blog/2012/11/26/3d-interactive-rubiks-cube-in-python">working 3D Rubik&#8217;s cube</a>
entirely in matplotlib.</p>

<p>Today I have a different goal: re-create
<a href="http://en.wikipedia.org/wiki/Minesweeper_%28computer_game%29">minesweeper</a>,
that ubiquitous single-player puzzle game that most of us will admit to
having binged on at least once or twice in their lives.  In minesweeper, the
goal is to discover and avoid hidden mines within a gridded minefield, and
the process takes some logic and quick thinking.</p>

<p><img src="http://jakevdp.github.com/images/minesweeper_2.gif" width="800"></p>

<!-- more -->


<p>To implement this in matplotlib, at its most stripped-down level, simply
requires us to register mouse clicks on the plot window, and to have the
window respond in the appropriate way.  The rest is just the logic underneath.</p>

<h2>Event Callbacks</h2>

<p>Matplotlib contains several built-in event callbacks.  You can register
key presses (with <code>'key_press_event'</code> and <code>'key_release_event'</code>),
mouse clicks (with <code>'button_press_event'</code> and <code>'button_release_event'</code>),
mouse movement (with <code>'motion_notify_event'</code>), and much more.  For
a full listing of the events that can be bound to functionality, see the
documentation of the function <code>'matplotlib.pyplot.connect'</code>.</p>

<p>As a simple example, here we&#8217;ll create a polygon and a function which is called
each time the axis is clicked.  The function <code>on_click</code> checks if the click
occured within the polygon, and if so changes the polygon to a random
color:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
</span><span class='line'>
</span><span class='line'><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span class='line'><span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</span><span class='line'><span class="n">polygon</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Polygon</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
</span><span class='line'><span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Function to be called when mouse is clicked</span>
</span><span class='line'><span class="k">def</span> <span class="nf">on_click</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">polygon</span><span class="o">.</span><span class="n">contains_point</span><span class="p">((</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)):</span>
</span><span class='line'>        <span class="n">polygon</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</span><span class='line'>        <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Connect the click function to the button press event</span>
</span><span class='line'><span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;button_press_event&#39;</span><span class="p">,</span> <span class="n">on_click</span><span class="p">)</span>
</span><span class='line'><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>The result will look something like this:</p>

<p><img src="http://jakevdp.github.com/images/poly_color.gif" width="400"></p>

<p>Checking whether a click event is within a polygon or any other artist is
a very common pattern.  For this reason, matplotlib provides a built-in
 <code>pick</code> event.  You can think of this as an event similar to a mouse click,
but specifically generated by a plot artist when it is clicked.
Furthermore, a <code>pick</code> event is associated back to that particular plot
element, which can be easily referenced within the callback.
Here is a code snippet which gives is equivalent to the code above,
but uses pick events rather than button press events:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
</span><span class='line'>
</span><span class='line'><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span class='line'><span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</span><span class='line'><span class="n">polygon</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Polygon</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
</span><span class='line'><span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># set the picker to True, so that pick events are registered</span>
</span><span class='line'><span class="n">polygon</span><span class="o">.</span><span class="n">set_picker</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># create a function to be bound to pick events: here the event has an</span>
</span><span class='line'><span class="c"># attribute `artist` which points to the object which was clicked</span>
</span><span class='line'><span class="k">def</span> <span class="nf">on_pick</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
</span><span class='line'>    <span class="n">event</span><span class="o">.</span><span class="n">artist</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</span><span class='line'>    <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c"># bind pick events to our on_pick function</span>
</span><span class='line'><span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;pick_event&#39;</span><span class="p">,</span> <span class="n">on_pick</span><span class="p">)</span>
</span><span class='line'><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here we have used just a single polygon, but there&#8217;s nothing to stop us
from using multiple interactive polygons in a single window.  Add some
logic beneath it all, and the results can be extremely flexible.  We&#8217;ll
go through one in-depth example below.</p>

<h2>Minesweeper</h2>

<p>Using this simple machinery, let&#8217;s create a basic implementation of the game
Minesweeper.  This involves creating a grid of polygons, with a certain number
of them &#8220;containing&#8221; mines.  Clicking the left mouse button will &#8220;uncover&#8221;
the square, ending the game if a mine is underneath.  If (as we&#8217;d hope)
an uncovered square does not contain a mine, it will reveal a number
reporting how many of the eight adjacent squares contain mines.
The right mouse button is used to mark where we believe mines are.</p>

<p>There are some other more sophisticated features in the below code &#8211;
for example, clicking
an already uncovered square with the correct number of adjacent mines marked
will automatically clear the surrounding squares &#8211; but rather than enumerating
every programming decision, I&#8217;ll just show you the code.  It&#8217;s less than
200 lines, but the results are pretty nice:</p>

<p><img src="http://jakevdp.github.com/images/minesweeper.gif" width="440" height="440"></p>

<figure class='code'><figcaption><span>Minesweeper (minesweeper.py)</span> <a href='http://jakevdp.github.com/downloads/code/minesweeper.py'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
</pre></td><td class='code'><pre><code class='py'><span class='line'><span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">Matplotlib Minesweeper</span>
</span><span class='line'><span class="sd">----------------------</span>
</span><span class='line'><span class="sd">A simple Minesweeper implementation in matplotlib.</span>
</span><span class='line'>
</span><span class='line'><span class="sd">Author: Jake Vanderplas &lt;vanderplas@astro.washington.edu&gt;, Dec. 2012</span>
</span><span class='line'><span class="sd">License: BSD</span>
</span><span class='line'><span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">product</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">scipy.signal</span> <span class="kn">import</span> <span class="n">convolve2d</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">matplotlib.patches</span> <span class="kn">import</span> <span class="n">RegularPolygon</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">MineSweeper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span class='line'>    <span class="n">covered_color</span> <span class="o">=</span> <span class="s">&#39;#DDDDDD&#39;</span>
</span><span class='line'>    <span class="n">uncovered_color</span> <span class="o">=</span> <span class="s">&#39;#AAAAAA&#39;</span>
</span><span class='line'>    <span class="n">edge_color</span> <span class="o">=</span> <span class="s">&#39;#888888&#39;</span>
</span><span class='line'>    <span class="n">count_colors</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;none&#39;</span><span class="p">,</span> <span class="s">&#39;blue&#39;</span><span class="p">,</span> <span class="s">&#39;green&#39;</span><span class="p">,</span> <span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="s">&#39;darkblue&#39;</span><span class="p">,</span>
</span><span class='line'>                    <span class="s">&#39;darkred&#39;</span><span class="p">,</span> <span class="s">&#39;darkgreen&#39;</span><span class="p">,</span> <span class="s">&#39;black&#39;</span><span class="p">,</span> <span class="s">&#39;black&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="n">flag_vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">],</span>
</span><span class='line'>                              <span class="p">[</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.65</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]])</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@classmethod</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">beginner</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">cls</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@classmethod</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">intermediate</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">cls</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@classmethod</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">expert</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">cls</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">nmines</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nmines</span> <span class="o">=</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">nmines</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># Create the figure and axes</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">((</span><span class="n">width</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.</span><span class="p">,</span> <span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.</span><span class="p">))</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">((</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">),</span>
</span><span class='line'>                                    <span class="n">aspect</span><span class="o">=</span><span class="s">&#39;equal&#39;</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
</span><span class='line'>                                    <span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">width</span> <span class="o">+</span> <span class="mf">0.05</span><span class="p">),</span>
</span><span class='line'>                                    <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">height</span> <span class="o">+</span> <span class="mf">0.05</span><span class="p">))</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="p">):</span>
</span><span class='line'>            <span class="n">axis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">NullFormatter</span><span class="p">())</span>
</span><span class='line'>            <span class="n">axis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">NullLocator</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># Create the grid of squares</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">squares</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">RegularPolygon</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">),</span>
</span><span class='line'>                                                 <span class="n">numVertices</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
</span><span class='line'>                                                 <span class="n">radius</span><span class="o">=</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
</span><span class='line'>                                                 <span class="n">orientation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span><span class="p">,</span>
</span><span class='line'>                                                 <span class="n">ec</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">edge_color</span><span class="p">,</span>
</span><span class='line'>                                                 <span class="n">fc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">covered_color</span><span class="p">)</span>
</span><span class='line'>                                  <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">)]</span>
</span><span class='line'>                                 <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">)])</span>
</span><span class='line'>        <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">sq</span><span class="p">)</span> <span class="k">for</span> <span class="n">sq</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">squares</span><span class="o">.</span><span class="n">flat</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># define internal state variables</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">mines</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">counts</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">clicked</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">game_over</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># Create event hook for mouse clicks</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;button_press_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_button_press</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_draw_mine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">Circle</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">),</span> <span class="n">radius</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span>
</span><span class='line'>                                     <span class="n">ec</span><span class="o">=</span><span class="s">&#39;black&#39;</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s">&#39;black&#39;</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_draw_red_X</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
</span><span class='line'>                     <span class="n">ha</span><span class="o">=</span><span class="s">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s">&#39;center&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_toggle_mine_flag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">clicked</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]:</span>
</span><span class='line'>            <span class="k">pass</span>
</span><span class='line'>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flags</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">flags</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">flags</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flag_vertices</span> <span class="o">+</span> <span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span>
</span><span class='line'>                                            <span class="n">fc</span><span class="o">=</span><span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="n">ec</span><span class="o">=</span><span class="s">&#39;black&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flags</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_reveal_unmarked_mines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mines</span> <span class="o">&amp;</span> <span class="o">~</span><span class="bp">self</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">))):</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">_draw_mine</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_cross_out_wrong_flags</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="o">~</span><span class="bp">self</span><span class="o">.</span><span class="n">mines</span> <span class="o">&amp;</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">))):</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">_draw_red_X</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_mark_remaining_mines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mines</span> <span class="o">&amp;</span> <span class="o">~</span><span class="bp">self</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">))):</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">_toggle_mine_flag</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_setup_mines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
</span><span class='line'>        <span class="c"># randomly place mines on a grid, but not on space (i, j)</span>
</span><span class='line'>        <span class="n">idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">+</span> <span class="n">j</span><span class="p">),</span>
</span><span class='line'>                              <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">+</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>                                        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)])</span>
</span><span class='line'>        <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">mines</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">mines</span><span class="o">.</span><span class="n">flat</span><span class="p">[</span><span class="n">idx</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">nmines</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># count the number of mines bordering each square</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">counts</span> <span class="o">=</span> <span class="n">convolve2d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mines</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">complex</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span>
</span><span class='line'>                                 <span class="n">mode</span><span class="o">=</span><span class="s">&#39;same&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">real</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_click_square</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
</span><span class='line'>        <span class="c"># if this is the first click, then set up the mines</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mines</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">_setup_mines</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># if there is a flag or square is already clicked, do nothing</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">clicked</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]:</span>
</span><span class='line'>            <span class="k">return</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">clicked</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># hit a mine: game over</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mines</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">game_over</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">_reveal_unmarked_mines</span><span class="p">()</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">_draw_red_X</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">_cross_out_wrong_flags</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># square with no surrounding mines: clear out all adjacent squares</span>
</span><span class='line'>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">counts</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">squares</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uncovered_color</span><span class="p">)</span>
</span><span class='line'>            <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)):</span>
</span><span class='line'>                <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)):</span>
</span><span class='line'>                    <span class="bp">self</span><span class="o">.</span><span class="n">_click_square</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># hit an empty square: reveal the number</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">squares</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uncovered_color</span><span class="p">)</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counts</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]),</span>
</span><span class='line'>                         <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">count_colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">counts</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]],</span>
</span><span class='line'>                         <span class="n">ha</span><span class="o">=</span><span class="s">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s">&#39;center&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span>
</span><span class='line'>                         <span class="n">fontweight</span><span class="o">=</span><span class="s">&#39;bold&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># if all remaining squares are mines, mark them and end game</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mines</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">==</span> <span class="p">(</span><span class="o">~</span><span class="bp">self</span><span class="o">.</span><span class="n">clicked</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">():</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">game_over</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">_mark_remaining_mines</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_button_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_over</span> <span class="ow">or</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">ydata</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
</span><span class='line'>            <span class="k">return</span>
</span><span class='line'>        <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">))</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="ow">or</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">):</span>
</span><span class='line'>            <span class="k">return</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># left mouse button: reveal square.  If the square is already clicked</span>
</span><span class='line'>        <span class="c"># and the correct # of mines are marked, then clear surroundig squares</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clicked</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]):</span>
</span><span class='line'>                <span class="n">flag_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">flags</span><span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
</span><span class='line'>                                        <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span><span class="n">j</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</span><span class='line'>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">counts</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">flag_count</span><span class="p">:</span>
</span><span class='line'>                    <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">jj</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span>
</span><span class='line'>                                                <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)),</span>
</span><span class='line'>                                          <span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span>
</span><span class='line'>                                                <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">2</span><span class="p">))):</span>
</span><span class='line'>                        <span class="bp">self</span><span class="o">.</span><span class="n">_click_square</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">jj</span><span class="p">)</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">_click_square</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># right mouse button: mark/unmark flag</span>
</span><span class='line'>        <span class="k">elif</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">clicked</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]):</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">_toggle_mine_flag</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">ms</span> <span class="o">=</span> <span class="n">MineSweeper</span><span class="o">.</span><span class="n">intermediate</span><span class="p">()</span>
</span><span class='line'>    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>There are still some things missing from this which are present in any good
minesweeper implementation: a timer, the ability to reset the game without
restarting the program, the ability to keep track of fastest times, and
likely some more things I haven&#8217;t thought of.</p>

<p>Regardless, this little script shows how incredibly powerful a framework
matplotlib is.
It can create an interactive Rubik&#8217;s cube one day, publication-quality plots
the next, and round out the season with a blast back to a classic Windows 3.1
time-sink.  And for some reason, I find I have much more fun playing the
minesweeper I built from scratch than the one that came with my system.</p>

<p>Enjoy!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[A Primer on Python Metaclasses]]></title>
    <link href="http://jakevdp.github.com/blog/2012/12/01/a-primer-on-python-metaclasses/"/>
    <updated>2012-12-01T07:25:00-08:00</updated>
    <id>http://jakevdp.github.com/blog/2012/12/01/a-primer-on-python-metaclasses</id>
    <content type="html"><![CDATA[<div class="ipynb">

<div class="text_cell_render border-box-sizing rendered_html">
<h2 class="ipynb">
  Python, Classes, and Objects
</h2>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Most readers are aware that Python is an object-oriented language.  By
object-oriented, we mean that Python can define <em>classes</em>, which bundle
<strong>data</strong> and <strong>functionality</strong> into one entity.  For example, we may
create a class <code>IntContainer</code> which stores an integer and allows
certain operations to be performed:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [1]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">class</span> <span class="nc">IntContainer</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_one</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [2]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">ic</span> <span class="o">=</span> <span class="n">IntContainer</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ic</span><span class="o">.</span><span class="n">add_one</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">ic</span><span class="o">.</span><span class="n">i</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">3
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is a bit of a silly example, but shows the fundamental nature of
classes: their ability to bundle data and operations into a single
<em>object</em>, which leads to cleaner, more manageable, and more adaptable code.
Additionally, classes can inherit properties from parents and add or
specialize attributes and methods.  This <em>object-oriented</em>
approach to programming can be very intuitive and powerful.</p>
<p>What many do not realize, though, is that quite literally
<a href="http://www.diveintopython.net/getting_to_know_python/everything_is_an_object.html"><em>everything</em></a>
in the Python language is an object.</p>

<!-- more -->

<p>For example, integers are simply instances of
the built-in <code>int</code> type:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [3]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">&lt;type &apos;int&apos;&gt;
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>To emphasize that the <code>int</code> type really is an object, let&#8217;s derive from it
and specialize the <code>__add__</code> method (which is the machinery underneath
the <code>+</code> operator):</p>
<p><em>(Note: We&#8217;ll used the</em> <code>super</code> <em>syntax to call methods from the parent class: if you&#8217;re unfamiliar with this, take a look at</em>
<a href="http://stackoverflow.com/questions/576169/understanding-python-super-and-init-methods"><em>this StackOverflow question</em></a><em>).</em></p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [4]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">class</span> <span class="nc">MyInt</span><span class="p">(</span><span class="nb">int</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;specializing addition&quot;</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyInt</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__add__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

<span class="n">i</span> <span class="o">=</span> <span class="n">MyInt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">specializing addition
4
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Using the <code>+</code> operator on our derived type goes through our <code>__add__</code>
method, as expected.
We see that <code>int</code> really is an object that can be subclassed and extended
just like user-defined classes.  The same is true
of <code>float</code>s, <code>list</code>s, <code>tuple</code>s, and everything else in the Python
language.  They&#8217;re all objects.</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h2 class="ipynb">
  Down the Rabbit Hole: Classes as Objects
</h2>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>We said above that <em>everything</em> in python is an object: it turns out that this
is true of <em>classes themselves</em>.  Let&#8217;s look at an example.</p>
<p>We&#8217;ll start by defining a class that does nothing</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [5]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">class</span> <span class="nc">DoNothing</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>If we instantiate this, we can use the <code>type</code> operator to see the type
of object that it is:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [6]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">d</span> <span class="o">=</span> <span class="n">DoNothing</span><span class="p">()</span>
<span class="nb">type</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [6]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">__main__.DoNothing</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>We see that our variable <code>d</code> is an instance of the class
<code>__main__.DoNothing</code>.</p>
<p>We can do this similarly for built-in  types:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [7]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="nb">type</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [7]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">list</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>A list is, as you may expect, an object of type <code>list</code>.</p>
<p>But let&#8217;s take this a step further: what is the type
of <code>DoNothing</code> itself?</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [8]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="nb">type</span><span class="p">(</span><span class="n">DoNothing</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [8]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">type</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>The type of <code>DoNothing</code> is <code>type</code>.  This tells us that the <em>class</em>
<code>DoNothing</code> is itself an object, and that object is of type <code>type</code>.</p>
<p>It turns out that this is the same for built-in datatypes:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [9]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="nb">type</span><span class="p">(</span><span class="nb">tuple</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="nb">list</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="nb">int</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [9]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">(type, type, type, type)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>What this shows is that in Python, <em>classes are objects</em>, and they are objects of
type <code>type</code>.  <code>type</code> is a <em>metaclass</em>: a class which instantiates classes.
All <a href="http://www.python.org/doc/newstyle/">new-style classes</a>
in Python are instances of the <code>type</code> metaclass, including <code>type</code> itself:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [10]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="nb">type</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [10]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">type</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Yes, you read that correctly:
the type of <code>type</code> is <code>type</code>.  In other words, <code>type</code> is <em>an
instance of itself</em>.  This sort of circularity cannot (to my knowledge)
be duplicated in pure Python, and the behavior is created through a bit of a
hack at the implementation level of Python.</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h2 class="ipynb">
  Metaprogramming: Creating Classes on the Fly
</h2>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now that we&#8217;ve stepped back and considered the fact that classes in Python
are simply objects like everything else, we can think about what is known
as <em>metaprogramming</em>.  You&#8217;re probably used to creating functions which
return objects.  We can think of these functions as an object factory: they
take some arguments, create an object, and return it.  Here is a simple example
of a function which creates an <code>int</code> object:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [11]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">def</span> <span class="nf">int_factory</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">i</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">i</span>

<span class="n">i</span> <span class="o">=</span> <span class="n">int_factory</span><span class="p">(</span><span class="s">&#39;100&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">100
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is overly-simplistic, but any function you write in the course
of a normal program can be boiled down to this: take some arguments,
do some operations, and create &amp; return an object.
With the above discussion in mind, though, there&#8217;s nothing to stop
us from creating an object of type <code>type</code> (that is, a class), 
and returning that instead &#8211; this is a <em>metafunction:</em></p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [12]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">def</span> <span class="nf">class_factory</span><span class="p">():</span>
    <span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">return</span> <span class="n">Foo</span>

<span class="n">F</span> <span class="o">=</span> <span class="n">class_factory</span><span class="p">()</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">F</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">&lt;class &apos;__main__.Foo&apos;&gt;
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Just as the function <code>int_factory</code> constructs an returns an instance of
<code>int</code>,
the function <code>class_factory</code> constructs and returns an instance of <code>type</code>:
that is, a class.</p>
<p>But the above construction is a bit awkward: especially if we were going to do some
more complicated logic when constructing <code>Foo</code>, it would be nice to avoid all the
nested indentations and define the class in a more dynamic way.
We can accomplish this by instantiating <code>Foo</code> from <code>type</code> directly:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [13]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">def</span> <span class="nf">class_factory</span><span class="p">():</span>
    <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="s">&#39;Foo&#39;</span><span class="p">,</span> <span class="p">(),</span> <span class="p">{})</span>

<span class="n">F</span> <span class="o">=</span> <span class="n">class_factory</span><span class="p">()</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">F</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">&lt;class &apos;__main__.Foo&apos;&gt;
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>In fact, the construct</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [14]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>is identical to the construct</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [15]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">MyClass</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s">&#39;MyClass&#39;</span><span class="p">,</span> <span class="p">(),</span> <span class="p">{})</span>
</pre></div>

</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>MyClass</code> is an instance of type <code>type</code>, and that can be seen
explicitly in the second version of the definition.
A potential confusion arises from the more common use of <code>type</code> as
a function to determine the type of an object, but you should strive
to separate these two uses of the keyword in your mind:
here <code>type</code> is a class (more precisely, a <em>metaclass</em>),
and <code>MyClass</code> is an instance of <code>type</code>.</p>
<p>The arguments to the <code>type</code> constructor are:</p>
</div>
type(name, bases, dct)
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><code>name</code> is a string giving the name of the class to be constructed</li>
<li><code>bases</code> is a tuple giving the parent classes of the class to be constructed</li>
<li><code>dct</code> is a dictionary of the attributes and methods of the class to be constructed</li>
</ul>
<p>So, for example, the following two pieces of code have identical results:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [16]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">4</span>

<span class="k">class</span> <span class="nc">Bar</span><span class="p">(</span><span class="n">Foo</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_i</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">i</span>
    
<span class="n">b</span> <span class="o">=</span> <span class="n">Bar</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">get_i</span><span class="p">())</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">4
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [17]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">Foo</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s">&#39;Foo&#39;</span><span class="p">,</span> <span class="p">(),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>

<span class="n">Bar</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s">&#39;Bar&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">Foo</span><span class="p">,),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">get_i</span> <span class="o">=</span> <span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">i</span><span class="p">))</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">Bar</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">get_i</span><span class="p">())</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">4
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>This perhaps seems a bit over-complicated in the case of this contrived
example, but it can be very powerful as a means of dynamically creating
new classes on-the-fly.</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h2 class="ipynb">
  Making Things Interesting: Custom Metaclasses
</h2>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now things get really fun.  Just as we can inherit from and extend a class we&#8217;ve
created, we can also inherit from and extend the <code>type</code> metaclass, and create
custom behavior in our metaclass.</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h3 class="ipynb">
  Example 1: Modifying Attributes
</h3>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let&#8217;s use a simple example where we want to create an API in which the user can
create a set of interfaces which contain a file object.  Each interface should
have a unique string ID, and contain an open file object.  The user could then write
specialized methods to accomplish certain tasks.  There are certainly good
ways to do this without delving into metaclasses, but such a simple example will
(hopefully) elucidate what&#8217;s going on.</p>
<p>First we&#8217;ll create our interface meta class, deriving from <code>type</code>:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [18]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">class</span> <span class="nc">InterfaceMeta</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">dct</span><span class="p">):</span>
        <span class="c"># create a class_id if it&#39;s not specified</span>
        <span class="k">if</span> <span class="s">&#39;class_id&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dct</span><span class="p">:</span>
            <span class="n">dct</span><span class="p">[</span><span class="s">&#39;class_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        
        <span class="c"># open the specified file for writing</span>
        <span class="k">if</span> <span class="s">&#39;file&#39;</span> <span class="ow">in</span> <span class="n">dct</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">dct</span><span class="p">[</span><span class="s">&#39;file&#39;</span><span class="p">]</span>
            <span class="n">dct</span><span class="p">[</span><span class="s">&#39;file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
        
        <span class="c"># we need to call type.__new__ to complete the initialization</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">InterfaceMeta</span><span class="p">,</span> <span class="n">cls</span><span class="p">)</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">dct</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Notice that we&#8217;ve modified the input dictionary (the attributes and
methods of the class) to add a class id if it&#8217;s not present, and to
replace the filename with a file object pointing to that file name.</p>
<p>Now we&#8217;ll use our <code>InterfaceMeta</code> class to construct and instantiate
an Interface object:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [19]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">Interface</span> <span class="o">=</span> <span class="n">InterfaceMeta</span><span class="p">(</span><span class="s">&#39;Interface&#39;</span><span class="p">,</span> <span class="p">(),</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">file</span><span class="o">=</span><span class="s">&#39;tmp.txt&#39;</span><span class="p">))</span>

<span class="k">print</span><span class="p">(</span><span class="n">Interface</span><span class="o">.</span><span class="n">class_id</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">Interface</span><span class="o">.</span><span class="n">file</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">interface
&lt;open file &apos;tmp.txt&apos;, mode &apos;w&apos; at 0x2c80810&gt;
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>This behaves as we&#8217;d expect: the <code>class_id</code> class variable is created,
and the <code>file</code> class variable is replaced with an open file object.
Still, the creation of the <code>Interface</code> class
using <code>InterfaceMeta</code> directly is a bit clunky and difficult to read.
This is where <code>__metaclass__</code> comes in
and steals the show.  We can accomplish the same thing by
defining <code>Interface</code> this way:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [20]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">class</span> <span class="nc">Interface</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">InterfaceMeta</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="s">&#39;tmp.txt&#39;</span>
    
<span class="k">print</span><span class="p">(</span><span class="n">Interface</span><span class="o">.</span><span class="n">class_id</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">Interface</span><span class="o">.</span><span class="n">file</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">interface
&lt;open file &apos;tmp.txt&apos;, mode &apos;w&apos; at 0x2c80ae0&gt;
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>by defining the <code>__metaclass__</code> attribute of the class, we&#8217;ve told the
class that it should be constructed using <code>InterfaceMeta</code> rather than
using <code>type</code>.  To make this more definite, observe that the type of
<code>Interface</code> is now <code>InterfaceMeta</code>:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [21]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="nb">type</span><span class="p">(</span><span class="n">Interface</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [21]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">__main__.InterfaceMeta</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Furthermore, any class derived from <code>Interface</code> will now be constructed
using the same metaclass:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [22]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">class</span> <span class="nc">UserInterface</span><span class="p">(</span><span class="n">Interface</span><span class="p">):</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="s">&#39;foo.txt&#39;</span>
    
<span class="k">print</span><span class="p">(</span><span class="n">UserInterface</span><span class="o">.</span><span class="n">file</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">UserInterface</span><span class="o">.</span><span class="n">class_id</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">&lt;open file &apos;foo.txt&apos;, mode &apos;w&apos; at 0x2c80c00&gt;
userinterface
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>This simple example shows how metaclasses can be used to create powerful and
flexible APIs for projects.  For example, the
<a href="https://www.djangoproject.com/">Django project</a>
makes use of these sorts of constructions to allow concise declarations
of very powerful extensions to their basic classes.</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h3 class="ipynb">
  Example 2: Registering Subclasses
</h3>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Another possible use of a metaclass is to automatically register all
subclasses derived from a given base class.  For example, you may have
a basic interface to a database and wish for the user to be able to
define their own interfaces, which are automatically stored in a master registry.</p>
<p>You might proceed this way:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [23]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">class</span> <span class="nc">DBInterfaceMeta</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
    <span class="c"># we use __init__ rather than __new__ here because we want</span>
    <span class="c"># to modify attributes of the class *after* they have been</span>
    <span class="c"># created</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">dct</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="s">&#39;registry&#39;</span><span class="p">):</span>
            <span class="c"># this is the base class.  Create an empty registry</span>
            <span class="n">cls</span><span class="o">.</span><span class="n">registry</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># this is a derived class.  Add cls to the registry</span>
            <span class="n">interface_id</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="n">cls</span><span class="o">.</span><span class="n">registry</span><span class="p">[</span><span class="n">interface_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">cls</span>
            
        <span class="nb">super</span><span class="p">(</span><span class="n">DBInterfaceMeta</span><span class="p">,</span> <span class="n">cls</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">dct</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Our metaclass simply adds a <code>registry</code> dictionary if it&#8217;s not already
present, and adds the new class to the registry if the registry is already
there.  Let&#8217;s see how this works:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [24]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">class</span> <span class="nc">DBInterface</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">DBInterfaceMeta</span>
    
<span class="k">print</span><span class="p">(</span><span class="n">DBInterface</span><span class="o">.</span><span class="n">registry</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">{}
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now let&#8217;s create some subclasses, and double-check that they&#8217;re added to
the registry:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [25]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">class</span> <span class="nc">FirstInterface</span><span class="p">(</span><span class="n">DBInterface</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">SecondInterface</span><span class="p">(</span><span class="n">DBInterface</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">SecondInterfaceModified</span><span class="p">(</span><span class="n">SecondInterface</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">print</span><span class="p">(</span><span class="n">DBInterface</span><span class="o">.</span><span class="n">registry</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">{&apos;firstinterface&apos;: &lt;class &apos;__main__.FirstInterface&apos;&gt;,
 &apos;secondinterface&apos;: &lt;class &apos;__main__.SecondInterface&apos;&gt;,
 &apos;secondinterfacemodified&apos;: &lt;class &apos;__main__.SecondInterfaceModified&apos;&gt;}
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>It works as expected!  This could be used in conjunction with
a function that chooses implementations from the registry,
and any user-defined <code>Interface</code>-derived objects would be
automatically accounted for, without the user having to remember
to manually register the new types.</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h2 class="ipynb">
  Conclusion: When Should You Use Metaclasses?
</h2>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>I&#8217;ve gone through some examples of what metaclasses are, and some ideas 
about how they might be used to create very powerful and flexible APIs. 
Although metaclasses are in the background of everything you do in Python,
the average coder rarely has to think about them.</p>
<p>But the question remains: when should you think about using custom
metaclasses in your project?  It&#8217;s a complicated question, but
there&#8217;s a quotation floating around the web
that addresses it quite succinctly:</p>
<blockquote>
<p>Metaclasses are deeper magic than 99% of users should ever worry about.
If you wonder whether you need them, you don’t (the people who actually
need them know with certainty that they need them, and don’t need an
explanation about why).</p>
<p>– Tim Peters</p>
</blockquote>
<p>In a way, this is a very unsatisfying answer: it&#8217;s a bit reminiscent of
the wistful and cliched explanation of the border between attraction
and love: &#8220;well, you just&#8230; know!&#8221;</p>
<p>But I think Tim is right: in general,
I&#8217;ve found that most tasks in Python that can be accomplished through
use of custom metaclasses can also be accomplished more cleanly and with
more clarity by other means.  As programmers, we should always be careful
to avoid being clever for the sake of cleverness alone, though
it is admittedly an ever-present temptation.</p>
<p>I personally spent six years doing science with Python, writing code
nearly on a daily basis, before I found a problem for which metaclasses
were the natural solution.  And it turns out Tim was right:</p>
<p>I just knew.</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>This post was written entirely in an IPython Notebook: the notebook file is available for
download <a href="http://jakevdp.github.com/downloads/notebooks/MetaClasses.ipynb">here</a>.
For more information on blogging with notebooks in octopress, see my
<a href="http://jakevdp.github.com/blog/2012/10/04/blogging-with-ipython/">previous post</a>
on the subject.</p>
</div>

</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[3D Interactive Rubik's Cube in Python]]></title>
    <link href="http://jakevdp.github.com/blog/2012/11/26/3d-interactive-rubiks-cube-in-python/"/>
    <updated>2012-11-26T22:00:00-08:00</updated>
    <id>http://jakevdp.github.com/blog/2012/11/26/3d-interactive-rubiks-cube-in-python</id>
    <content type="html"><![CDATA[<p>Over the weekend, I built a interactive 3D Rubik&#8217;s cube simulator in python
using only <a href="http://matplotlib.org">matplotlib</a> for all the graphics and
interaction.  Check out the demonstration here:</p>

<p><video width='680' height='400' preload='none' controls poster=' /downloads/videos/MagicCube_frame.jpg'><source src='http://jakevdp.github.com/downloads/videos/MagicCube.mp4' type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'/></video></p>

<p>You can browse the source code at the MagicCube github repository:
<a href="http://github.com/davidwhogg/MagicCube">http://github.com/davidwhogg/MagicCube</a>.</p>

<!-- more -->


<p>The 3D rendering is based on the quaternions and projections  discussed in
my <a href="http://jakevdp.github.com/blog/2012/11/24/simple-3d-visualization-in-matplotlib/">previous post</a>,
and many of the key bindings discussed there are used here.
The additional component is the turning of each face.  This is actually
fairly simple to accomplish using the tools discussed above.</p>

<p>For example, the right face is perpendicular to the x-axis in the cube-frame.
Thus to turn it, you only need to manipulate polygons with x-coordinate
between 1/3 and 1 inclusive (the cube has side-length 2 and is centered on
the origin).  The correct faces are found quickly using
numpy&#8217;s <code>where</code> statement, and a quaternion rotation is applied only to
these faces.  Easy!</p>

<p>The code and interface still needs some work, and I&#8217;m hoping to add more
features as I have time.  After spending my long weekend working on this,
I have some real work to catch-up on&#8230;</p>

<p><em>Update: I&#8217;ve heard from some folks that the key and mouse bindings don&#8217;t
work on some operating systems or backends.  If you experience
system-dependent bugs and have any insight into the problem, I&#8217;d appreciate
help working out what&#8217;s happening!</em></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Quaternions and Key Bindings: Simple 3D Visualization in Matplotlib]]></title>
    <link href="http://jakevdp.github.com/blog/2012/11/24/simple-3d-visualization-in-matplotlib/"/>
    <updated>2012-11-24T11:04:00-08:00</updated>
    <id>http://jakevdp.github.com/blog/2012/11/24/simple-3d-visualization-in-matplotlib</id>
    <content type="html"><![CDATA[<div class="ipynb">

<div class="text_cell_render border-box-sizing rendered_html">
<p>Matplotlib is a powerful framework, but its 3D capabilities still have
a lot of room to grow. The <a href="http://matplotlib.org/mpl_toolkits/mplot3d/index.html">mplot3d</a>
toolkit allows for several kinds of 3D plotting, but the ability to create
and rotate solid 3D objects is hindered by the inflexibility of the <code>zorder</code> attribute:
because it is not updated when the view is rotated, things in the &#8220;back&#8221; will cover
things in the &#8220;front&#8221;, obscuring them and leading to very unnatural-looking results.</p>
<p>I decided to see if I could create a simple script that addresses this.  Though it would
be possible to use the built-in <code>mplot3d</code> architecture to take care of rotating and
projecting the points, I decided to do it from scratch for the sake of my own education.</p>
<p>We&#8217;ll step through it below: by the end of this post we will have created a 3D viewer in
matplotlib which I think is quite nice.</p>
</div>

<!-- more -->

<div class="text_cell_render border-box-sizing rendered_html">
<h2 class="ipynb">
  Rotations in 3D: Quaternions
</h2>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>The first step to creating an interactive 3D object is to decide on a
representation for the orientation of the object.  <code>mplot3d</code> uses
azimuthal and elevation angles: these are the familiar $\theta$ and $\phi$
of spherical coordinate systems.  While this is a common system, it has the 
disadvantage that things get a little funky near the poles.</p>
<p>Another common framework for mathematical representation of solid-body rotations
is a rotation matrix.  This is nice because multiple rotations can be 
composed quickly, but extracting axis and angle information can require
matrix decompositions that are relatively expensive.</p>
<p>Finally, perhaps the best option is the use of
<a href="http://en.wikipedia.org/wiki/Quaternion">quaternions</a>,
four-dimensional generalizations of complex numbers which can be used to compactly
<a href="http://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation">represent 3D rotations</a>.
A friend who works in the video game industry (in particular the <em>Halo</em> series)
told me that quaternions are what the industry generally prefers in many situations:
they are compact, fast to compose, and very powerful.
On top of that, they&#8217;re generally cool enough that I wanted
an excuse to play around with them a bit.</p>
<p>There have been a few attempts to include quaternions natively in the scipy universe, but
none have stuck.  It&#8217;s a shame, because it would be a very useful feature. In particular,
In particular, I&#8217;d love to see something happen with the quaternion dtype, discussed
<a href="http://mail.scipy.org/pipermail/numpy-discussion/2011-July/057675.html">here</a>
on the numpy-dev email list. It looks promising, but has not yet been included in numpy.</p>
<p>With the lack of available implementations, I decided to write a basic quaternion class
which implements the functionality I need: multiplication of quaternions, and tranformation
to and from axis-angle representation:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [1]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="k">class</span> <span class="nc">Quaternion</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Quaternions for 3D rotations&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_v_theta</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">theta</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Construct quaternion from unit vector v and rotation angle theta</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        
        <span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">theta</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">theta</span><span class="p">)</span>
        <span class="n">vnrm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">v</span> <span class="o">*</span> <span class="n">v</span><span class="p">))</span>

        <span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([[</span><span class="n">c</span><span class="p">],</span> <span class="n">s</span> <span class="o">*</span> <span class="n">v</span> <span class="o">/</span> <span class="n">vnrm</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">cls</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;Quaternion:</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">__repr__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="c"># multiplication of two quaternions.</span>
        <span class="n">prod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[:,</span> <span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">([(</span><span class="n">prod</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">prod</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
                                 <span class="o">-</span> <span class="n">prod</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">prod</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span>
                                <span class="p">(</span><span class="n">prod</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">prod</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
                                 <span class="o">+</span> <span class="n">prod</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">prod</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]),</span>
                                <span class="p">(</span><span class="n">prod</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">prod</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
                                 <span class="o">+</span> <span class="n">prod</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">prod</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]),</span>
                                <span class="p">(</span><span class="n">prod</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">prod</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
                                 <span class="o">-</span> <span class="n">prod</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">prod</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">])])</span>

    <span class="k">def</span> <span class="nf">as_v_theta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the v, theta equivalent of the (normalized) quaternion&quot;&quot;&quot;</span>
        <span class="c"># compute theta</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">arccos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">norm</span><span class="p">)</span>

        <span class="c"># compute the unit vector</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">order</span><span class="o">=</span><span class="s">&#39;F&#39;</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">/=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">v</span> <span class="o">**</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">v</span><span class="p">,</span> <span class="n">theta</span>

    <span class="k">def</span> <span class="nf">as_rotation_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the rotation matrix of the (normalized) quaternion&quot;&quot;&quot;</span>
        <span class="n">v</span><span class="p">,</span> <span class="n">theta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">as_v_theta</span><span class="p">()</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="n">c</span><span class="p">,</span>
                          <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="n">c</span><span class="p">)</span> <span class="o">-</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">s</span><span class="p">,</span>
                          <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">s</span><span class="p">],</span>
                         <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">s</span><span class="p">,</span>
                          <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="n">c</span><span class="p">,</span>
                          <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="n">c</span><span class="p">)</span> <span class="o">-</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">s</span><span class="p">],</span>
                         <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="n">c</span><span class="p">)</span> <span class="o">-</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">s</span><span class="p">,</span>
                          <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">s</span><span class="p">,</span>
                          <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="n">c</span><span class="p">]])</span>
</pre></div>

</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>The mathematics of quaternions (and the use of unit quaternions to represent rotations) is fascinating in itself, but the details beyond this simple implementation are too much for this short post.  I&#8217;d suggest
<a href="http://courses.cms.caltech.edu/cs171/quatut.pdf">this paper</a> for a more complete introduction.</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h2 class="ipynb">
  Simple 3D object: A Cube
</h2>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let&#8217;s use these quaternions to draw a cube in matplotlib.</p>
<p>A cube is made of six faces, each rotated from the other in multiples of ninety degrees.
With this in mind, we&#8217;ll define a fiducial face, and six rotators which will put the
face in place.</p>
<p>One we have these, we can concatenate a viewing angle to all six, project the results,
and display them as polygons on an axes.  An important piece here is to get the <code>zorder</code>
attribute correct, so that faces in the back do not cover faces in the front.  We&#8217;ll use
the z-coordinate from the projection to do this correctly.</p>
<p>For later use, we&#8217;ll do this all within a class derived from <code>plt.Axes</code>, and make it
so that the set of polygons can be updated if needed:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [2]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="c"># don&#39;t use %pylab inline, because we want to interact with plots below.</span>
<span class="o">%</span><span class="k">pylab</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">
Welcome to pylab, a matplotlib-based Python environment [backend: TkAgg].
For more information, type &apos;help(pylab)&apos;.
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [3]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">class</span> <span class="nc">CubeAxes</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An Axes for displaying a 3D cube&quot;&quot;&quot;</span>
    <span class="c"># fiducial face is perpendicular to z at z=+1</span>
    <span class="n">one_face</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>

    <span class="c"># construct six rotators for the face</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">rots</span> <span class="o">=</span> <span class="p">[</span><span class="n">Quaternion</span><span class="o">.</span><span class="n">from_v_theta</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">theta</span><span class="p">)</span> <span class="k">for</span> <span class="n">theta</span> <span class="ow">in</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)]</span>
    <span class="n">rots</span> <span class="o">+=</span> <span class="p">[</span><span class="n">Quaternion</span><span class="o">.</span><span class="n">from_v_theta</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">theta</span><span class="p">)</span> <span class="k">for</span> <span class="n">theta</span> <span class="ow">in</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)]</span>
    <span class="n">rots</span> <span class="o">+=</span> <span class="p">[</span><span class="n">Quaternion</span><span class="o">.</span><span class="n">from_v_theta</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">theta</span><span class="p">)</span> <span class="k">for</span> <span class="n">theta</span> <span class="ow">in</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
    
    <span class="c"># colors of the faces</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;blue&#39;</span><span class="p">,</span> <span class="s">&#39;green&#39;</span><span class="p">,</span> <span class="s">&#39;white&#39;</span><span class="p">,</span> <span class="s">&#39;yellow&#39;</span><span class="p">,</span> <span class="s">&#39;orange&#39;</span><span class="p">,</span> <span class="s">&#39;red&#39;</span><span class="p">]</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="p">,</span> <span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c"># We want to set a few of the arguments</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">),</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">),</span> <span class="n">frameon</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                           <span class="n">xticks</span><span class="o">=</span><span class="p">[],</span> <span class="n">yticks</span><span class="o">=</span><span class="p">[],</span> <span class="n">aspect</span><span class="o">=</span><span class="s">&#39;equal&#39;</span><span class="p">))</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CubeAxes</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">rect</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">NullFormatter</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">NullFormatter</span><span class="p">())</span>
        
        <span class="c"># define the current rotation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_rot</span> <span class="o">=</span> <span class="n">Quaternion</span><span class="o">.</span><span class="n">from_v_theta</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">6</span><span class="p">)</span>
        
    
    <span class="k">def</span> <span class="nf">draw_cube</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;draw a cube rotated by theta around the given vector&quot;&quot;&quot;</span>
        <span class="c"># rotate the six faces</span>
        <span class="n">Rs</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_rot</span> <span class="o">*</span> <span class="n">rot</span><span class="p">)</span><span class="o">.</span><span class="n">as_rotation_matrix</span><span class="p">()</span> <span class="k">for</span> <span class="n">rot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rots</span><span class="p">]</span>
        <span class="n">faces</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">one_face</span><span class="p">,</span> <span class="n">R</span><span class="o">.</span><span class="n">T</span><span class="p">)</span> <span class="k">for</span> <span class="n">R</span> <span class="ow">in</span> <span class="n">Rs</span><span class="p">]</span>
        
        <span class="c"># project the faces: we&#39;ll use the z coordinate</span>
        <span class="c"># for the z-order</span>
        <span class="n">faces_proj</span> <span class="o">=</span> <span class="p">[</span><span class="n">face</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">faces</span><span class="p">]</span>
        <span class="n">zorder</span> <span class="o">=</span> <span class="p">[</span><span class="n">face</span><span class="p">[:</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">faces</span><span class="p">]</span>
        
        <span class="c"># create the polygons if needed.</span>
        <span class="c"># if they&#39;re already drawn, then update them</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&#39;_polys&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_polys</span> <span class="o">=</span> <span class="p">[</span><span class="n">plt</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span><span class="n">faces_proj</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">fc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                                       <span class="n">alpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="n">zorder</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                           <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_polys</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_polys</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_xy</span><span class="p">(</span><span class="n">faces_proj</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_polys</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="n">zorder</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>With this in place, we can draw the cube as follows:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [4]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">CubeAxes</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">draw_cube</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_display_data">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbAAAAGwCAYAAADITjAqAAAABHNCSVQICAgIfAhkiAAAAAlwSFlz
AAAPYQAAD2EBqD+naQAAIABJREFUeJzt3UuLLOmd3/FfRGbdb5lZdep0a2ZaMAO2wB4jsAevvDV4
Y2/spZHwUsaMG4Z+DWYkJAYM3pgBeUArL+xX0HjrjbY9A7bVre4+p7Iq75l1yYx8Hi8iom6nqk5V
ZWZk/uP5fuCoqk/f4qifjm8/EZH/iL788ksvAACMiZd9AAAAvAYBAwCYRMAAACYRMACASQQMAGAS
AQMAmETAAAAmETAAgEkEDABgEgEDAJhEwAAAJhEwAIBJBAwAYBIBAwCYRMAAACYRMACASQQMAGAS
AQMAmETAAAAmETAAgEkEDABgEgEDAJhEwAAAJhEwAIBJBAwAYBIBAwCYRMAAACYRMACASQQMAGAS
AQMAmETAAAAmETAAgEkEDABgEgEDAJhEwAAAJhEwAIBJBAwAYBIBAwCYRMAAACYRMACASQQMAGAS
AQMAmETAAAAmETAAgEkEDABgEgEDAJhEwAAAJhEwAIBJBAwAYBIBAwCYRMAAACYRMACASQQMAGAS
AQMAmETAAAAmETAAgEkEDABgEgEDAJhEwAAAJhEwAIBJBAwAYBIBAwCYRMAAACYRMACASQQMAGAS
AQMAmETAAAAmETAAgEkEDABgEgEDAJhEwAAAJhEwAIBJBAwAYBIBAwCYRMAAACYRMACASQQMAGAS
AQMAmETAAAAmETAAgEkEDABgEgEDAJhEwAAAJhEwAIBJBAwAYBIBAwCYRMAAACYRMACASQQMAGAS
AQMAmETAAAAmETAAgEkEDABgEgEDAJhEwAAAJhEwAIBJBAwAYBIBAwCYRMAAACYRMACASQQMAGAS
AQMAmFRd9gEAWC3D4VDff/+9Tk9P1Wq11G631e121ev11Ov19P79e33xxRf68Y9/vOxDReCiL7/8
0i/7IADM33A41MnJiZrN5nWI2u22+v2++v2+BoOBzs/PdX55rqvxpSbJWEkylffZKSFKf/jsa7wh
aUNyV9L61br+6pd/pR/96EdL/BUidAQMWHHD4VDNZlOnp6c6Ozu73hF1Oh31+30Nh0Odn5/r4nKk
y/GlxpOJkiR5OESSog0p2pKiTUnb6ddoS4q3pHgz+7olVW5/3ZTiONLFWOo2vaL/EWljuKFf/eJX
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
0ps3b7TOrDoAz8B/smIl5I+BA8BzcRcaAGASAQMAmETAAAAmETAAgEkEDABgEgEDAJhEwAAAJhEw
AIBJBAwAYBIBAwCYRMAAACYRMACASQQMAGASAQMAmETAAAAmETAAgEkEDABgEgEDAJhEwAAAJhEw
AIBJBAwAYBIBAwCYRMAAACYRMACASQQMAGASAQMAmETAAAAmETAAgEkEDABgEgEDAJhEwAAAJhEw
AIBJBAwAYBIBAwCYRMAAACYRMACASQQMAGASAQMAmETAAAAmETAAgEkEDABgEgEDAJhEwAAAJhEw
AIBJBAwAYBIBAwCYRMAAACYRMACASQQMAGASAQMAmETAAAAmETAAgEkEDABgEgEDAJhEwAAAJhEw
AIBJBAwAYBIBAwCYRMAAACYRMACASQQMAGASAQMAmETAAAAmETAAgEkEDABgEgEDAJhEwAAAJhEw
AIBJBAwAYBIBAwCYRMAAACYRMACASQQMAGASAQMAmETAAAAmETAAgEkEDABgEgEDAJhEwAAAJhEw
AIBJBAwAYBIBAwCYRMAAACYRMACASQQMAGASAQMAmETAAAAmETAAgEkEDABgEgEDAJhEwAAAJhEw
AIBJBAwAYBIBAwCYRMAAACYRMACASQQMAGASAQMAmETAAAAmETAAgEkEDABgEgEDAJj0/wGDSbX4
JMXzjwAAAABJRU5ErkJggg==
"></img>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h2 class="ipynb">
  Events and Callbacks
</h2>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now comes the fun part.  We can add events and callbacks to the axes
which will allow us to manipulate the projection by clicking and
dragging on the figure.</p>
<p>We need to add callbacks to the axes: we&#8217;ll do this in the construction
of the class using the <code>mpl_connect</code> method of the canvas. There are
several types of callback events that can be hooked:  they can be found
by typing <code>plt.connect?</code> and seeing the doc-string:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [5]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">plt</span><span class="o">.</span><span class="n">connect</span><span class="err">?</span>
</pre></div>

</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>The available options are:</p>
<ul>
<li><code>'button_press_event'</code></li>
<li><code>'button_release_event'</code></li>
<li><code>'draw_event'</code></li>
<li><code>'key_press_event'</code></li>
<li><code>'key_release_event'</code></li>
<li><code>'motion_notify_event'</code></li>
<li><code>'pick_event'</code></li>
<li><code>'resize_event'</code></li>
<li><code>'scroll_event'</code></li>
<li><code>'figure_enter_event'</code></li>
<li><code>'figure_leave_event'</code></li>
<li><code>'axes_enter_event'</code></li>
<li><code>'axes_leave_event'</code></li>
<li><code>'close_event'</code></li>
</ul>
<p>Each of these can be connected to a function that performs some operation
when those events happen.  Below, we&#8217;ll use the button events, the motion
event, and the key press event to create an interactive 3D plot.
To be as concise as possible, we&#8217;ll derive from the class we created above:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [6]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="k">class</span> <span class="nc">CubeAxesInteractive</span><span class="p">(</span><span class="n">CubeAxes</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An Axes for displaying an Interactive 3D cube&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CubeAxesInteractive</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        
        <span class="c"># define axes for Up/Down motion and Left/Right motion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_v_LR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_v_UD</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c"># connect some GUI events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;button_press_event&#39;</span><span class="p">,</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">_mouse_press</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;button_release_event&#39;</span><span class="p">,</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">_mouse_release</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;motion_notify_event&#39;</span><span class="p">,</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">_mouse_motion</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;key_press_event&#39;</span><span class="p">,</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">_key_press</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;key_release_event&#39;</span><span class="p">,</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">_key_release</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="p">(</span><span class="s">&quot;Click and Drag to Move</span><span class="se">\n</span><span class="s">&quot;</span>
                                    <span class="s">&quot;Hold shift key to adjust rotation&quot;</span><span class="p">))</span>

    <span class="c">#----------------------------------------------------------</span>
    <span class="c"># when the shift button is down, change the rotation axis</span>
    <span class="c"># of left-right movement</span>
    <span class="k">def</span> <span class="nf">_key_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Handler for key press events&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="s">&#39;shift&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_v_LR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_key_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Handler for key release event&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="s">&#39;shift&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_v_LR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c">#----------------------------------------------------------</span>
    <span class="c"># while the mouse button is pressed, set state to &quot;active&quot;</span>
    <span class="c"># so that motion event will rotate the plot</span>
    <span class="k">def</span> <span class="nf">_mouse_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Handler for mouse button press&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span> <span class="o">=</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_mouse_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Handler for mouse button release&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">_mouse_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Handler for mouse motion&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active</span><span class="p">:</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xy</span> <span class="o">=</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
            
            <span class="n">rot1</span> <span class="o">=</span> <span class="n">Quaternion</span><span class="o">.</span><span class="n">from_v_theta</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_v_UD</span><span class="p">,</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="n">dy</span><span class="p">)</span>
            <span class="n">rot2</span> <span class="o">=</span> <span class="n">Quaternion</span><span class="o">.</span><span class="n">from_v_theta</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_v_LR</span><span class="p">,</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="n">dx</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">current_rot</span> <span class="o">=</span> <span class="p">(</span><span class="n">rot2</span> <span class="o">*</span> <span class="n">rot1</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_rot</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_cube</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>To see the interactive cube, run the following code (interactivity will not work
within the web browser)  You should be able to use the mouse to change the orientation
of the cube, and hold the shift key to change the type of rotation used.</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [7]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">CubeAxesInteractive</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">draw_cube</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_display_data">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbAAAAGwCAYAAADITjAqAAAABHNCSVQICAgIfAhkiAAAAAlwSFlz
AAAPYQAAD2EBqD+naQAAIABJREFUeJzt3Xl8VOW9P/DPmSWZrDOZLCwaQBSKiAhoUKxy27gARb3e
VizVuhJvvYgK9jYU9+KKUqQtUpf0RwBBa60FN1alV21FXNBWLahYFoGQZNZMklnP+f0xC5nMJJks
szxzPu/XCxJOJjNnZh7OZ57nPOf7SDt27FBAREQkGE26d4CIiKgvGGBERCQkBhgREQmJAUZEREJi
gBERkZAYYEREJCQGGBERCYkBRkREQmKAERGRkBhgREQkJAYYEREJiQFGRERCYoAREZGQGGBERCQk
BhgREQmJAUZEREJigBERkZAYYEREJCQGGBERCYkBRkREQmKAERGRkBhgREQkJAYYEREJiQFGRERC
YoAREZGQGGBERCQkBhgREQmJAUZEREJigBERkZAYYEREJCQGGBERCYkBRkREQmKAERGRkBhgREQk
JAYYEREJiQFGRERCYoAREZGQGGBERCQkBhgREQmJAUZEREJigBERkZAYYEREJCQGGBERCYkBRkRE
QmKAERGRkBhgREQkJAYYEREJiQFGRERCYoAREZGQGGBERCQkBhgREQmJAUZEREJigBERkZAYYERE
JCQGGBERCYkBRkREQmKAERGRkBhgREQkJAYYEREJiQFGRERCYoAREZGQGGBERCQkBhgREQmJAUZE
REJigBERkZAYYEREJCQGGBERCYkBRkREQmKAERGRkBhgREQkJAYYEREJiQFGRERCYoAREZGQGGBE
RCQkBhgREQmJAUZEREJigBERkZAYYEREJCQGGBERCYkBRkREQmKAERGRkBhgREQkJAYYEREJiQFG
RERCYoAREZGQGGBERCQkBhgREQmJAUZEREJigBERkZAYYEREJCQGGBERCYkBRkREQmKAERGRkBhg
REQkJAYYEREJiQFGRERCYoAREZGQGGBERCQkBhgREQmJAUZEREJigBERkZAYYEREJCRduneAiDKL
y+XCkSNH0NTUBIvFAqvVCrvdDofDAYfDgYaGBtTW1mLChAnp3lVSOWnHjh1KuneCiAaey+XCsWPH
0NjYGAkiq9UKp9MJp9OJlpYWtLW1oc3dBo/XDZ/fC78/AEUJHRKk4B8l9FWTCyAXkD1AjicHv1n2
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
W7YMAODxeNDY2Ihdu3Zh6dKlePHFF7FkyZKMe53WrVuH73//+wMeYJIkIT8/H//85z9x5MgRDB06
NOrnb7zxBvLz89He3p7w60tEmSetAfb555/jiSeeQFVVFR566CFotdrIzyZNmoQf//jH+OCDDyLb
FEWJOeCceuqpKdvfdFAUJaHbSZIU81pcfPHFmDFjBhYtWoT7778fTz75ZLf34fV6kZOT0+d97S1J
khJ+fr01btw4fPPNN9i0aRPmzJkT2X748GH885//xA9+8AO8/vrrSXlsIkqNtAbYunXroNVq8fOf
/zwqvMK0Wi3OOeecbu8j3hBiU1MT1qxZg/fffx92ux1GoxGnnXYabr/99shwZGetra24//77sW/f
Pjz88MMYM2ZM3Nt5vV7U1dVh9+7dOHr0aGS48yc/+UlMT6K6uhqXX345xowZg3Xr1qGxsREnnHAC
ampqYp7Xzp07UVdXh4MHD6KsrAyXX355t887UWeeeSZmzpyJjRs34h//+AfGjx8PIDjMNnLkSEyf
Ph1r167FwYMHMWvWLNTU1GDDhg3YsWMHDh06hPb2dgwdOhQXXXQRZs2aFfM+Pffcc3jttddgs9lw
0kknoaamBs8991zMUG9n1dXVAIAtW7Zgy5YtAIAJEyZEepH//ve/UVdXh3/+85/weDwYNmwYrrji
CkybNi2h563RaDBt2jRs3boVN954Y+SDz6ZNm1BRUYEzzzwzboD97W9/w/r16/HNN99Ao9Fg7Nix
uOGGGzB27NjIz++55x4sXboUkyZNivrdV155BcuXL0ddXR1GjhwJANi7dy/WrFmDzz77DG63G8OH
D8dVV12F733vewk9DyLqWtoCLBAIYPfu3Rg9evSADm01NTXhf/7nfyDLMq6++mqMHDkSDocDH374
IVwuV9wAa2pqwi9/+UsEAgGsXLkSgwcP7vL+fT4fnE4nZs2ahYqKCvj9fnz00Ue47777UFtbi4sv
vjjq9jt37sTevXsxZ84cGAwGvPDCC7jnnnuwZs0aDBkyBADw8ccf46677sLpp5+O++67D4FAAC+8
8AKsVuuADHGde+65MQEmSRK++uorHDhwANdeey0GDx4Mg8EAADhy5Ai+//3v44QTToBer8e+ffvw
3HPP4eDBg6itrY3cb11dHdavX49LL70U559/PhobG7F06VIEAgFUVlZ2u08rVqzAz3/+c0ycOBHX
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
IAsAAAAASUVORK5CYII=
"></img>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that the image above is a static view:  To experience
the interactivity, <a href="http://jakevdp.github.com/downloads/notebooks/3DCube.ipynb">download the notebook</a>
and run it on your own machine.</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h2 class="ipynb">
  Conclusion
</h2>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>If you&#8217;re anything like me, your mind is probably spinning with all the
possibilities of these tools.  My eventual goal is to make a fully
functional Rubik&#8217;s cube simulator using these sorts of techniques.  It
will take some thinking, but I think it can be done, and it would be a
very cool demonstration of Matplotlib&#8217;s capabilities!
I&#8217;ll be working on this with David Hogg over at the
<a href="https://github.com/jakevdp/MagicCube">Magic Cube github repository</a>:
much of the simple script
shown above was adapted from code I first wrote there.</p>
<p>The possibilities are endless, and I hope you have fun with these tools!</p>
<p>This post was written entirely in an IPython Notebook: the notebook file is available for
download <a href="http://jakevdp.github.com/downloads/notebooks/3DCube.ipynb">here</a>.
For more information on blogging with notebooks in octopress, see my
<a href="http://jakevdp.github.com/blog/2012/10/04/blogging-with-ipython/">previous post</a>
on the subject.</p>
</div>

</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Sparse Graphs in Python: Playing with Word Ladders]]></title>
    <link href="http://jakevdp.github.com/blog/2012/10/14/scipy-sparse-graph-module-word-ladders/"/>
    <updated>2012-10-14T21:23:00-07:00</updated>
    <id>http://jakevdp.github.com/blog/2012/10/14/scipy-sparse-graph-module-word-ladders</id>
    <content type="html"><![CDATA[<div class="ipynb">

<div class="text_cell_render border-box-sizing rendered_html">
<p>The recent <a href="http://sourceforge.net/projects/scipy">0.11 release</a> of scipy includes several new features,
one of which is the <a href="http://docs.scipy.org/doc/scipy/reference/sparse.csgraph.html">sparse graph submodule</a>
which I contributed, with help from other developers.  I&#8217;m pretty excited about this: there are some
classic algorithms implemented, and it will open up whole new realms of computational possibilities in Python.</p>
<p>Before we start, I should say: this post is based on a <a href="http://pyvideo.org/video/1346/lightning-talks-wednesday">lightning talk</a> I gave
at Scipy 2012, and some of the material below comes from a <a href="http://docs.scipy.org/doc/scipy/reference/tutorial/csgraph.html">tutorial</a>
I wrote for the scipy documentation.</p>
<p>First: what exactly is a sparse graph?  Well, a graph is just a collection of nodes, which have links between them.
<a href="http://networkx.lanl.gov/">NetworkX</a> has some good examples and diagrams.  Graphs can represent nearly anything:
social network connections, where each node is a person and is connected to acquaintences;
images, where each node is a pixel and is connected to neighboring pixels; points in a high-dimensional
distribution, where each node is connected to its nearest neighbors; and practically anything else you can
imagine.</p>
<p>One very efficient way to represent graph data is in a sparse matrix: let&#8217;s call it <code>G</code>.  The matrix <code>G</code> is of size <code>N x N</code>,
and <code>G[i, j]</code> gives the value of the connection between node <code>i</code> and node <code>j</code>.  A sparse graph contains
mostly zeros: that is, most nodes have only a few connections.  This property turns out to be true in most cases of
interest.</p>
<p>The creation of the sparse graph submodule was motivated by several algorithms used in scikit-learn, including:</p>
<ul>
<li>Isomap: a manifold learning algorithm which requires finding the shortest paths in a graph</li>
<li>Hierarchical clustering: a clustering algorithm based on a minimum spanning tree</li>
<li>Spectral Decomposition: a projection algorithm based on sparse graph laplacians</li>
</ul>
<p>And many more.</p>
</div>

<!-- more -->

<div class="text_cell_render border-box-sizing rendered_html">
<p>Let&#8217;s take a look at the package, and some of the algorithms available.
Remember, this requires at least Scipy version 0.11, which was
released in September 2012.</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [1]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="c"># First the preliminaries: enter pylab inline mode, do some imports</span>
<span class="o">%</span><span class="k">pylab</span> <span class="n">inline</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy.sparse</span> <span class="kn">import</span> <span class="n">csgraph</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">
Welcome to pylab, a matplotlib-based Python environment [backend: module://IPython.zmq.pylab.backend_inline].
For more information, type &apos;help(pylab)&apos;.
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let&#8217;s first list all the routines available in the module:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [2]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">csgraph</span><span class="o">.</span><span class="n">__all__</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [2]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">[&apos;cs_graph_components&apos;,
 &apos;connected_components&apos;,
 &apos;laplacian&apos;,
 &apos;shortest_path&apos;,
 &apos;floyd_warshall&apos;,
 &apos;dijkstra&apos;,
 &apos;bellman_ford&apos;,
 &apos;johnson&apos;,
 &apos;breadth_first_order&apos;,
 &apos;depth_first_order&apos;,
 &apos;breadth_first_tree&apos;,
 &apos;depth_first_tree&apos;,
 &apos;minimum_spanning_tree&apos;,
 &apos;construct_dist_matrix&apos;,
 &apos;reconstruct_path&apos;,
 &apos;csgraph_from_dense&apos;,
 &apos;csgraph_masked_from_dense&apos;,
 &apos;csgraph_to_dense&apos;,
 &apos;csgraph_to_masked&apos;,
 &apos;NegativeCycleError&apos;]</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Lots of good stuff there!  In order to show the utility of these routines, I&#8217;d like to introduce
an example of a problem that can be quite interesting: word ladders.</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h2 class="ipynb">
  Example: Word Ladders
</h2>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="http://en.wikipedia.org/wiki/Word_ladder">Word ladders</a> are a game invented by Lewis Carroll, in which words are linked
by changing a single letter at each step.  For example:</p>
<pre class="ipynb"><code>APE -&gt; APT -&gt; AIT -&gt; BIT -&gt; BIG -&gt; BAG -&gt; MAG -&gt; MAN
</code></pre>
<p>Here we have gone from &#8220;APE&#8221; to &#8220;MAN&#8221; in seven steps, changing one
letter each time.  The question is, can
we find a shorter path between these words using the same rules?
As we&#8217;ll see below, this problem is naturally expressed as a
sparse graph problem.  The nodes will correspond to individual words,
and we&#8217;ll create connections
between words that differ by at most one letter.</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h3 class="ipynb">
  Obtaining a List of Words
</h3>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>First, of course, we must obtain a list of valid words.  I&#8217;m running Ubuntu Linux, and
Linux has a word dictionary at the location below.  If you&#8217;re on a different architecture,
you may have to search a bit to find your system dictionary.  But it&#8217;s there somewhere&#8230;</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [3]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">wordlist</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;/usr/share/dict/words&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="nb">len</span><span class="p">(</span><span class="n">wordlist</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [3]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">99171</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Our dictionary contains nearly 100,000 words.  We need to reduce these to just
the three-letter words, and also remove invalid words like acronyms, proper
nouns, and contractions.  We&#8217;ll do that the following way:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [4]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">wordlist</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">w</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span> <span class="n">wordlist</span><span class="p">)</span> <span class="c"># keep 3-letter words</span>
<span class="n">wordlist</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">isalpha</span><span class="p">,</span> <span class="n">wordlist</span><span class="p">)</span> <span class="c"># no punctuation</span>
<span class="n">wordlist</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">islower</span><span class="p">,</span> <span class="n">wordlist</span><span class="p">)</span> <span class="c"># no proper nouns or acronyms</span>

<span class="n">wordlist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">wordlist</span><span class="p">)</span>
<span class="n">wordlist</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [4]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">(585,)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>We&#8217;re left with 585 three-letter words.</p>
<p>Next we need to figure out how to efficiently find all pairs of
words which differ by a single letter.  We&#8217;ll do that with some
hard-core numpy type-wrangling, by converting the 3-letter words
into a [585 x 3] matrix of numbers:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [5]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">word_bytes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">((</span><span class="n">wordlist</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">wordlist</span><span class="o">.</span><span class="n">itemsize</span><span class="p">),</span>
                        <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;int8&#39;</span><span class="p">,</span>
                        <span class="nb">buffer</span><span class="o">=</span><span class="n">wordlist</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
<span class="n">word_bytes</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [5]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">(585, 3)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Here we&#8217;ve converted the raw bytes of the characters to 8-bit integers.  This sort of strategy
can be dangerous if you&#8217;re not careful with your types, but in this instance it works fine.</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h3 class="ipynb">
  Word Ladders as a Graph
</h3>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>With our preliminary processing out of the way, we can get to the interesting
part.  We now have 585 points in three dimensions, and want to link all points
that differ in a single dimension.  One nice way to do this is to use the
hamming distance in scipy: it does precisely this:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [6]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="kn">from</span> <span class="nn">scipy.spatial.distance</span> <span class="kn">import</span> <span class="n">pdist</span><span class="p">,</span> <span class="n">squareform</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">sparse</span>

<span class="n">hamming_dist</span> <span class="o">=</span> <span class="n">pdist</span><span class="p">(</span><span class="n">word_bytes</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s">&#39;hamming&#39;</span><span class="p">)</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">csr_matrix</span><span class="p">(</span><span class="n">squareform</span><span class="p">(</span><span class="n">hamming_dist</span> <span class="o">&lt;</span> <span class="mf">1.01</span> <span class="o">/</span> <span class="n">wordlist</span><span class="o">.</span><span class="n">itemsize</span><span class="p">))</span>

<span class="n">graph</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [6]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">(585, 585)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>We&#8217;re left with a 585 x 585 graph of our word data.  To get a feeling for what 
this looks like, let&#8217;s visualize it with matplotlib</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [7]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">matshow</span><span class="p">(</span><span class="n">graph</span><span class="o">.</span><span class="n">toarray</span><span class="p">(),</span> <span class="n">cmap</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">binary</span><span class="p">)</span>

<span class="c"># Label axes with the words</span>
<span class="k">def</span> <span class="nf">formatfunc</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">1</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">&#39;&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">wordlist</span><span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">graph</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))]</span>

<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="n">formatfunc</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="n">formatfunc</span><span class="p">))</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_display_data">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeIAAAHaCAYAAADcwEpjAAAABHNCSVQICAgIfAhkiAAAAAlwSFlz
AAALEgAACxIB0t1+/AAAIABJREFUeJztnXusXlWZ/5/zaztBaaHF28SkMhOiYKXtObahNkB6GExn
TESUmZJIwAoJTb0kJkqYMkZpwyUQMTMQqIlmIAjFCIIzYkQbJUcRbdRjRdKKRu0BL/EyttRSKpd0
//4o72F3d1/W2ntdvs9a309yQjnve/Z+1rOetb7rvsaKoiiEEEIIIVH4f7ENIIQQQnKGQkwIIYRE
hEJMCCGERIRCTAghhESEQkwIIYREhEJMCCGERIRCTLJhZmZGli5dGtsMkgCXX365PPHEEyIicv31
10e2hmhnjPuISS7MzMzIeeedJ48//nhsU0hCLFiwQA4cOBDbDKIY9oiV8eSTT8oXvvCF2GZE5Zpr
rpHTTjtNzj77bLnooovk05/+tPzkJz+Rt73tbbJ8+XK54IIL5OmnnxYRkenpaVm+fLmMj4/L1q1b
I1uOwfz580VE5Pe//72sW7dOREQee+wxeeihh2KaBcnMzIycdtppcvHFF8uSJUtk3bp1cujQIZmc
nJTp6WnZtGmTHDp0SCYmJuSSSy6JbW409u/fL5/5zGdim6EWCrEy9uzZI/fcc09sM6Lxwx/+UB54
4AH56U9/Kg899JD86Ec/EhGR9evXy6c+9Sl57LHHZOnSpbJlyxYREbn00kvltttuk5/85CcxzYZi
bGxMRERe//rXy3333SciIjt37pSvfe1rMc2C5Re/+IV86EMfkt27d8sJJ5wgW7dulbGxMRkbG5Mb
brhBXvGKV8jOnTvlrrvuim1qNPbt28eG7gC8CPF73vMeWblypZx++unyuc99TkREvv71r8uKFStk
fHxc3v72t4uIyMGDB+Wyyy6TVatWyVvf+lb5yle+4sMcFXz+85+f7bm9733vk0svvVTuv//+2c8X
LFggIiKbNm2SRx55RCYmJuTmm2+OZW40Hn30UXn3u98tf/d3fyfz58+X8847Tw4ePChPP/20nH32
2SJyRJS/853vyP79+2X//v1y1llniYhk3WOpYzRn/sILL8gnP/lJ+eIXvygTExOz4kyOsHjxYlm9
erWIiFx88cXy3e9+N7JFeGzatEl+9atfycTEhFx55ZVy0003yRlnnCHLly+XzZs3z37v7rvvllWr
VsnExIRs3LhRDh8+HM9oIOb6eOjtt98uixYtkkOHDskZZ5wh559/vmzYsEEeeeQROfnkk2eHDa+7
7jo599xz5fbbb5enn35aVq1aJW9/+9vlla98pQ+zYNm1a5dcd9118v3vf19OOukk2bdvn3z0ox+t
/e6NN94oN910kzz44IOBrcRgbGxMupY1NH3O5RD1zJs3T6655hqZnp6WW265JbY5cIxGEESOxFD5
/8kRbrzxRtm1a5fs3LlTtm/fLvfff7/84Ac/kMOHD8v5558vjzzyiLz61a+We++9V773ve/JnDlz
5IMf/KBs27aNDWTx1CO++eabZXx8XFavXi2/+c1v5LOf/aysWbNGTj75ZBERWbhwoYiIbN++XW64
4QaZmJiQc845R5577jn5zW9+48MkaB5++GG58MIL5aSTThIRkUWLFjV+N3cxOfPMM+XBBx+U5557
Tp555hn56le/Kscff7wsWrRotqdy1113yeTkpJx44omycOFCefTRR0VEZNu2bTFNh6Yoiuxjq4mn
nnpKduzYISIi99xzz+wIy4h58+bJiy++GMM0GMqxs337dtm+fbtMTEzIihUr5Oc//7n88pe/lG99
61syPT0tK1eulImJCXn44Ydlz549Ea3GwXmPeGpqSr71rW/Jjh075LjjjpNzzjlHxsfHZ5f6V3ng
gQfkjW98o2szVFHXy5s7d+7ssM3hw4fl+eefj2EaHCtXrpR3vetdsmzZMnnd614nS5culYULF8qd
d94pGzdulGeffVZOOeUUueOOO0RE5I477pDLLrtMxsbGZO3atezNEGtOPfVUue222+Syyy6Tt7zl
LfKBD3zgqBGpDRs2yLJly2TFihVZzxOXueqqq2TDhg1H/e7WW2+V9evXc7tXHYVj/vd//7c477zz
iqIoip/97GfFcccdV9x3333F4sWLiz179hRFURR/+ctfiqIoiv/4j/8oPvzhD8/+7Y9//GPX5qhg
165dxZve9KZZv/zlL38prr322uLf//3fi6Ioii9/+cvF2NhYURRF8aMf/ahYs2ZNLFMheOaZZ4qi
KIqDBw8WK1euLHbu3BnZIl3Mnz+/KIqi2LNnT3H66acXRVEU999/f7F+/fqIVmFS9hFp5v/+7/+K
k08+uSiKovjGN75RrFq1arac/va3vy3+9Kc/Fbt37y7e+MY3Fn/605+KojhSzz355JOxTIbC+dD0
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
hJCI/H9cLhFxH6/cDAAAAABJRU5ErkJggg==
"></img>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>There&#8217;s some interesting structure in this graph!  The blocks along the diagonal
indicate groups of words which are closely related: for instance, &#8220;cog&#8221;, &#8220;con&#8221;, &#8220;coo&#8221;, &#8220;cot&#8221;, &#8220;cow&#8221;, 
etc. are all near each other in alphabetical order, and share many links: this creates a dark
blob on the diagonal.  We can zoom in to see this:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [8]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">84</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">93</span><span class="p">,</span> <span class="mi">84</span><span class="p">)</span>
<span class="n">fig</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [8]:</div>
<div class="output_subarea output_pyout">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAesAAAHcCAYAAAD2jIK0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlz
AAALEgAACxIB0t1+/AAAHL5JREFUeJzt3G9sXeddwPHfqaNuqAkoWeIXWVZUUxwWaK6xlirxNEfc
Wdq6uqs3JIuFqI5fDPpiA2kMJJQIolXljRl/Fm00EtjaHV5dud0flSKhSaFa0yqCIaHJaYA2bT2D
yNL40qUDuiXpjxfZAqFOcl3bvU+cz0d6pOrk9pzn3HPv+d5zru0qMzMAgGLd1O4JAABXJ9YAUDix
BoDCiTUAFE6sAaBwYg0AhWt7rPft2xePPfZYu6ex7NauXdvuKVzSaDSiVqtFT09PjIyMxOzsbNTr
9ajVajEwMBBzc3MREXHy5MnYuXNnbN++PQ4cOBDr1q1r88wpVauvqX379sX9998fO3bsiK1bt8YT
TzzR5pm/eV//+tfjxIkT7Z4GhWvlvfHqq69GV1dXnD9/PiIizp49G11dXXHhwoUrrzjbbN++ffno
o4+2exrLbu3ate2eQmZmzszMZHd3d87Pz2dmZrPZzMHBwWw0GpmZOT4+nkNDQ5mZeffdd+fU1FRm
Zj700EPF7ANlWcxramRkJO+6667MzHzuuedyy5Yt+YMf/KA9E1+ikZGRVXmuYvks5r0xOjqaX/va
1zIz8/Dhw/npT3/6qutesVh/8YtfzO3bt2etVsv77rsvX3rppfylX/ql3L59e77//e/P73znO5l5
Mdb3339/vuc978nu7u78q7/6q5Wa0pvS6n688MILuXPnzrzjjjty//79xYTuc5/7XB44cOCyZRs3
bszz589nZuYPf/jD3LhxY2ZmvuMd78gLFy5kZub3vve9Yvbhx1o9FiMjI/kbv/Eb2dfXl11dXcWd
YFvdjxdffHHB5e22mNfUvn37cmJi4tLj+vv78x//8R/fsrm2opXj8fTTT+eGDRvytttuy56enjx5
8mS7p52Zrc39/Pnzedttt2Vm5n/8x3/kTTfdlE899VRmZr7vfe/L559/vp27cEkr+/LKK6/k1q1b
85//+Z8zM/NXfuVX8s///M/bPPP/tZj3xtNPP5333ntvZmbu2rUrjx8/ftV1r0isV8sn78Xsxz33
3JNf+tKXMjPz85//fDGhO3ToUO7fv/+yZRs3bsxz585l5vUT68W+poaHhzMz89lnn83bb7+9PZNe
wGL240rL220xr6mFYv3tb3/7LZvrtSzmeOzbty8fe+yxts31/1vM3D/4wQ/m8ePH8/HHH88dO3bk
gw8+mK+99tqliLfbYvblG9/4Ru7atSsffvjhS+0oxWLeG5mZtVot//Zv/zbvvPPOa657RWK9Wj55
L/aq9MfLSwrd8ePHL3sTzM/P54c//OFLHywmJibyox/9aGZevA3+yCOPZObF2zKl7EPm4l9TX/7y
ly89bt26dW/dRK9hMftxpeXttpjX1MjISH7oQx/K119/PZ9//vmiPoxnLv51VdJdmsXM/cEHH8w/
+7M/y9/5nd/Jr3zlK3nXXXfl0aNHL32obbfF7Etm5sc//vF8xzvekf/2b//2ls7zWhbz3sjM/Oxn
P5ubN2/Ohx566JrrXrMSX7BXVRW5wJ8cX2jZQm66qe0/9xYRS9+PEmzbti32798fu3fvjo6Ojujt
7Y1Dhw7F6OhojI2NRWdnZ0xMTERExJ/8yZ/E3r174w/+4A/iAx/4QPzUT/1Um2f/vxZ7LG6++eZr
PqYdFrsfJc39xxbzmqqqKm699da488474+zZs3H48OHLjk27LfZ4VFW10lNq2WLm3t/fH1/4whfi
3//93+Mzn/lMjI2NxZNPPhn9/f1vxVSvaTH78vrrr8eJEyfilltuiWazGZs3b34rptiSxbw3IiL2
7NkTBw4ciI997GPXXvnyfJ643Gr55L2Y/fjwhz+cf/mXf5mZmV/4wheKuipt1X/9139d+u+HH364
mNuumYs7Fv//CqikY7HY19SVPpFfL0q7dfz/LeZ4fPKTn7zsLmC7LWbur732Wv70T/90vv/978/M
zPvvvz/f9a53FfOVxGL25Q//8A/z13/91/Opp57K97znPZduMV+Ppqen87777mvpsSv6A2a/8Au/
kLVaLUdHR3N2djbr9Xpu3749BwYGcm5uLjPf+ANmTzzxxEpN6U1pdT9efPHF3LVrV95xxx154MCB
om69tuqpp57KWq2W27dvz927dxfzQzQ/tpjX1P8NRGnHotX9uNLy60npsc5s/Xg8/fTTuW3btuzt
7S3mvdHq3DMv/jDZj79P/fKXv5zr169v17QX1Mq+/NM//VO++93vzu9///uZmfmpT30qf//3f7+9
E3+TPvGJT+TP/uzP5nPPPdfS46vM5b3Ptm/fvrjnnnvil3/5l5dztQBww1r2L4dL+k4HAFaDlq+s
G41GfPazn42qqqJWq8VnPvOZGB0djfn5+di0aVNMTEzEu971rhgdHY23v/3t8a1vfSvOnj0bf/RH
fxR333335RsVdABuMEu6kd3KvfLl/r3pFje7ZBFhGIZhGEWMpWjpNviRI0dieHg4NmzYEBER69ev
j2PHjsWePXsiImLv3r1x9OjRiLh41Tw8PBwREbfffnt0dXX5e7oAsAQtxXq1/N40AFyPWqpovV6P
6enpaDabERHRbDajr68vpqamIiJicnLy0i/XZ2ZMT09HZsbJkyfjhRdeiK1bt67Q9AFg9WvpL5it
pr9YBADXm2X/PeuWNnqF2+orsR0AKMFSuufLZAAonFgDQOHEGgAKJ9YAUDixBoDCiTUAFE6sAaBw
Yg0AhRNrACicWANA4cQaAAon1gBQOLEGgMKJNQAUTqwBoHBiDQCFE2sAKJxYA0Dh1rRrw1VVrfg2
MnPFt7HS3ornCYCyubIGgMKJNQAUTqwBoHBiDQCFE2sAKJxYA0DhxBoACifWAFA4sQaAwok1ABRO
rAGgcGINAIUTawAonFgDQOHEGgAKJ9YAUDixBoDCiTUAFE6sAaBwYg0AhRNrACjcisd67dq1K70J
AFjVVjzWVVWt9CYAYFVrOdaNRiNqtVr09PTEyMhIzM7ORr1ej1qtFgMDAzE3NxcRES+++GLs2rUr
tm/fHgcOHFixiQPADSNbMDMzk93d3Tk/P5+Zmc1mMwcHB7PRaGRm5vj4eA4NDWVm5j333JNf+tKX
MjPz85//fK5du/YN64uIt2SsBm/Vc2UYhmGs7FiK6kdBuKpDhw7F6dOn44EHHri0bNOmTXHq1Kno
6OiIc+fOxebNm+Pll1+OjRs3xne/+93o6OiIs2fPxjvf+c549dVXL1vfW3VrvIVdK56vEQBWh6U0
qaXb4FVVLbiR1RBDAChdS7Gu1+sxPT0dzWYzIiKazWb09fXF1NRURERMTk5Gf39/RES8973vvWw5
ALA0Ld0Gj7j4A2ZjY2PR0dERvb29cfDgwRgdHY0zZ85EZ2dnTExMxJYtW+Kll16KPXv2xPe///24
995740//9E/j7Nmzl2/UbfCWuQ0OsDospUktx3o5iXXrxBpgdVjx76wBgPYRawAonFgDQOHEGgAK
J9YAUDixBoDCiTUAFE6sAaBwYg0AhRNrACicWANA4cQaAAon1gBQOLEGgMKJNQAUTqwBoHBiDQCF
E2sAKJxYA0Dh1rR7Aiupqqp2T2HJMrPdU1gWq+FYALSLK2sAKJxYA0DhxBoACifWAFA4sQaAwok1
ABROrAGgcGINAIUTawAonFgDQOHEGgAKJ9YAUDixBoDCiTUAFE6sAaBwYg0AhRNrACicWANA4cQa
AAon1gBQOLEGgMK1HOtGoxG1Wi16enpiZGQkZmdno16vR61Wi4GBgZibm4uIiJMnT8bOnTtj+/bt
ceDAgVi3bt2KTR4AbgjZgpmZmezu7s75+fnMzGw2mzk4OJiNRiMzM8fHx3NoaCgzM+++++6cmprK
zMyHHnoo165d+4b1RYTR4lgt2v08GoZhtHssRfWjE+lVHTp0KE6fPh0PPPDApWWbNm2KU6dORUdH
R5w7dy42b94cL7/8cmzcuDFOnz4dN910U5w9ezbe+c53xquvvnrZ+qqqutYm+ZEWDs91wTEHbnRL
OZ+3dBu8qqoFN7JaQgIAJWsp1vV6Paanp6PZbEZERLPZjL6+vpiamoqIiMnJyejv74+IiJ07d8aj
jz4aEXHp3wGAN6+l2+ARF3/AbGxsLDo6OqK3tzcOHjwYo6OjcebMmejs7IyJiYnYsmVLPP/887F3
79547bXX4gMf+EBMTk7Gv/7rv16+UbdEW7Za7l445sCNbinn85Zj3ar//u//jp/4iZ+IiItX1o88
8kh89atfvXyjTtwtE2uA1WEp5/M1yziPiIj4h3/4h/jEJz4RmRnr16+P8fHx5d4EANxQlv3KuqWN
uspqmStrgNVhxX8aHABoH7EGgMKJNQAUTqwBoHBiDQCFE2sAKJxYA0DhxBoACifWAFA4sQaAwok1
ABROrAGgcGINAIUTawAonFgDQOHEGgAKJ9YAUDixBoDCiTUAFG5NuyfA1VVV1e4pLIvMbPcUlsVq
OR7A9cWVNQAUTqwBoHBiDQCFE2sAKJxYA0DhxBoACifWAFA4sQaAwok1ABROrAGgcGINAIUTawAo
nFgDQOHEGgAKJ9YAUDixBoDCiTUAFE6sAaBwYg0AhRNrACicWANA4cQaAArXcqwbjUbUarXo6emJ
kZGRmJ2djXq9HrVaLQYGBmJubi4iIvbt2xe/+Zu/Ge9973vjZ37mZ+Kxxx5bsckDwA0hWzAzM5Pd
3d05Pz+fmZnNZjMHBwez0WhkZub4+HgODQ1lZubIyEgODw9nZuazzz6bt99++xvWFxHGDTZWi3Y/
j4ZhXL9jKVq6sj5y5EgMDw/Hhg0bIiJi/fr1cezYsdizZ09EROzduzeOHj0aERFVVcXQ0FBERLz7
3e+O7373u61sAgC4gpZiXVVVXLyouNxCyyIibr755ms+BgBoTUuxrtfrMT09Hc1mMyIims1m9PX1
xdTUVERETE5ORn9//8rNEgBuYGtaedC2bdti//79sXv37ujo6Ije3t44dOhQjI6OxtjYWHR2dsbE
xMSlx1dVteB/AwCLV2Ub7lML+I1ntXwd4rULvFlLOQ/6PWsAKJxYA0DhxBoACifWAFA4sQaAwok1
ABROrAGgcGINAIUTawAonFgDQOHEGgAKJ9YAUDixBoDCiTUAFE6sAaBwYg0AhRNrACicWANA4cQa
AAq3pt0T4MZQVVW7p7AsMrPdU1iy1XIs4EbiyhoACifWAFA4sQaAwok1ABROrAGgcGINAIUTawAo
nFgDQOHEGgAKJ9YAUDixBoDCiTUAFE6sAaBwYg0AhRNrACicWANA4cQaAAon1gBQOLEGgMKJNQAU
TqwBoHBiDQCFaznWjUYjarVa9PT0xMjISMzOzka9Xo9arRYDAwMxNzcXEREvvfTSgssBgDcpWzAz
M5Pd3d05Pz+fmZnNZjMHBwez0WhkZub4+HgODQ1lZl5x+f8VEYZxXY7VoN3PoWHcqGMpqh+9ea/q
0KFDcfr06XjggQcuLdu0aVOcOnUqOjo64ty5c7F58+Z4+eWXr7j8/6qq6lqbhCK18HYpnvcftMdS
zh8t3QavqmrBjVxpw6vhhAYApWgp1vV6Paanp6PZbEZERLPZjL6+vpiamoqIiMnJyejv74+IuOJy
AODNaek2eMTFHzAbGxuLjo6O6O3tjYMHD8bo6GicOXMmOjs7Y2JiIrZs2RLf+c53Flx+2UbdhuM6
tRruGnn/QXss5fzRcqyXk5MF1yuxBt6sFf/OGgBoH7EGgMKJNQAUTqwBoHBiDQCFE2sAKJxYA0Dh
xBoACifWAFA4sQaAwok1ABROrAGgcGINAIUTawAonFgDQOHEGgAKJ9YAUDixBoDCiTUAFE6sAaBw
a9o9AbieVFXV7iksWWa2ewrLYjUcC2iVK2sAKJxYA0DhxBoACifWAFA4sQaAwok1ABROrAGgcGIN
AIUTawAonFgDQOHEGgAKJ9YAUDixBoDCiTUAFE6sAaBwYg0AhRNrACicWANA4cQaAAon1gBQOLEG
gMK1HOtGoxG1Wi16enpiZGQkZmdno16vR61Wi4GBgZibm4uIiH379sX9998fO3bsiK1bt8YTTzyx
YpMHgBtCtmBmZia7u7tzfn4+MzObzWYODg5mo9HIzMzx8fEcGhrKzMyRkZG86667MjPzueeeyy1b
tuQPfvCDy9YXEYZhtGmsFu1+Hg1jsWMpWrqyPnLkSAwPD8eGDRsiImL9+vVx7Nix2LNnT0RE7N27
N44ePRoREVVVxfDwcERE3H777dHV1RUnTpxoZTMAwAJainVVVXHxg+zlFlq24EZu8tU4ALxZLVW0
Xq/H9PR0NJvNiIhoNpvR19cXU1NTERExOTkZ/f39EXEx4NPT05GZcfLkyXjhhRdi69atKzR9AFj9
1rTyoG3btsX+/ftj9+7d0dHREb29vXHo0KEYHR2NsbGx6OzsjImJiYi4eBV+6623xp133hlnz56N
w4cPx80337yiOwEAq1mVrd7LbtHo6Gjcc8898dGPfvTKG62q5dwksAjL/JZvG+cRrjdLee/5MhkA
CrfsV9YtbdQnYmgbV9bQHq6sAWAVE2sAKJxYA0DhxBoACifWAFA4sQaAwok1ABROrAGgcGINAIUT
awAonFgDQOHEGgAKJ9YAUDixBoDCiTUAFE6sAaBwYg0AhRNrACicWANA4da0ewLAW6uqqnZPYVlk
ZrunsCxWy/FgZbmyBoDCiTUAFE6sAaBwYg0AhRNrACicWANA4cQaAAon1gBQOLEGgMKJNQAUTqwB
oHBiDQCFE2sAKJxYA0DhxBoACifWAFA4sQaAwok1ABROrAGgcGINAIVbsVh//etfjxMnTqzU6gHg
hrFisf7qV78azz777EqtHgBuGIuOdaPRiFqtFj09PTEyMhKzs7NRr9ejVqvFwMBAzM3NxTPPPBOP
P/54/PZv/3b84i/+YrzwwgsrMXcAuDHkIszMzGR3d3fOz89nZmaz2czBwcFsNBqZmTk+Pp5DQ0OZ
mblv37587LHHFlxPRBiGYSxprBbtfh6N6+M1u6gr6yNHjsTw8HBs2LAhIiLWr18fx44diz179kRE
xN69e+Po0aOXHn/xdQgALMWiYl1V1YIBvlKUq6p6c7MCAC5ZVKzr9XpMT09Hs9mMiIhmsxl9fX0x
NTUVERGTk5PR398fERHr1q2Ls2fPLvN0AeDGU+Ui71U3Go0YGxuLjo6O6O3tjYMHD8bo6GicOXMm
Ojs7Y2JiIrZs2RLPPPNMfPzjH4+3v/3tMT09HV1dXf+7UVfcwBKtlq/ZnA9vHEt5zS461svBixNY
KrHmerOU16y/YAYAhRNrACicWANA4cQaAAon1gBQOLEGgMKJNQAUTqwBoHBiDQCFE2sAKJxYA0Dh
xBoACifWAFA4sQaAwok1ABROrAGgcGINAIUTawAonFgDQOHEGgAKt6bdEwB4M6qqavcUlkVmtnsK
S7ZajkXJXFkDQOHEGgAKJ9YAUDixBoDCiTUAFE6sAaBwYg0AhRNrACicWANA4cQaAAon1gBQOLEG
gMKJNQAUTqwBoHBiDQCFE2sAKJxYA0DhxBoACifWAFA4sQaAwok1ABTumrFuNBpRq9Wip6cnRkZG
YnZ2Nur1etRqtRgYGIi5ubm4cOFCdHV1RUTEK6+8Eh0dHXH06NGIiOjv74+TJ0+u7F4AwGqWVzEz
M5Pd3d05Pz+fmZnNZjMHBwez0WhkZub4+HgODQ1lZuYHP/jBPH78eD7++OO5Y8eOfPDBB/O1117L
22677Q3rjQjDMAwjrnoKvm60+zm8XsZSXPXK+siRIzE8PBwbNmyIiIj169fHsWPHYs+ePRERsXfv
3ktX0O973/vim9/8Zjz11FPxu7/7u3H06NH41re+FTt27LjaJgCAa7hqrKuqiosfmi630LL+/v74
5je/GX/3d38XH/rQh+KVV16JJ598Mvr7+5dvtgBwA7pqrOv1ekxPT0ez2YyIiGazGX19fTE1NRUR
EZOTk5divGPHjnjmmWeio6Mj3va2t0WtVovDhw+LNQAs0Zqr/eO2bdti//79sXv37ujo6Ije3t44
dOhQjI6OxtjYWHR2dsbExERERLztbW+LW2+9NXbu3BkRF6+0H3nkkbjjjjtWfi8AYBWrcqF72iu9
0ap6qzcJUKQ2nIKXnXN6a5ZyrP2eNQAUTqwBoHBiDQCFE2sAKJxYA0DhxBoACifWAFA4sQaAwok1
ABROrAGgcGINAIUTawAonFgDQOHEGgAKJ9YAUDixBoDCiTUAFE6sAaBwYg0AhRNrACjcmnZPAOBG
VlVVu6ewZJnZ7iksi5KPhStrACicWANA4cQaAAon1gBQOLEGgMKJNQAUTqwBoHBiDQCFE2sAKJxY
A0DhxBoACifWAFA4sQaAwok1ABROrAGgcGINAIUTawAonFgDQOHEGgAKJ9YAUDixBoDCiTUAFK7l
WDcajajVatHT0xMjIyMxOzsb9Xo9arVaDAwMxNzcXHzve9+Ln/u5n4t/+Zd/iYiIj33sY/EXf/EX
KzZ5ALghZAtmZmayu7s75+fnMzOz2Wzm4OBgNhqNzMwcHx/PoaGhzMz8xje+kbt27cqHH34477rr
rgXXFxGGYRjGKhmrRcnPU/WjCV7VoUOH4vTp0/HAAw9cWrZp06Y4depUdHR0xLlz52Lz5s3x8ssv
R0TEr/3ar8VXvvKV+Pa3vx2bN29+w/qqqrrWJgG4TrSQkevCSrdpKc9TS7fBq6pacCMLLXv99dfj
xIkTccstt0Sz2XzTEwMALmop1vV6Paanpy/Ft9lsRl9fX0xNTUVExOTkZPT390dExB//8R/Hz//8
z8fk5GSMjo7G+fPnV2jqAHBjaOk2eMTFHzAbGxuLjo6O6O3tjYMHD8bo6GicOXMmOjs7Y2JiIv7z
P/8zPvKRj8Tf//3fxy233BK/9Vu/FevWrYuDBw9evlG3wQFWDbfBW7OU56nlWC8nsQZYPcS6NSv+
nTUA0D5iDQCFE2sAKJxYA0DhxBoACifWAFA4sQaAwok1ABROrAGgcGINAIUTawAonFgDQOHEGgAK
J9YAUDixBoDCiTUAFE6sAaBwYg0AhRNrACicWANA4da0ewIAXN+qqmr3FJZFZq7Yupf6HLmyBoDC
iTUAFE6sAaBwYg0AhRNrACicWANA4cQaAAon1gBQOLEGgMKJNQAUTqwBoHBiDQCFE2sAKJxYA0Dh
xBoACifWAFA4sQaAwok1ABROrAGgcGINAIVrOdaNRiNqtVr09PTEyMhIzM7ORr1ej1qtFgMDAzE3
NxevvvpqdHV1xfnz5yMi4uzZs9HV1RUXLlxYsR0AgFUvWzAzM5Pd3d05Pz+fmZnNZjMHBwez0Whk
Zub4+HgODQ1lZubo6Gh+7Wtfy8zMw4cP56c//ek3rC8iDMMwDKOosZKWuv6W/u/Pfe5zeeDAgcuW
bdy4Mc+fP5+ZmT/84Q9z48aNmZn59NNP57333puZmbt27crjx48vOGnDMAzDKGmspKWuf020oKqq
uLityy20rK+vL1566aV48skn48KFC7Ft27ZWNgEAbVVVVbuncEUtxbper8dHPvKR+NSnPhUbNmyI
ZrMZfX19MTU1FXv37o3Jycno7++/9Pj77rsvfvVXfzV+7/d+b8H1LRR5AGBhVbZYzkajEWNjY9HR
0RG9vb1x8ODBGB0djTNnzkRnZ2dMTEzEli1bIiLi1KlT0dXVFadOnYqf/MmfXNEdAIDVruVYL8aj
jz4ajz/+eHzxi19c7lUDwA2npdvgi/HJT34y/uZv/ib++q//erlXDQA3pBW5sgYAlo+/YAYAhRNr
ACicWANA4cQaAAon1gBQOLEGgML9DzQ1Ed06r/0rAAAAAElFTkSuQmCC
"></img>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>We also see linear patterns off the diagonal.  These are the result of words which differ by their first
letter: For example &#8220;ton&#8221; is linked to &#8220;con&#8221;, &#8220;too&#8221; is linked to &#8220;coo&#8221;, &#8220;top&#8221; is linked to &#8220;cop&#8221;, etc.
Let&#8217;s zoom in and take a look at these as well:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [9]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">510</span><span class="p">,</span> <span class="mi">519</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">94</span><span class="p">,</span> <span class="mi">85</span><span class="p">)</span>
<span class="n">fig</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [9]:</div>
<div class="output_subarea output_pyout">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAesAAAHeCAYAAAC7RCO/AAAABHNCSVQICAgIfAhkiAAAAAlwSFlz
AAALEgAACxIB0t1+/AAAH6pJREFUeJzt3Hts1fX9x/HXl9OoizJHpTXpELfivKBySg2oZbTHkzrj
LEphNBFKy3HOuMkgYjQajNYwkrlmCdrNzV0oK2MWoVZhGscQjlIpEw2XrG2c3GrdLG09RdC4WeHz
+8OfnR0tfMvp4bw5fT6Sk5Xj4ft9f9ZzeJ7PtxfPOecEAADMGpHsAQAAwIkRawAAjCPWAAAYR6wB
ADCOWAMAYByxPokPP/xQv/rVr5I9BmAKrwvgeIl8XRDrk+ju7tZTTz2V7DEAU3hdAMdL5OsiYbFO
lXfeDz74oPbu3auJEyfqgQce0P3336+rr75aEyZM0LPPPitJOnbsmH70ox/piiuu0He+8x3dcsst
qqurS/LkqfM5+EIqrCcV1iD5e11Eo1Hl5+erqKhIl19+uX74wx/K2q91SJXPh591tLa26plnnjlN
Ew1Oqnwe/LwuysvL9cILL/T+nTlz5mjdunUnP7hLkP3797urrroqUYc/bQ4cONC7jrVr17obb7zR
HTt2zB08eNCNHTvWvf/++27NmjXuu9/9rnPOufb2djdq1ChXV1eXzLGdc6nzOfhCKqwnFdbgnL/X
xebNm90555zj9u/f744ePepuvPFGt3bt2iRP3tdgPx89PT0JnObU+VnH5s2bXVFR0WmaaHCG0+vi
1VdfddOnT3fOOXfo0CH3zW9+0x09evSkx07YztrPOwxJqqys1OTJkxUMBlVRUZGocU6Z+9JOoKGh
QbNnz5bnecrMzFRBQYG2b9+u119/XSUlJZKkCy+8UDfccEOyxu3D7+6noKBA06dP17hx4/Tggw9q
5cqVmjx5siZMmKB9+/YleRX/5Xc9oVBIs2bN0hVXXKHS0tIkT92XnzU45wZ8vVjh53XheZ4mT56s
b3zjGxoxYoRuv/12NTQ0JHHq4/l9Tk2dOlW33XabrrzyyiRP3D8/63jwwQe1ZcsWTZw4UU888USS
J+7Lz/z33HOP1q9fL0kqLi7W97//fUnS8uXL9fDDDydt9i/z87rIz8/XO++8o66uLj3zzDP63ve+
pxEjTp7ihMX68ccf17hx47Rjxw5de+212rVrl3bv3q2NGzfq/vvvV3t7uzZs2KA9e/bojTfe0I4d
O/TWW29py5YtiRopbp7nDXgZb6D7k8nP50CSdu/eraefflotLS1auXKl9u7dqzfeeEN33nmnqqqq
kryK//K7np07d+qJJ55Qc3Oz9u3bp9dffz3Jk/+XnzU899xzA67Nov5eF57n9flf6fPXyJf/bIHf
59SOHTv05JNP6u23307yxP3zs47HH39cU6dO1Y4dO7Rw4cJkj9yHn/nz8/N7+/DPf/5TLS0tkqQt
W7aooKAgmeP3639fF19+/peVlWnlypVasWKF7rjjDl/HS1is/bzD2LBhgzZs2KCJEyfqmmuu0dtv
v609e/YkaqRTMnLkSB05ckSS9O1vf1urV6/WsWPH1NnZqddee03XXnutpkyZorq6OjnndPDgQUWj
0eQO/f/87n4mTZqkCy+8UGeddZYuueQS3XTTTZKkq666SgcOHEjS9McbzG4uKytLnucpJyfnjFvD
66+/3u/9lpzsdTF58mQ55/TGG2/owIEDOnbsmJ599llNnTo1yZP3NZjn1MUXX5zESU/Mzzos8zP/
1KlTtWXLFrW0tOjKK6/UhRdeqPb2dm3btk15eXlJnP6/TvS62LJliyZPnixJmjdvnpYtWybP83T5
5Zf7OnZawqb+khPtSB966CHdddddp2OMU3LBBRdoypQpuvrqq3XzzTdrwoQJCgaD8jxPlZWVyszM
1MyZM/XKK69o/Pjxuuiii5Sbm6vzzz8/2aP3caLdz9lnn91734gRI3r/PGLECH322Wenb8hB8Lue
QCBwRq3hCwOtzQo/r4vm5mZNmjRJ8+fP1549exQOhzV9+vRkjz6gEz2nzj333GSMdEpOtI4zwUA7
0qysLB06dEgvv/yy8vPzFYvFtHr1ap133nlmPj9+XheSlJmZqfHjx6u4uNj/weP+ivoAurq63MUX
X+ycc66urs7ddNNN7ujRo66jo8NdfPHF7uDBg27Dhg3u2muvdR999JFzzrn33nvPdXR0JGqkhPpi
DV1dXW7cuHHu4MGDSZ7I3+fgf7/pJBQKubfeess5Z+8bUk5lPfPnz3crVqxI0sTH87OG5557rt/7
zzTWnj/9OZXnlEV+1vHmm2+6goKCpM45ED/zO+fcvHnz3NixY93evXvd3/72NzdmzBi3aNGiJE5+
aj7++GM3btw4d/jwYd9/J2E7az/vMG688Ua1tLTo+uuvl/T5JYQ//vGPysjISNRYCVNUVKRDhw7p
008/1SOPPNL7DiqZ/HwOWlpaBnzX7XmeqXfkp7qeM20NxcXFamxs7Pcd+ZnE2vOnP/G+Rqzws470
9HQFAgHl5OQoEomY+rq13x3p1KlT9de//lXZ2dm66KKL1N3dbe5LKyezceNG3XnnnVq0aJFGjhzp
++95ziX2O6POO+88ffTRR4k8BQAAKS3hv8HM+jtSAACs8x3rmpoaBYNB5eTkqLy8XK2trQqHwwoG
gyosLFRbW5skaf/+/br++us1YcIEMz/7BgDAGc3PF7b//ve/u0svvdR98MEHzjnnYrGYKyoqcjU1
Nc4555YvX977G1mmTZvmVq5c6Zxz7pe//KU777zzjjueJG7cuHHjxm1Y3eLh628/+eST7uGHH+5z
3+jRo91nn33mnHPu008/daNHj3bOOXfBBRf03v/hhx8OGOtU8OijjyZ7hLilwhqcS411pMIanGMd
lqTCGpxLjXXE2z1fl8EH+nnQ/u4DAABDy1esw+Gw1qxZo1gsJkmKxWLKy8tTbW2tJGnVqlXKz8+X
JE2ZMqXP/QAAID6+fs56/PjxWrx4sQoKChQIBJSbm6uqqipFIpHen4Grrq6WJD3xxBOaPXu2Hn/8
cd12220p/d3goVAo2SPELRXWIKXGOlJhDRLrsCQV1iClzjrikfCfs+73pCf4NYsAAKSaeLuX8J+z
BgAA8SHWAAAYR6wBADCOWAMAYByxBgDAOGINAIBxxBoAAOOINQAAxhFrAACMI9YAABhHrAEAMI5Y
AwBgHLEGAMA4Yg0AgHHEGgAA44g1AADGEWsAAIwj1gAAGEesAQAwLi3ZAySS53nJHiFuzrlkjwAA
SDJ21gAAGEesAQAwjlgDAGAcsQYAwDhiDQCAccQaAADjiDUAAMYRawAAjCPWAAAYR6wBADCOWAMA
YByxBgDAOGINAIBxxBoAAOOINQAAxhFrAACMI9YAABhHrAEAMI5YAwBgHLEGAMA4Yg0AgHG+Y11T
U6NgMKicnByVl5ertbVV4XBYwWBQhYWFamtrkyTt3btX1113nSZMmKCHH35YI0eOTNjwAAAMB75i
3dTUpKVLl2rz5s3auXOnli1bpvnz5ysSiWjXrl2aM2eOFixYIElauHCh7r33Xu3evVsXXXRRQocH
AGA48Jxz7mQPqqqqUkdHh5YsWdJ7X0ZGhtrb2xUIBNTT06OsrCx1dnZq9OjR6ujo0IgRI3T48GF9
/etf15EjR/qe1PPk47Rx8zwv4edItNPx/xMAILHi7V5aPCeJ58QVFRW9H4dCIYVCoVM+FgAAlkSj
UUWj0SE7nq+ddXNzs4qLi9XY2Kj09HTFYjFFIhHNmjVLpaWlWrFihdavX6+6ujoVFRWprKxMJSUl
+s1vfqP77ruPnXUc2FkDwJkv3u75irX0+TeYVVZWKhAIKDc3VxUVFYpEIurq6lJmZqaqq6s1ZswY
7dmzR6Wlpfr3v/+tm266SatWrdJ77703pEP7RawBABactlj79cknn+grX/mKJKm2tlarV69WfX19
35MSa9+INQCc+U7L16wH46233tL8+fPlnNOoUaO0fPnyoT4FAADDypDvrH2dlJ21b+ysAeDMF2/3
+A1mAAAYR6wBADCOWAMAYByxBgDAOGINAIBxxBoAAOOINQAAxhFrAACMI9YAABhHrAEAMI5YAwBg
HLEGAMA4Yg0AgHHEGgAA44g1AADGEWsAAIwj1gAAGEesAQAwjlgDAGBcWrIHSCTnXLJHwP/zPC/Z
IwwJnlMAkoGdNQAAxhFrAACMI9YAABhHrAEAMI5YAwBgHLEGAMA4Yg0AgHHEGgAA44g1AADGEWsA
AIwj1gAAGEesAQAwjlgDAGAcsQYAwDhiDQCAccQaAADjiDUAAMYRawAAjCPWAAAYR6wBADCOWAMA
YJzvWNfU1CgYDConJ0fl5eVqbW1VOBxWMBhUYWGh2traJEnz5s3TwoULNWXKFI0bN051dXUJGx4A
gOHAc865kz2oqalJM2bMUGNjo9LT09Xd3a2ysjKVlJRo7ty5qq6u1rp161RfX6958+bpk08+0erV
q9XS0qJbb71V77zzTt+Tep58nBYpxPO8ZI8wJHjeAjgV8XbP185606ZNKikpUXp6uiRp1KhR2rZt
m2bPni1JKi0tVUNDQ+9A06dPlyRdccUVOnjw4CkPBwAApDQ/DxroHcFA7xLOOuuskz6moqKi9+NQ
KKRQKORnFAAAzItGo4pGo0N2PF+XwZubm1VcXNx7GTwWiykSiWjWrFkqLS3VihUrtH79etXV1SkS
iaioqEgzZ86UJI0cOVJHjhzpe1Iugw87XAYHMJzF2z1fO+vx48dr8eLFKigoUCAQUG5urqqqqhSJ
RFRZWanMzExVV1f3Gaq/jwEAwOD52lkP+UnZWQ87qfKmjectgFNxWr7BDAAAJA+xBgDAOGINAIBx
xBoAAOOINQAAxhFrAACMI9YAABhHrAEAMI5YAwBgHLEGAMA4Yg0AgHHEGgAA44g1AADGEWsAAIwj
1gAAGEesAQAwjlgDAGAcsQYAwDhiDQCAccQaAADjiDUAAMalJXsADA/OuWSPMCQ8z0v2CHFLlc8F
MJywswYAwDhiDQCAccQaAADjiDUAAMYRawAAjCPWAAAYR6wBADCOWAMAYByxBgDAOGINAIBxxBoA
AOOINQAAxhFrAACMI9YAABhHrAEAMI5YAwBgHLEGAMA4Yg0AgHHEGgAA44g1AADGEWsAAIzzHeua
mhoFg0Hl5OSovLxcra2tCofDCgaDKiwsVFtbmyTpwIED/d4PAABOjeeccyd7UFNTk2bMmKHGxkal
p6eru7tbZWVlKikp0dy5c1VdXa1169apvr5e06ZN6/f+Pif1PPk4LWCO53nJHiFuvPaA0y/e7vmK
dVVVlTo6OrRkyZLe+zIyMtTe3q5AIKCenh5lZWWps7NzwPv/d+hHH32098+hUEihUOiUFwGcLsQa
gB/RaFTRaLT3z4899lhcr700Pw8a6B3BQCf2M1BFRYWfUwMAcMb5303oY489FtfxfH3NOhwOa82a
NYrFYpKkWCymvLw81dbWSpJWrVql/Px8SRrwfgAAcGp8XQaXPv8Gs8rKSgUCAeXm5qqiokKRSERd
XV3KzMxUdXW1xowZo3fffbff+/uclK9Z4wzFZXAAp+K0fM16qBFrnKmINYBTEW/3+DlrAACMI9YA
ABhHrAEAMI5YAwBgHLEGAMA4Yg0AgHHEGgAA44g1AADGEWsAAIwj1gAAGEesAQAwjlgDAGAcsQYA
wDhiDQCAccQaAADjiDUAAMYRawAAjCPWAAAYR6wBADCOWAMAYFxasgcAziTOuWSPEDfP85I9wpBI
hc8F4Bc7awAAjCPWAAAYR6wBADCOWAMAYByxBgDAOGINAIBxxBoAAOOINQAAxhFrAACMI9YAABhH
rAEAMI5YAwBgHLEGAMA4Yg0AgHHEGgAA44g1AADGEWsAAIwj1gAAGEesAQAwjlgDAGAcsQYAwDjf
sa6pqVEwGFROTo7Ky8vV2tqqcDisYDCowsJCtbW1SZLmzZunu+++W5MmTdJll12mF198MWHDAwAw
HKT5eVBTU5OWLl2qxsZGpaenq7u7W2VlZYpEIpo7d66qq6u1YMEC1dfXS5Leffddbd++XXv27NEN
N9ygvXv36qyzzkroQgAASFW+dtabNm1SSUmJ0tPTJUmjRo3Stm3bNHv2bElSaWmpGhoaJEme56mk
pESSdMkllyg7O1stLS2JmB0AgGHB187a8zw55467v7/7+jNixPHvCSoqKno/DoVCCoVCvo4FAIB1
0WhU0Wh0yI7nOR/FbW5uVnFxce9l8FgspkgkolmzZqm0tFQrVqzQ+vXrVVdXp3nz5qmzs1N//vOf
tW/fPoVCoeMugw8UfwCJ53leskcYEvwbgjNJvN3ztbMeP368Fi9erIKCAgUCAeXm5qqqqkqRSESV
lZXKzMxUdXV170Bjx47V5MmTdfjwYT399NN8vRoAgDj42lkPRiQS0bRp0zRjxoyBT8rOGkgadtbA
6Rdv9/g5awAAjBvynbWvk7KzBpKGnTVw+rGzBgAgxRFrAACMI9YAABhHrAEAMI5YAwBgHLEGAMA4
Yg0AgHHEGgAA44g1AADGEWsAAIwj1gAAGEesAQAwjlgDAGAcsQYAwDhiDQCAccQaAADjiDUAAMYR
awAAjCPWAAAYl5bsAQCcXs65ZI+AL/E8L9kjxI3nVOKxswYAwDhiDQCAccQaAADjiDUAAMYRawAA
jCPWAAAYR6wBADCOWAMAYByxBgDAOGINAIBxxBoAAOOINQAAxhFrAACMI9YAABhHrAEAMI5YAwBg
HLEGAMA4Yg0AgHHEGgAA44g1AADGJSzWL7zwglpaWhJ1eAAAho2Exbq+vl7Nzc2JOjwAAMPGoGNd
U1OjYDConJwclZeXq7W1VeFwWMFgUIWFhWpra9PWrVu1fv163X///Zo4caL27duXiNkBABgW0gbz
4KamJi1dulSNjY1KT09Xd3e3ysrKFIlENHfuXFVXV2vBggWqr6/XrbfeqmnTpmnGjBn9HquioqL3
41AopFAoFM86AAAwIxqNKhqNDtnxPOec8/vgqqoqdXR0aMmSJb33ZWRkqL29XYFAQD09PcrKylJn
Z6cikYiKioo0c+bM40/qeRrEaQEgZXmel+wR4sa/5ycXb/cGdRl8oJMNNEAqPAkBAEi2QcU6HA5r
zZo1isVikqRYLKa8vDzV1tZKklatWqX8/HxJ0siRI3X48OEhHhcAgOFnUJfBpc+/wayyslKBQEC5
ubmqqKhQJBJRV1eXMjMzVV1drTFjxmjr1q36wQ9+oHPOOUdr1qxRdnb2f0/KZXAAkJQaVyD59/zk
4u3eoGM9FIg1AHyOWA8Pp/Vr1gAA4PQj1gAAGEesAQAwjlgDAGAcsQYAwDhiDQCAccQaAADjiDUA
AMYRawAAjCPWAAAYR6wBADCOWAMAYByxBgDAOGINAIBxxBoAAOOINQAAxhFrAACMI9YAABhHrAEA
MI5YAwBgXFqyBwCA4cw5l+wR4uZ5XrJHGBKWPxfsrAEAMI5YAwBgHLEGAMA4Yg0AgHHEGgAA44g1
AADGEWsAAIwj1gAAGEesAQAwjlgDAGAcsQYAwDhiDQCAccQaAADjiDUAAMYRawAAjCPWAAAYR6wB
ADCOWAMAYByxBgDAOGINAIBxxBoAAONOGuuamhoFg0Hl5OSovLxcra2tCofDCgaDKiwsVFtbm44e
Pars7GxJ0qFDhxQIBNTQ0CBJys/P1969exO7CgAAUtgJY93U1KSlS5dq8+bN2rlzp5YtW6b58+cr
Eolo165dmjNnjhYsWKBAIKDLLrtMzc3Namho0DXXXKPXXntN//nPf/Tee+9p3Lhxp2s9AACknLQT
/cdNmzappKRE6enpkqRRo0Zp27Ztev755yVJpaWleuCBByRJU6dO1Wuvvab9+/froYce0m9/+1sV
FBRo0qRJ/R67oqKi9+NQKKRQKDQEywEAIPmi0aii0eiQHc9zzrmB/uMvfvELtbe36yc/+UnvfRkZ
GXr//feVlpamnp4eZWVlqbOzUw0NDXrqqaf0/vvv6+WXX9YNN9ygW265RV/72td0zz339D2p5+kE
pwUAnEE8z0v2CEMikV2Kt3snvAweDoe1Zs0axWIxSVIsFlNeXp5qa2slSatWrVJ+fr4kadKkSdq6
dasCgYDOPvtsBYNBPf30073/HQAAnJoTXgYfP368Fi9erIKCAgUCAeXm5qqqqkqRSESVlZXKzMxU
dXW1JOnss8/W2LFjdd1110n6/BvLVq9erauvvjrxqwAAIIWd8DJ4wk7KZXAASBlcBj+5hF4GBwAA
yUesAQAwjlgDAGAcsQYAwDhiDQCAccQaAADjiDUAAMYRawAAjCPWAAAYR6wBADCOWAMAYByxBgDA
OGINAIBxxBoAAOOINQAAxhFrAACMI9YAABhHrAEAMI5YAwBgHLEGAMA4Yg0AgHFpyR4AAHBmc84l
e4SUx84aAADjiDUAAMYRawAAjCPWAAAYR6wBADCOWAMAYByxBgDAOGINAIBxxBoAAOOINQAAxhFr
AACMI9YAABhHrAEAMI5YAwBgHLEGAMA4Yg0AgHHEGgAA44g1AADGEWsAAIwj1gAAGOc71jU1NQoG
g8rJyVF5eblaW1sVDocVDAZVWFiotrY2ffjhh7r88sv1j3/8Q5J0++236/e//33ChgcAYDjwnHPu
ZA9qamrSjBkz1NjYqPT0dHV3d6usrEwlJSWaO3euqqurtW7dOtXX12vjxo165JFHtGDBAtXU1Oil
l146/qSeJx+nBQAgJcTbPV+xrqqqUkdHh5YsWdJ7X0ZGhtrb2xUIBNTT06OsrCx1dnZKku666y49
99xz2r17t7KysoZ8aAAAziTxdi8tnpP0d9+xY8fU0tKic889V7FYrN9YS1JFRUXvx6FQSKFQyN/E
AAAYF41GFY1Gh+x4vnbWzc3NKi4u7r0MHovFFIlENGvWLJWWlmrFihVav3696urq9POf/1zvvPOO
SktLde+996qxsVFpaX3fE7CzBgAMJ6flMrj0+TeYVVZWKhAIKDc3VxUVFYpEIurq6lJmZqaqq6v1
8ccfq7i4WNu3b9e5556r++67TyNHjuyzix6KoQEAOJOctlgPJWINABhO4u0eP2cNAIBxxBoAAOOI
NQAAxhFrAACMI9YAABhHrAEAMI5YAwBgHLEGAMA4Yg0AgHHEGgAA44g1AADGEWsAAIwj1gAAGEes
AQAwjlgDAGAcsQYAwDhiDQCAccQaAADjiDUAAMYRawAAjCPWAAAYl5bsAQAAsMDzvGSPMCB21gAA
GEesAQAwjlgDAGAcsQYAwDhiDQCAccQaAADjiDUAAMYRawAAjCPWAAAYR6wBADCOWAMAYByxBgDA
OGINAIBxxBoAAOOINQAAxhFrAACMI9YAABhHrAEAMI5YAwBgHLEGAMA437GuqalRMBhUTk6OysvL
1draqnA4rGAwqMLCQrW1tenIkSPKzs7WZ599Jkk6fPiwsrOzdfTo0YQtAACAVOcr1k1NTVq6dKk2
b96snTt3atmyZZo/f74ikYh27dqlOXPmaMGCBRo5cqRCoZBefPFFSVJtba1mzpypQCCQ0EUAAJDK
POecO9mDqqqq1NHRoSVLlvTel5GRofb2dgUCAfX09CgrK0udnZ3aunWrfvazn+n5559XXl6efve7
32n8+PF9T+p58nFaAABOG8/zEnr8eLqX5udBA8W1v/vy8vJ04MABRaNRHT169LhQf6GioqL341Ao
pFAo5G9iAACGGV+xDofDKi4u1qJFi5Senq5YLKa8vDzV1taqtLRUq1atUn5+fu/jy8rKNGfOHD3y
yCMDHvPLsQYAAAPzdRlc+vwbzCorKxUIBJSbm6uKigpFIhF1dXUpMzNT1dXVGjNmjCSpvb1d2dnZ
am9v11e/+tXjT8plcACAMZYvg/uO9WCsXbtW69ev1x/+8If+T0qsAQDGWI61r8vgg/HjH/9Yf/nL
X/TSSy8N9aEBABiWErKzPulJ2VkDAIyxvLPmN5gBAGAcsQYAwDhiDQCAccQaAADjiDUAAMYRawAA
jCPWAAAYR6wBADCOWAMAYByxBgDAOGINAIBxxBoAAOOINQAAxhFrAACMI9YAABhHrAEAMI5YAwBg
HLEGAMA4Yg0AgHHEGgAA49KSPQAAABY45xJ2bM/z4vr77KwBADCOWAMAYByxBgDAOGINAIBxxBoA
AOOINQAAxhFrAACMI9YAABhHrAEAMI5YAwBgHLEGAMA4Yg0AgHHEGgAA44g1AADGEWsAAIwj1gAA
GEesAQAwjlgDAGAcsQYAwLghjfXRo0eH8nDmRaPRZI8Qt1RYg5Qa60iFNUisw5JUWIOUOuuIx6Bj
XVNTo2AwqJycHJWVlSkSiejuu+/WddddpwceeECXXnqpurq6JEnHjh3Tt771LX3wwQdDPrgFqfAE
SoU1SKmxjlRYg8Q6LEmFNUips454pA3mwU1NTVq6dKkaGxuVnp6u7u5uLVq0SP/617/U2Ngoz/N0
/vnna9WqVVq4cKE2btyonJwcXXDBBYmaHwCAlDeonfWmTZtUUlKi9PR0SdKoUaMkSbNmzZLneZKk
O+64QzU1NZKk5cuXKxKJDOW8AAAMP24Qqqqq3OLFi/vcN2/ePLd27do+9918883ulVdecdnZ2e7Y
sWPHHUcSN27cuHHjNqxu8RjUZfBwOKzi4mItWrRI6enpisVi/T7uzjvvVGlpqcrLy3t33F/2ea8B
AIAfnhtkOWtqalRZWalAIKCJEyfK8zwVFRVpxowZvY/p6enR6NGjtX37dl166aVDPjQAAMPJoGPt
x5tvvqn77rtPr7766lAfGgCAYWdQl8H9+OlPf6pf//rX+tOf/jTUhwYAYFhKyM4aAAAMHX7dKAAA
xhFrAACMI9YAABhHrAEAMI5YAwBgHLEGAMC4/wOiG5mHlLYkkwAAAABJRU5ErkJggg==
"></img>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Using matplotlib&#8217;s
interactive plotting functionality and zooming around this graph can be a pretty interesting exercise,
and help you gain further intuition into the connections between the words.</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h3 class="ipynb">
  Finding the Shortest Path: Dijkstra&#8217;s Algorithm
</h3>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now let&#8217;s return to our problem: finding the shortest path from &#8220;APE&#8221; to &#8220;MAN&#8221;.
This is now a graph optimization problem, in which we hope to find the shortest
path from one node to another along the graph.  A well-known algorithm to
accomplish this task is Dyjkstra&#8217;s algorithm, which is based on <a href="http://jakevdp.github.com/blog/2012/09/12/dynamic-programming-in-python/">Dynamic Programming</a>
principles.  Dijkstra&#8217;s algorithm is built into the new <code>csgraph</code> package, and can be used as
follows.</p>
<p>First we need to find the indices of the two words in question:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [10]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">i1</span> <span class="o">=</span> <span class="n">wordlist</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span><span class="s">&#39;ape&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">i1</span><span class="p">,</span> <span class="n">wordlist</span><span class="p">[</span><span class="n">i1</span><span class="p">])</span>

<span class="n">i2</span> <span class="o">=</span> <span class="n">wordlist</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span><span class="s">&#39;man&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">i2</span><span class="p">,</span> <span class="n">wordlist</span><span class="p">[</span><span class="n">i2</span><span class="p">])</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">(22, &apos;ape&apos;)
(310, &apos;man&apos;)
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next we&#8217;ll call the <code>shortest_path</code> function, which calls Dijkstra&#8217;s algorithm under the hood:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [11]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">distances</span><span class="p">,</span> <span class="n">predecessors</span> <span class="o">=</span> <span class="n">csgraph</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">return_predecessors</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="s">&quot;distance from &#39;</span><span class="si">%s</span><span class="s">&#39; to &#39;</span><span class="si">%s</span><span class="s">&#39;: </span><span class="si">%i</span><span class="s"> steps&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wordlist</span><span class="p">[</span><span class="n">i1</span><span class="p">],</span> <span class="n">wordlist</span><span class="p">[</span><span class="n">i2</span><span class="p">],</span> <span class="n">distances</span><span class="p">[</span><span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">])</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [11]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">&quot;distance from &apos;ape&apos; to &apos;man&apos;: 5 steps&quot;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>We found a path of length 5 steps!  This is shorter than the seven steps above.
The steps taken are stored in the predecessor list:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [12]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">i</span> <span class="o">=</span> <span class="n">i1</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">i2</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">wordlist</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">predecessors</span><span class="p">[</span><span class="n">i2</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">wordlist</span><span class="p">[</span><span class="n">i2</span><span class="p">])</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">ape
apt
opt
oat
mat
man
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h3 class="ipynb">
  Finding the Longest Minimal Path
</h3>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Another question we can ask is this: out of all the shortest paths between any two
nodes, what is the longest?  That is, which connected words are maximally separated
in our linguistic space?  To find out, we can use the distances matrix returned by
the algorithm.</p>
<p>If any words have no path between them, the algorithm returns infinity.  We don&#8217;t care about
the infinities here, so we&#8217;ll mask them out and ask what the longest distance is:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [13]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_invalid</span><span class="p">(</span><span class="n">distances</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [13]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">13.0</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Evidently there exist words that cannot be linked in fewer than 13 steps!
Let&#8217;s see which ones they are:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [14]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">i1</span><span class="p">,</span> <span class="n">i2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">distances</span> <span class="o">==</span> <span class="mi">13</span><span class="p">)</span>
<span class="n">unique_paths</span> <span class="o">=</span> <span class="p">(</span><span class="n">i1</span> <span class="o">&lt;</span> <span class="n">i2</span><span class="p">)</span>
<span class="nb">zip</span><span class="p">(</span><span class="n">wordlist</span><span class="p">[</span><span class="n">i1</span><span class="p">][</span><span class="n">unique_paths</span><span class="p">],</span> <span class="n">wordlist</span><span class="p">[</span><span class="n">i2</span><span class="p">][</span><span class="n">unique_paths</span><span class="p">])</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [14]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">[(&apos;imp&apos;, &apos;ohm&apos;), (&apos;imp&apos;, &apos;ohs&apos;), (&apos;ohm&apos;, &apos;ump&apos;), (&apos;ohs&apos;, &apos;ump&apos;)]</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>We have four pairs of words, and examining them, we see that the paths go from
one pair, &#8220;imp&#8221; and &#8220;ump&#8221;, to another pair, &#8220;ohm&#8221; and &#8220;ohs&#8221;.  We&#8217;ll use the same
trick as above to list the links between two of these:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [15]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">i</span> <span class="o">=</span> <span class="n">i2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">i1</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">wordlist</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">predecessors</span><span class="p">[</span><span class="n">i1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">i</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">wordlist</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">ohm
oho
tho
too
moo
mod
mid
aid
add
ads
ass
asp
amp
imp
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h3 class="ipynb">
  Connected Components
</h3>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally, we can ask about connected components of the graph.  There are likely
&#8220;islands&#8221; in the word graph which can&#8217;t be reached from the majority of words,
and we&#8217;d like to see what these are.  To do this, we can use the <code>connected_components</code>
routine:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [16]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">n_components</span><span class="p">,</span> <span class="n">component_list</span> <span class="o">=</span> <span class="n">csgraph</span><span class="o">.</span><span class="n">connected_components</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="n">n_components</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [16]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">14</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>This shows us that we have 14 distinct components: 14 islands of words with no paths between them.
Let&#8217;s see how big these islands are:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [17]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">component_list</span> <span class="o">==</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">14</span><span class="p">)]</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [17]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">[571, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1]</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>We see that the bulk of three letter words are connected: the main set of 571 has
paths to all others in that set.  The interesting words are the ones all by
themselves:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [18]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">wordlist</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">component_list</span> <span class="o">==</span> <span class="n">i</span><span class="p">)])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">14</span><span class="p">)]</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [18]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">[[&apos;aha&apos;],
 [&apos;chi&apos;],
 [&apos;ebb&apos;],
 [&apos;ems&apos;, &apos;emu&apos;],
 [&apos;gnu&apos;],
 [&apos;ism&apos;],
 [&apos;nth&apos;],
 [&apos;ova&apos;],
 [&apos;qua&apos;],
 [&apos;ugh&apos;],
 [&apos;ups&apos;],
 [&apos;urn&apos;],
 [&apos;use&apos;]]</pre>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>These are all the three-letter &#8220;loner&#8221; words, which can&#8217;t reach any other valid
words through the changing of a single letter.</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h3 class="ipynb">
  More: Minimum Spanning Tree, Depth-first search, Breadth-first search&#8230;
</h3>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>There&#8217;s much more we could do from here.  We could use the Minimum Spanning Tree
algorithm to do hierarchical clustering of the words.  We could create a depth-first
or breadth-first tree.  We could repeat everything above on words of length 4 or
length 5&#8230;  if you feel inclined, check out <code>scipy.sparse.csgraph</code> in <strong>scipy v. 0.11</strong>!</p>
<p>This post was written entirely in an IPython Notebook: the notebook file is available for download here:
<a href="http://jakevdp.github.com/downloads/notebooks/sparse-graph.ipynb">sparse-graph.ipynb</a>.
For more information on blogging with notebooks in octopress, see my
<a href="http://jakevdp.github.com/blog/2012/10/04/blogging-with-ipython/">previous post</a> on the subject.</p>
<p>Oh, and one challenge for all the over-achievers out there: how many steps does it take
to get from &#8220;Guido&#8221; to &#8220;Python&#8221; using English language words?
First to give the answer wins&#8230; well, nothing, actually.
What can I say: I do this for free.</p>
<p>Happy coding!</p>
</div>

</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[XKCD-style plots in Matplotlib]]></title>
    <link href="http://jakevdp.github.com/blog/2012/10/07/xkcd-style-plots-in-matplotlib/"/>
    <updated>2012-10-07T13:30:00-07:00</updated>
    <id>http://jakevdp.github.com/blog/2012/10/07/xkcd-style-plots-in-matplotlib</id>
    <content type="html"><![CDATA[<div class="ipynb">

<div class="text_cell_render border-box-sizing rendered_html">
<p>One of the problems I&#8217;ve had with typical matplotlib figures is that everything in them is so precise, so perfect.  For an example of what I mean, take a look at this figure:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [1]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="n">Image</span><span class="p">(</span><span class="s">&#39;http://jakevdp.github.com/figures/xkcd_version.png&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [1]:</div>
<div class="output_subarea output_pyout">
<img src="data:image/png;base64,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
RU5ErkJggg==
"></img>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Sometimes when showing schematic plots, this is the type of figure I want to display.  But drawing it by hand is a pain: I&#8217;d rather just use matplotlib.  The problem is, matplotlib is a bit too precise.  Attempting to duplicate this figure in matplotlib leads to something like this:</p>
</div>

<!-- more -->

<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [2]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">Image</span><span class="p">(</span><span class="s">&#39;http://jakevdp.github.com/figures/mpl_version.png&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [2]:</div>
<div class="output_subarea output_pyout">
<img src="data:image/png;base64,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
SUVORK5CYII=
"></img>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>It just doesn&#8217;t have the same effect.  Matplotlib is great for scientific plots, but sometimes you don&#8217;t want to be so precise.</p>
<p>This subject has recently come up on the matplotlib mailing list, and started some interesting discussions.
As near as I can tell, this started with a thread on a
<a href="http://mathematica.stackexchange.com/questions/11350/xkcd-style-graphs">mathematica list</a>
which prompted a thread on the <a href="http://matplotlib.1069221.n5.nabble.com/XKCD-style-graphs-td39226.html">matplotlib list</a>
wondering if the same could be done in matplotlib.</p>
<p>Damon McDougall offered a quick
<a href="http://www.mail-archive.com/matplotlib-users@lists.sourceforge.net/msg25499.html">solution</a>
which was improved by Fernando Perez in <a href="http://nbviewer.ipython.org/3835181/">this notebook</a>, and
within a few days there was a <a href="https://github.com/matplotlib/matplotlib/pull/1329">matplotlib pull request</a> offering a very general
way to create sketch-style plots in matplotlib.  Only a few days from a cool idea to a
working implementation: this is one of the most incredible aspects of package development on github.</p>
<p>The pull request looks really nice, but will likely not be included in a released version of
matplotlib until at least version 1.3.  In the mean-time, I wanted a way to play around with
these types of plots in a way that is compatible with the current release of matplotlib.  To do that,
I created the following code:</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h2 class="ipynb">
  The Code: XKCDify
</h2>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>XKCDify will take a matplotlib <code>Axes</code> instance, and modify the plot elements in-place to make
them look hand-drawn.
First off, we&#8217;ll need to make sure we have the Humor Sans font.
It can be downloaded using the command below.</p>
<p>Next we&#8217;ll create a function <code>xkcd_line</code> to add jitter to lines.  We want this to be very general, so
we&#8217;ll normalize the size of the lines, and use a low-pass filter to add correlated noise, perpendicular
to the direction of the line.  There are a few parameters for this filter that can be tweaked to
customize the appearance of the jitter.</p>
<p>Finally, we&#8217;ll create a function which accepts a matplotlib axis, and calls <code>xkcd_line</code> on
all lines in the axis.  Additionally, we&#8217;ll switch the font of all text in the axes, and add
some background lines for a nice effect where lines cross.  We&#8217;ll also draw axes, and move the
axes labels and titles to the appropriate location.</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [3]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">XKCD plot generator</span>
<span class="sd">-------------------</span>
<span class="sd">Author: Jake Vanderplas</span>

<span class="sd">This is a script that will take any matplotlib line diagram, and convert it</span>
<span class="sd">to an XKCD-style plot.  It will work for plots with line &amp; text elements,</span>
<span class="sd">including axes labels and titles (but not axes tick labels).</span>

<span class="sd">The idea for this comes from work by Damon McDougall</span>
<span class="sd">  http://www.mail-archive.com/matplotlib-users@lists.sourceforge.net/msg25499.html</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pylab</span> <span class="kn">as</span> <span class="nn">pl</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">interpolate</span><span class="p">,</span> <span class="n">signal</span>
<span class="kn">import</span> <span class="nn">matplotlib.font_manager</span> <span class="kn">as</span> <span class="nn">fm</span>


<span class="c"># We need a special font for the code below.  It can be downloaded this way:</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">urllib2</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&#39;Humor-Sans.ttf&#39;</span><span class="p">):</span>
    <span class="n">fhandle</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="s">&#39;http://antiyawn.com/uploads/Humor-Sans.ttf&#39;</span><span class="p">)</span>
    <span class="nb">open</span><span class="p">(</span><span class="s">&#39;Humor-Sans.ttf&#39;</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fhandle</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    
<span class="k">def</span> <span class="nf">xkcd_line</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">xlim</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
              <span class="n">mag</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">f1</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">f2</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">f3</span><span class="o">=</span><span class="mi">15</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mimic a hand-drawn line from (x, y) data</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    x, y : array_like</span>
<span class="sd">        arrays to be modified</span>
<span class="sd">    xlim, ylim : data range</span>
<span class="sd">        the assumed plot range for the modification.  If not specified,</span>
<span class="sd">        they will be guessed from the  data</span>
<span class="sd">    mag : float</span>
<span class="sd">        magnitude of distortions</span>
<span class="sd">    f1, f2, f3 : int, float, int</span>
<span class="sd">        filtering parameters.  f1 gives the size of the window, f2 gives</span>
<span class="sd">        the high-frequency cutoff, f3 gives the size of the filter</span>
<span class="sd">    </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    x, y : ndarrays</span>
<span class="sd">        The modified lines</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    
    <span class="c"># get limits for rescaling</span>
    <span class="k">if</span> <span class="n">xlim</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">xlim</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">ylim</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">ylim</span> <span class="o">=</span> <span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">y</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">xlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">xlim</span> <span class="o">=</span> <span class="n">ylim</span>
        
    <span class="k">if</span> <span class="n">ylim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">ylim</span> <span class="o">=</span> <span class="n">xlim</span>

    <span class="c"># scale the data</span>
    <span class="n">x_scaled</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="mf">1.</span> <span class="o">/</span> <span class="p">(</span><span class="n">xlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">y_scaled</span> <span class="o">=</span> <span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="mf">1.</span> <span class="o">/</span> <span class="p">(</span><span class="n">ylim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="c"># compute the total distance along the path</span>
    <span class="n">dx</span> <span class="o">=</span> <span class="n">x_scaled</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">-</span> <span class="n">x_scaled</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="n">y_scaled</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">-</span> <span class="n">y_scaled</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">dist_tot</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">dx</span> <span class="o">*</span> <span class="n">dx</span> <span class="o">+</span> <span class="n">dy</span> <span class="o">*</span> <span class="n">dy</span><span class="p">))</span>

    <span class="c"># number of interpolated points is proportional to the distance</span>
    <span class="n">Nu</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">200</span> <span class="o">*</span> <span class="n">dist_tot</span><span class="p">)</span>
    <span class="n">u</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">Nu</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.</span> <span class="o">/</span> <span class="p">(</span><span class="n">Nu</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c"># interpolate curve at sampled points</span>
    <span class="n">k</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">interpolate</span><span class="o">.</span><span class="n">splprep</span><span class="p">([</span><span class="n">x_scaled</span><span class="p">,</span> <span class="n">y_scaled</span><span class="p">],</span> <span class="n">s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">)</span>
    <span class="n">x_int</span><span class="p">,</span> <span class="n">y_int</span> <span class="o">=</span> <span class="n">interpolate</span><span class="o">.</span><span class="n">splev</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> 

    <span class="c"># we&#39;ll perturb perpendicular to the drawn line</span>
    <span class="n">dx</span> <span class="o">=</span> <span class="n">x_int</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span> <span class="o">-</span> <span class="n">x_int</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="n">y_int</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span> <span class="o">-</span> <span class="n">y_int</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">dist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">dx</span> <span class="o">*</span> <span class="n">dx</span> <span class="o">+</span> <span class="n">dy</span> <span class="o">*</span> <span class="n">dy</span><span class="p">)</span>

    <span class="c"># create a filtered perturbation</span>
    <span class="n">coeffs</span> <span class="o">=</span> <span class="n">mag</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">x_int</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">firwin</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span> <span class="o">*</span> <span class="n">dist_tot</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;kaiser&#39;</span><span class="p">,</span> <span class="n">f3</span><span class="p">))</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">lfilter</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">coeffs</span><span class="p">)</span>

    <span class="n">x_int</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">response</span> <span class="o">*</span> <span class="n">dy</span> <span class="o">/</span> <span class="n">dist</span>
    <span class="n">y_int</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">response</span> <span class="o">*</span> <span class="n">dx</span> <span class="o">/</span> <span class="n">dist</span>

    <span class="c"># un-scale data</span>
    <span class="n">x_int</span> <span class="o">=</span> <span class="n">x_int</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">xlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">y_int</span> <span class="o">=</span> <span class="n">y_int</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">ylim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    
    <span class="k">return</span> <span class="n">x_int</span><span class="p">,</span> <span class="n">y_int</span>


<span class="k">def</span> <span class="nf">XKCDify</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">mag</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
            <span class="n">f1</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">f2</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">f3</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
            <span class="n">bgcolor</span><span class="o">=</span><span class="s">&#39;w&#39;</span><span class="p">,</span>
            <span class="n">xaxis_loc</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
            <span class="n">yaxis_loc</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
            <span class="n">xaxis_arrow</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">,</span>
            <span class="n">yaxis_arrow</span><span class="o">=</span><span class="s">&#39;+&#39;</span><span class="p">,</span>
            <span class="n">ax_extend</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
            <span class="n">expand_axes</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make axis look hand-drawn</span>

<span class="sd">    This adjusts all lines, text, legends, and axes in the figure to look</span>
<span class="sd">    like xkcd plots.  Other plot elements are not modified.</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ax : Axes instance</span>
<span class="sd">        the axes to be modified.</span>
<span class="sd">    mag : float</span>
<span class="sd">        the magnitude of the distortion</span>
<span class="sd">    f1, f2, f3 : int, float, int</span>
<span class="sd">        filtering parameters.  f1 gives the size of the window, f2 gives</span>
<span class="sd">        the high-frequency cutoff, f3 gives the size of the filter</span>
<span class="sd">    xaxis_loc, yaxis_log : float</span>
<span class="sd">        The locations to draw the x and y axes.  If not specified, they</span>
<span class="sd">        will be drawn from the bottom left of the plot</span>
<span class="sd">    xaxis_arrow, yaxis_arrow : str</span>
<span class="sd">        where to draw arrows on the x/y axes.  Options are &#39;+&#39;, &#39;-&#39;, &#39;+-&#39;, or &#39;&#39;</span>
<span class="sd">    ax_extend : float</span>
<span class="sd">        How far (fractionally) to extend the drawn axes beyond the original</span>
<span class="sd">        axes limits</span>
<span class="sd">    expand_axes : bool</span>
<span class="sd">        if True, then expand axes to fill the figure (useful if there is only</span>
<span class="sd">        a single axes in the figure)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># Get axes aspect</span>
    <span class="n">ext</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">()</span><span class="o">.</span><span class="n">extents</span>
    <span class="n">aspect</span> <span class="o">=</span> <span class="p">(</span><span class="n">ext</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">ext</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">ext</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">ext</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">xlim</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
    <span class="n">ylim</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>

    <span class="n">xspan</span> <span class="o">=</span> <span class="n">xlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">yspan</span> <span class="o">=</span> <span class="n">ylim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">xax_lim</span> <span class="o">=</span> <span class="p">(</span><span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">ax_extend</span> <span class="o">*</span> <span class="n">xspan</span><span class="p">,</span>
               <span class="n">xlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">ax_extend</span> <span class="o">*</span> <span class="n">xspan</span><span class="p">)</span>
    <span class="n">yax_lim</span> <span class="o">=</span> <span class="p">(</span><span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">ax_extend</span> <span class="o">*</span> <span class="n">yspan</span><span class="p">,</span>
               <span class="n">ylim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">ax_extend</span> <span class="o">*</span> <span class="n">yspan</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">xaxis_loc</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">xaxis_loc</span> <span class="o">=</span> <span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">yaxis_loc</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">yaxis_loc</span> <span class="o">=</span> <span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c"># Draw axes</span>
    <span class="n">xaxis</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Line2D</span><span class="p">([</span><span class="n">xax_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">xax_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="n">xaxis_loc</span><span class="p">,</span> <span class="n">xaxis_loc</span><span class="p">],</span>
                      <span class="n">linestyle</span><span class="o">=</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">)</span>
    <span class="n">yaxis</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Line2D</span><span class="p">([</span><span class="n">yaxis_loc</span><span class="p">,</span> <span class="n">yaxis_loc</span><span class="p">],</span> <span class="p">[</span><span class="n">yax_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">yax_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                      <span class="n">linestyle</span><span class="o">=</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">)</span>

    <span class="c"># Label axes3, 0.5, &#39;hello&#39;, fontsize=14)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">xax_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">xaxis_loc</span> <span class="o">-</span> <span class="mf">0.02</span> <span class="o">*</span> <span class="n">yspan</span><span class="p">,</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_xlabel</span><span class="p">(),</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s">&#39;right&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s">&#39;top&#39;</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">yaxis_loc</span> <span class="o">-</span> <span class="mf">0.02</span> <span class="o">*</span> <span class="n">xspan</span><span class="p">,</span> <span class="n">yax_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylabel</span><span class="p">(),</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s">&#39;right&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s">&#39;top&#39;</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">78</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>

    <span class="c"># Add title</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">xax_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">xax_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">yax_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">get_title</span><span class="p">(),</span>
            <span class="n">ha</span><span class="o">=</span><span class="s">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s">&#39;bottom&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>

    <span class="n">Nlines</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">ax</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Nlines</span><span class="p">)]</span>

    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>

        <span class="n">x_int</span><span class="p">,</span> <span class="n">y_int</span> <span class="o">=</span> <span class="n">xkcd_line</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">xlim</span><span class="p">,</span> <span class="n">ylim</span><span class="p">,</span>
                                 <span class="n">mag</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">f3</span><span class="p">)</span>

        <span class="c"># create foreground and background line</span>
        <span class="n">lw</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_linewidth</span><span class="p">()</span>
        <span class="n">line</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">lw</span><span class="p">)</span>
        <span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">x_int</span><span class="p">,</span> <span class="n">y_int</span><span class="p">)</span>

        <span class="c"># don&#39;t add background line for axes</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">xaxis</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">yaxis</span><span class="p">):</span>
            <span class="n">line_bg</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Line2D</span><span class="p">(</span><span class="n">x_int</span><span class="p">,</span> <span class="n">y_int</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">bgcolor</span><span class="p">,</span>
                                <span class="n">linewidth</span><span class="o">=</span><span class="mi">8</span> <span class="o">*</span> <span class="n">lw</span><span class="p">)</span>

            <span class="n">ax</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="n">line_bg</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

    <span class="c"># Draw arrow-heads at the end of axes lines</span>
    <span class="n">arr1</span> <span class="o">=</span> <span class="mf">0.03</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">arr2</span> <span class="o">=</span> <span class="mf">0.02</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

    <span class="n">arr1</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.005</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">arr2</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.005</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">xaxis</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
    <span class="k">if</span> <span class="s">&#39;+&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">xaxis_arrow</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">arr1</span> <span class="o">*</span> <span class="n">xspan</span> <span class="o">*</span> <span class="n">aspect</span><span class="p">,</span>
                <span class="n">y</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">arr2</span> <span class="o">*</span> <span class="n">yspan</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">if</span> <span class="s">&#39;-&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">xaxis_arrow</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">arr1</span> <span class="o">*</span> <span class="n">xspan</span> <span class="o">*</span> <span class="n">aspect</span><span class="p">,</span>
                <span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">arr2</span> <span class="o">*</span> <span class="n">yspan</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">yaxis</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
    <span class="k">if</span> <span class="s">&#39;+&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">yaxis_arrow</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">arr2</span> <span class="o">*</span> <span class="n">xspan</span> <span class="o">*</span> <span class="n">aspect</span><span class="p">,</span>
                <span class="n">y</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">arr1</span> <span class="o">*</span> <span class="n">yspan</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">if</span> <span class="s">&#39;-&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">yaxis_arrow</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">arr2</span> <span class="o">*</span> <span class="n">xspan</span> <span class="o">*</span> <span class="n">aspect</span><span class="p">,</span>
                <span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">arr1</span> <span class="o">*</span> <span class="n">yspan</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="c"># Change all the fonts to humor-sans.</span>
    <span class="n">prop</span> <span class="o">=</span> <span class="n">fm</span><span class="o">.</span><span class="n">FontProperties</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s">&#39;Humor-Sans.ttf&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">texts</span><span class="p">:</span>
        <span class="n">text</span><span class="o">.</span><span class="n">set_fontproperties</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
    
    <span class="c"># modify legend</span>
    <span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">leg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">leg</span><span class="o">.</span><span class="n">set_frame_on</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">leg</span><span class="o">.</span><span class="n">get_children</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Line2D</span><span class="p">):</span>
                <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
                <span class="n">child</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">xkcd_line</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">mag</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">f1</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">f2</span><span class="o">=</span><span class="mf">0.001</span><span class="p">))</span>
                <span class="n">child</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">child</span><span class="o">.</span><span class="n">get_linewidth</span><span class="p">())</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Text</span><span class="p">):</span>
                <span class="n">child</span><span class="o">.</span><span class="n">set_fontproperties</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
    
    <span class="c"># Set the axis limits</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xax_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="n">xspan</span><span class="p">,</span>
                <span class="n">xax_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="n">xspan</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">yax_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="n">yspan</span><span class="p">,</span>
                <span class="n">yax_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="n">yspan</span><span class="p">)</span>

    <span class="c"># adjust the axes</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([])</span>      

    <span class="k">if</span> <span class="n">expand_axes</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">bgcolor</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_axis_off</span><span class="p">()</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_position</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
    
    <span class="k">return</span> <span class="n">ax</span>
</pre></div>

</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h2 class="ipynb">
  Testing it Out
</h2>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let&#8217;s test this out with a simple plot.  We&#8217;ll plot two curves, add some labels,
and then call <code>XKCDify</code> on the axis.  I think the results are pretty nice!</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [4]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="o">%</span><span class="k">pylab</span> <span class="n">inline</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">
Welcome to pylab, a matplotlib-based Python environment [backend: module://IPython.zmq.pylab.backend_inline].
For more information, type &apos;help(pylab)&apos;.
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [5]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">pylab</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.1</span> <span class="o">*</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">),</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;damped sine&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.1</span> <span class="o">*</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">),</span> <span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;damped cosine&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;check it out!&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;x label&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;y label&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">&#39;lower right&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

<span class="c">#XKCDify the axes -- this operates in-place</span>
<span class="n">XKCDify</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">xaxis_loc</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">yaxis_loc</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">xaxis_arrow</span><span class="o">=</span><span class="s">&#39;+-&#39;</span><span class="p">,</span> <span class="n">yaxis_arrow</span><span class="o">=</span><span class="s">&#39;+-&#39;</span><span class="p">,</span>
        <span class="n">expand_axes</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [5]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">&lt;matplotlib.axes.AxesSubplot at 0x2fecbd0&gt;</pre>
</div>
</div>
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_display_data">
<img src="data:image/png;base64,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
YII=
"></img>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h2 class="ipynb">
  Duplicating an XKCD Comic
</h2>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now let&#8217;s see if we can use this to replicated an XKCD comic in matplotlib.
This is a good one:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [6]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="n">Image</span><span class="p">(</span><span class="s">&#39;http://imgs.xkcd.com/comics/front_door.png&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [6]:</div>
<div class="output_subarea output_pyout">
<img src="data:image/png;base64,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
Q/8f50+l/lmW+7QAAAAASUVORK5CYII=
"></img>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>With the new <code>XKCDify</code> function, this is relatively easy to replicate.  The results
are not exactly identical, but I think it definitely gets the point across!</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [7]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="c"># Some helper functions</span>
<span class="k">def</span> <span class="nf">norm</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">sigma</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span> <span class="n">sigma</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">sigmoid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">alpha</span><span class="p">):</span>
    <span class="k">return</span> <span class="mf">1.</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span> <span class="o">/</span> <span class="n">alpha</span><span class="p">))</span>
    
<span class="c"># define the curves</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">))</span> <span class="o">+</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.5</span> <span class="o">-</span> <span class="n">sigmoid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">))</span>

<span class="n">y2</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">))</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">sigmoid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">))</span>

<span class="n">y3</span> <span class="o">=</span> <span class="mf">0.05</span> <span class="o">+</span> <span class="mf">1.4</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.85</span><span class="p">,</span> <span class="mf">0.08</span><span class="p">)</span>
<span class="n">y3</span><span class="p">[</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mf">0.85</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.05</span> <span class="o">+</span> <span class="mf">1.4</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mf">0.85</span><span class="p">],</span> <span class="mf">0.85</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>

<span class="c"># draw the curves</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;gray&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;blue&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;red&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="s">&quot;Yard&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="s">&quot;Steps&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="s">&quot;Door&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="s">&quot;Inside&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="s">&quot;fear that</span><span class="se">\n</span><span class="s">there&#39;s</span><span class="se">\n</span><span class="s">something</span><span class="se">\n</span><span class="s">behind me&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="s">&#39;-k&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="s">&quot;forward</span><span class="se">\n</span><span class="s">speed&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mf">0.32</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">],</span> <span class="s">&#39;-k&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="s">&quot;embarrassment&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.55</span><span class="p">,</span> <span class="mf">1.05</span><span class="p">],</span> <span class="s">&#39;-k&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&quot;Walking back to my</span><span class="se">\n</span><span class="s">front door at night:&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)</span>

<span class="c"># modify all the axes elements in-place</span>
<span class="n">XKCDify</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">expand_axes</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [7]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">&lt;matplotlib.axes.AxesSubplot at 0x2fef210&gt;</pre>
</div>
</div>
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_display_data">
<img src="data:image/png;base64,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
WFgYOI5DYmKiwUvQKRQKKJVKJCUlIT09XWjZ2dnCMfxa+/nz59G9e3f06dMHI0eOhLu7OziOg0ql
Qnh4uHC8Wq3GrVu3MH/+fDz33HPYuHEjfv31VwDAzp07AVRWfHJ2dsbQoUOxb98+FBUVITg4GB4e
HlrrqeXl5UhPT4dCoYCXlxdycnLw119/YeDAgbh9+zbUarVwbE5ODnJychAYGAgA2Lx5c536BYBT
p04hOjoajz76KJ6uphxWSUkJnnnmGSgUCnz66adVXq/tOvG0aNECubm5uHTpknCtMzIyqtQy5teI
7969q9UX//yTTz6J0NBQ3Lp1C3v27EFubi6mT58OKysrrFu3DjExMdi9ezeuX79exc4qPFSOmxEH
Dx4kAPTYY48Z2xSDsm/fPurTp4+xzWgUr7/+Or0jwnRjXfjlFzYga9mSSMzB9t69eyk6OppWrVol
TIuZLGfPsotYh9GIPlm3bh1FR0fT8ePHDdqPWq0mJycnUigUpFKpiOM4srCwoK5duwojKn40NW/e
PHJxcaFr164REdGePXuEUVrfvn2Fke2sWbOEkdWoUaOooqJC6G/+/Pkkk8mooKCAiNgo9KeffiKO
4+jGjRtERPTss89S69atKTs7m8aOHUv+/v5ao7Vhw4ZRaWkp3bp1iziOo3Xr1tFPP/1EvXr1IgsL
C+E4Nzc3+v333+vcb05ODnXr1o04jqOQkBCKjY2tcr1mzpxJMpmMWrZsSf/73/+0Zm3qcp3mz59P
HMeRnZ2dYKezszPt3r1bOM/Ro0eJ4zjasmULzZw5k1QqFZ0/f56IiIYMGUIymazav+WiRYvqNGrW
RRrZasB7IpuzcxQAWFlZoaSkxNhmNIr+/fsjLi7O2GYgLw949VW2/9FHgFhlQ7Ozs3HkyBEALNSH
E7syvb45cYJtRRrV8vAjRUNnVTt8+DCys7Px/fffIysrC7GxsUhKSsLx48er1Jr94osvEBsbC39/
fwCoMYxr/vz5iImJwc6dO3H9+nU88cQTwv/1qVOnQEQ4cuQI4uPjERISgkmTJgGA4Bw5ZswYXL16
FUFBQdi8eTOuX7+OyZMnIyYmBufOncP27duhUCjg6emJRx99FHPnzsWUKVNw6NAh2NnZYePGjcKo
buTIkXXu197eHseOHcPVq1cRGhqKQYMG4YUXXtD6bKtWrUJ+fj5mzJiBV199FX379hVmHutynbZt
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
"></img>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Pretty good for a couple hours&#8217;s work!</p>
<p>I think the possibilities here are pretty limitless: this is going to be a hugely
useful and popular feature in matplotlib, especially when the sketch artist PR is mature
and part of the main package.  I imagine using this style of plot for schematic figures
in presentations where the normal crisp matplotlib lines look a bit too &#8220;scientific&#8221;.
I&#8217;m giving a few talks at the end of the month&#8230; maybe I&#8217;ll even use some of
this code there.</p>
<p>This post was written entirely in an IPython Notebook: the notebook file is available for
download <a href="http://jakevdp.github.com/downloads/notebooks/XKCD_plots.ipynb">here</a>.
For more information on blogging with notebooks in octopress, see my
<a href="http://jakevdp.github.com/blog/2012/10/04/blogging-with-ipython/">previous post</a>
on the subject.</p>
</div>

</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Blogging with IPython in Octopress]]></title>
    <link href="http://jakevdp.github.com/blog/2012/10/04/blogging-with-ipython/"/>
    <updated>2012-10-04T18:40:00-07:00</updated>
    <id>http://jakevdp.github.com/blog/2012/10/04/blogging-with-ipython</id>
    <content type="html"><![CDATA[<div class="ipynb">

<div class="text_cell_render border-box-sizing rendered_html">
<p>A few weeks ago, Fernando Perez, the creator of IPython, wrote a <a href="http://blog.fperez.org/2012/09/blogging-with-ipython-notebook.html">post</a> about blogging with IPython notebooks.  I decided to take a stab at making this work in Octopress.</p>
<p>I started by following Fernando&#8217;s outline:  I first went to <a href="http://github.com/ipython/nbconvert">http://github.com/ipython/nbconvert</a> and obtained the current version of the notebook converter.  Running <code>nbconvert.py -f blogger-html filename.ipynb</code> produces a separate html and header file with the notebook content.  I inserted the stylesheet info into my header (in octopress, the default location is <code>source/_includes/custom/head.html</code>) and copied the html directly into my post.</p>
<p>I immediately encountered a problem.  <code>nbconvert</code> uses global CSS classes and style markups, and some of these (notably the &#8220;hightlight&#8221; class and the <code>&lt;pre&gt;</code> tag formatting) conflict with styles defined in my octopress theme.  The result was that every post in my blog ended up looking like an ugly hybrid of octopress and an ipython notebook.  Not very nice.</p>
<p>So I did some surgery.  Admittedly, this is a terrible hack, but the following code takes the files output by nbconvert, slices them up, and creates a specific set of CSS classes for the notebook markup, such that there&#8217;s no longer a conflict with the native octopress styles
(you can download this script <a href="http://jakevdp.github.com/downloads/code/convert_notebook.py">here</a>):</p>
</div>

<!-- more -->

<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [&nbsp;]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="c">#!/usr/bin/python</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">nbconvert</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">notebook</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;usage: python octopress_notebook.py  /path/to/nbconvert.py  /path/to/notebook_file.ipynb&quot;</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="c"># convert notebook</span>
<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> -f blogger-html </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nbconvert</span><span class="p">,</span> <span class="n">notebook</span><span class="p">))</span>

<span class="c"># get out filenames</span>
<span class="n">outfile_root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">notebook</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">body_file</span> <span class="o">=</span> <span class="n">outfile_root</span> <span class="o">+</span> <span class="s">&#39;.html&#39;</span>
<span class="n">header_file</span> <span class="o">=</span> <span class="n">outfile_root</span> <span class="o">+</span> <span class="s">&#39;_header.html&#39;</span>


<span class="c"># read the files</span>
<span class="n">body</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">body_file</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">header</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">header_file</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>


<span class="c"># replace the highlight tags</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;class=&quot;highlight&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;class=&quot;highlight-ipynb&quot;&#39;</span><span class="p">)</span>
<span class="n">header</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;highlight&#39;</span><span class="p">,</span> <span class="s">&#39;highlight-ipynb&#39;</span><span class="p">)</span>


<span class="c"># specify &lt;pre&gt; tags</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;&lt;pre&#39;</span><span class="p">,</span> <span class="s">&#39;&lt;pre class=&quot;ipynb&quot;&#39;</span><span class="p">)</span>
<span class="n">header</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;html, body&#39;</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s">&#39;pre.ipynb {&#39;</span><span class="p">,</span>
                                                 <span class="s">&#39;  color: black;&#39;</span><span class="p">,</span>
                                                 <span class="s">&#39;  background: #f7f7f7;&#39;</span><span class="p">,</span>
                                                 <span class="s">&#39;  border: 0;&#39;</span><span class="p">,</span>
                                                 <span class="s">&#39;  box-shadow: none;&#39;</span><span class="p">,</span>
                                                 <span class="s">&#39;  margin-bottom: 0;&#39;</span><span class="p">,</span>
                                                 <span class="s">&#39;  padding: 0;&#39;</span>
                                                 <span class="s">&#39;}</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span>
                                                 <span class="s">&#39;html, body&#39;</span><span class="p">)))</span>


<span class="c"># create a special div for notebook</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">&#39;&lt;div class=&quot;ipynb&quot;&gt;</span><span class="se">\n\n</span><span class="s">&#39;</span> <span class="o">+</span> <span class="n">body</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">&lt;/div&gt;&quot;</span>
<span class="n">header</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;body {&#39;</span><span class="p">,</span> <span class="s">&#39;div.ipynb {&#39;</span><span class="p">)</span>


<span class="c"># specialize headers</span>
<span class="n">header</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;html, body,&#39;</span><span class="p">,</span>
                        <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(((</span><span class="s">&#39;h1.ipynb h2.ipynb h3.ipynb &#39;</span>
                                    <span class="s">&#39;h4.ipynb h5.ipynb h6.ipynb {&#39;</span><span class="p">),</span>
                                   <span class="s">&#39;h1.ipynb h2.ipynb ... {&#39;</span><span class="p">,</span>
                                   <span class="s">&#39;  margin: 0;&#39;</span><span class="p">,</span>
                                   <span class="s">&#39;  padding: 0;&#39;</span><span class="p">,</span>
                                   <span class="s">&#39;  border: 0;&#39;</span><span class="p">,</span>
                                   <span class="s">&#39;  font-size: 100%;&#39;</span><span class="p">,</span>
                                   <span class="s">&#39;  font: inherit;&#39;</span><span class="p">,</span>
                                   <span class="s">&#39;  vertical-align: baseline;&#39;</span><span class="p">,</span>
                                   <span class="s">&#39;}</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span>
                                   <span class="s">&#39;html, body,&#39;</span><span class="p">)))</span>
<span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="s">&#39;123456&#39;</span><span class="p">:</span>
    <span class="n">body</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;&lt;h</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">h</span><span class="p">,</span> <span class="s">&#39;&lt;h</span><span class="si">%s</span><span class="s"> class=&quot;ipynb&quot;&#39;</span> <span class="o">%</span> <span class="n">h</span><span class="p">)</span>


<span class="c"># comment out document-level formatting</span>
<span class="n">header</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;html, body,&#39;</span><span class="p">,</span>
                        <span class="s">&#39;/*html, body,*/&#39;</span><span class="p">)</span>
<span class="n">header</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;h1, h2, h3, h4, h5, h6,&#39;</span><span class="p">,</span>
                        <span class="s">&#39;/*h1, h2, h3, h4, h5, h6,*/&#39;</span><span class="p">)</span>

<span class="c">#----------------------------------------------------------------------</span>
<span class="c"># Write the results to file</span>
<span class="nb">open</span><span class="p">(</span><span class="n">body_file</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
<span class="nb">open</span><span class="p">(</span><span class="n">header_file</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>This code should be run with two arguments: first the file to be converted, then the path to <code>nbconvert.py</code>.  Like the native <code>nbconvert.py</code> this produces a separate file of header code (which is inserted once into the  master blog header) and body code which can be copied verbatim into the post.</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h2 class="ipynb">
  Trying it out
</h2>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>If you haven&#8217;t noticed already, this post is written entirely in an IPython notebook.  So let&#8217;s see how some things look.</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>First of all, we can write some math, which is rendered using mathjax:</p>
<p>$f(x) = \int_0^\infty \left(\frac{\sin(x)}{x^2}\right)dx$</p>
<p>As we see, it renders nicely.</p>
<p>Or we can do some inline plotting:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [1]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="o">%</span><span class="k">pylab</span> <span class="n">inline</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_stream output_stdout">
<pre class="ipynb">
Welcome to pylab, a matplotlib-based Python environment [backend: module://IPython.zmq.pylab.backend_inline].
For more information, type &apos;help(pylab)&apos;.
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">In [2]:</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>

</div>
</div>
<div class="vbox output_wrapper">
<div class="output vbox">
<div class="hbox output_area">
<div class="prompt output_prompt">Out [2]:</div>
<div class="output_subarea output_pyout">
<pre class="ipynb">[&lt;matplotlib.lines.Line2D at 0x2cdba90&gt;]</pre>
</div>
</div>
<div class="hbox output_area">
<div class="prompt output_prompt"></div>
<div class="output_subarea output_display_data">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAX0AAAD9CAYAAABQvqc9AAAABHNCSVQICAgIfAhkiAAAAAlwSFlz
AAALEgAACxIB0t1+/AAAIABJREFUeJzt3XlYVdX6B/DvUchSc0zQACUFBZwNMzWTQjRREcRUyjRt
sMG6eS1/3e7vuVdv5U8fu5Vdy6x7LS3nCTGR1Aw1lUjFIbXEAWVQKqcknMD9++O9OKIezjn7rD18
P8/DY+ph71c6vKz9rrXe5dA0TQMREdlCJdUBEBGR9zDpExHZCJM+EZGNMOkTEdkIkz4RkY0w6RMR
2YhbSX/48OHw9/dHy5Ytb/ial19+GaGhoWjdujWysrLcuR0REbnJraQ/bNgwpKWl3fDvU1NTsW/f
PmRnZ+OTTz7B888/787tiIjITW4l/S5duqB27do3/PuUlBQMHToUANChQwecPHkShYWF7tySiIjc
4KPnxfPz8xEUFHTp94GBgcjLy4O/v/9Vr3M4HHqGQURkWRVtqqD7RO61Ad0owWuaZsqPb77R0L27
hpo1NTzxhIZFizR8+62G9es1fPedhkmTNHTsqKFWLQ3PP6/h+PGbX+/vf/+78n+TUT74tbDP1yI3
V8Mbb2jw85Pvp48/1rB0qYZNmzRkZWmYNk1DUpIGf38N99zzd/z4o/qYjfDhCl1H+gEBAcjNzb30
+7y8PAQEBOh5S68pLgb+53+A5GTg//4PWLIEqFr1+td17gy8+ipQUAC8/TbQogXw4YdAfLz3YyYy
otmzgT/9CXjsMWDdOqBZs+tf06YN8OyzQEkJEBcHPPQQkJQEjB0L3KTCTOXQdaQfFxeHmTNnAgAy
MjJQq1at60o7ZvT990DbtsCJE8COHcDgweUn/Cvdfbck+zlzgDFjgIEDgaIi78RLZERnzkgiHzsW
WL0amDy5/IR/JR8f4L77gN27gXPn5IfB7t1eCdcy3BrpJyUlYe3atfjtt98QFBSEcePG4cKFCwCA
ESNGIDY2FqmpqQgJCUG1atXw2WefeSRolVaulCT/0UdA//4V//wHHwS2bwdeeAF45BEgNRWoUePy
30dFRXksVrPj1+Iyq30tCgqAnj2BiAhgyxbgzjud/9yoqCjcdRfw8cfAl18CDz8sT9odO+oXr5U4
NFcLQ54MwuFwuT7lTatXyyNocjLQqZN717p4EXjxRWDbNmDFCqBWLc/ESGR0x47J4CcpCfjrXwF3
13GsWAEMHQrMmCE/SOzEldzJpO+kNWuAQYOAxYuBBx7wzDU1DXjlFWDDBnmCqFPHM9clMqqiIiA6
GujaFZg40f2EX2bTJpkn+/JLICbGM9c0AyZ9nWzeDMTGAgsXygjFkzQN+POfpeSzcqXULIms6Nw5
oFcvIDgY+PRTzyX8MmvXAgMGABs3Ak2aePbaRsWkr4MTJ4B77wUmTQISE/W5R2mp1PfbtwfGj9fn
HkSqDRsGnD4NzJsHVK6szz0++kg+Nm2q2DyBWTHpe5imAQkJQKNGsrJAT7/+Kj9cpkyRJWlEVjJn
jqzS2boVqFZNv/toGjBihHw/LVoEVLJ4S0kmfQ97911g7lzgu++A227T/34ZGZLwN22yz+MpWd/B
g0CHDkBaGtCunf73O39eVvTExgJvvKH//VRi0vegsgScmSk1SG+ZMgWYPl32Avj6eu++RHooKZF5
sMREYPRo7903N1d+wKxdK8tCrcqV3Gnxhx/XnDsnS8CmTvVuwgdkGedddwHvv+/d+xLp4R//kNr6
qFHevW9QEPDmm8Dw4TJnRpdxpF+Ot96SEX5Kipr7798vj8ObN3v/hw6Rp+zcKcszt28HGjTw/v0v
XpR2DfHx3v+h4y0s73hAWcLdskUmcFUZP17W73/1leeXthHpTdMk4Q4YILvPVcnOlp26mZlA48bq
4tALyztu0jRg5EjgtdfUJnxAmrQdOiR7A4jMZt484NQpWUmjUmioNEZ89ln5/iYm/assWiQTQH/+
s+pIZLXQtGmyY/fUKdXREDmvqEgGLVOm6LcevyJGjQKOHpWnZmJ555LiYunwN3s20KWL0lCuMny4
1EPfflt1JETO+ctfgPx84L8Ndg1h+XL5QbRzp7V2vbOm74ZJk2SZpNHKKYcPSxvnH39UMxlGVBHZ
2dKMcMcOY71fNU3W7iclSanHKpj0XXTqlNT+0tONuaZ39Gjg7Fnpx09kZI8/DjRvbsxNUZs3y96b
vXuB6tVVR+MZTPou+vvfZdL088+VhXBTv/0GhIXJkwh36pJR7d4tK3b27TNu35vHHpPvpb/9TXUk
nsGk74Jff5U3webNwD33KAnBKW++Cfz0EzBrlupIiMo3cCAQGSmr34zq4EGJcdcuoH591dG4j0nf
BWYpnRQVSQkqLQ1o3Vp1NERX27ED6NFDRvl6NlTzhJdfBqpUkXk8s2PSr6C8PKBVK/mpb6RJpxv5
4AM5zCU5WXUkRFfr109WvZlh52turpytm51t/oOLmPQraNQoab36z396/dYuKS6WElR6OhAerjoa
IrF1K9Cnj4zy77hDdTTOeeop2YBp9to+k34FnDghk6I7dgCBgV69tVvefFPqktOnq46ESCQkyATu
yy+rjsR5e/fKsacHDph7JQ+TfgWMHy//4426YudGjh8HQkLM98OKrCk7G+jcGcjJAapWVR1NxQwc
KH22jLAD31VM+k46e1a6V65eDbRo4bXbesyoUbK9/Z13VEdCdvfCC0DduvIEajbbtsmZvQcOyMSu
GTHpO+mTT4ClS2VrthmVTUTt2wfUrq06GrKrY8dkRdnu3eZd/tirl2zYUt0YzlXssumE0lKZuB0z
RnUkrgsKAnr3lkNeiFSZOlXq+WZN+IB04HzvPem9bxe2S/opKUDNmnKEm5mNGSNLOM+dUx0J2VHZ
3hYzLNG8mS5dgNtvB1atUh2J99gu6f/zn7Jj0OwHkzRvLnsMFixQHQnZ0ezZsknQjHNiV3I4gJde
Av71L9WReI+tavrbt0sNLyfHGu1Vly4FJkwANm1SHQnZiaYBLVtKWSQmRnU07jtzBmjYEMjIMF9v
K9b0b2HqVGmraoWED0hdv6BANscQeUt6uvzarZvSMDzmjjvk3Aqjt2LxFNuM9H//XXbg7doF3H23
rrfyqvHj5Vzf//xHdSRkF4MGycamkSNVR+I5hw4B7drJr2barMUlmzfx4YfA2rXA/Pm63sbrfvlF
Tvw6cIDLN0l/hYXSlTYnRxZEWElCgjSNe+451ZE4j+WdG9A04KOPZCOJ1fj5yTzFZ5+pjoTs4LPP
gMRE6yV84PKErvphsL5skfTXrZP/kV27qo5EHy++KD/U7LTWmLzv4kVg2jTzbmS6lYcekn/jhg2q
I9GXLZJ+2Sjf7Ms0b+T++4EaNYCVK1VHQla2cqW0Io6MVB2JPhwO6b5p9fkxy9f0rVyDvNLHHwPf
fMN1+6Sf+HgpJT7zjOpI9PPLL0DTpsDhwzKQMjrW9MvxxRfyZrVywgdkRcWqVXKeLpGn5eVJmTQp
SXUk+vLzA6KjgblzVUeiH0snfU2Tiadhw1RHor9atWTd/uzZqiMhK/rsM2lFbKbljK566ing3/9W
HYV+LJ30f/hBetN06aI6Eu8YPlzqkeoLdmQlmibnTgwfrjoS7+jRAzhyBNi5U3Uk+rB00v/sM+DJ
J607gXutqCjZhJaVpToSspLvvpOmZFadwL1W5cqSN6w6oWvZidwzZ+RkqW3bpBWxXYwbB/z6KzBl
iupIyCqeflomN83cjryiDhyQU7Xy8ox9wAoncq+QnAzce6+9Ej4gI5Q5c6T1LZG7iouBRYuAwYNV
R+JdjRtLF9HkZNWReJ5lk75dJnCv1aiR9BBZulR1JGQFS5bIPhAr9aty1pNPAjNnqo7C8yyZ9A8f
BrZskaWadjR8ODB9uuooyAo+/1ySnx3Fx8vu3F9+UR2JZ1ky6X/xBTBggLRMtaO+fYHMTODoUdWR
kJnl5krb7r59VUeiRvXqsgx63jzVkXiW5ZK+pgFffgk88YTqSNSpWlUOe7byBhPS3xdfAI8+Kit3
7OqJJySfWInlkv727TKJ2bGj6kjUevxxYNYs1VGQWWma1LOHDFEdiVrR0dJj/+efVUfiOZZL+rNm
yVZxu6zNv5GHH5blZnv3qo6EzCgrCzh/noMnHx/JJ1YaQFkq6V+8KMsVH39cdSTq+fjItnkrvVnJ
e+bM4eCpzODBUuJRv6PJM9xO+mlpaQgLC0NoaCgmTpx43d+np6ejZs2aaNu2Ldq2bYu33nrL3Vve
0Pr1QN26QPPmut3CVMpKPFZ5s5J3XLwo80FWb67mrHbtZF5j40bVkXiGW0eEl5aWYuTIkVi9ejUC
AgLQvn17xMXFITw8/KrXde3aFSkpKW4F6oxZszjKv1JkJFCpkqzk6dBBdTRkFt99J0dvtmihOhJj
cDguj/Y7d1YdjfvcSvqZmZkICQlBcHAwAGDQoEFYunTpdUnfmW3CY8eOvfTfUVFRiIqKqlAs587J
zkH2nbnM4bg82mfSJ2eVlXbosscek0HUBx8Avr7q4khPT0d6erpb13Ar6efn5yPoij4HgYGB+P77
7696jcPhwMaNG9G6dWsEBATgnXfeQURExHXXujLpuyItTUYmDRu6dRnLefxxGZ28+67U+Ylu5sIF
YOFCeTqky4KDgZAQOajokUfUxXHtgHjcuHEVvoZbNX2HE7M87dq1Q25uLrZv346XXnoJ8Tptk509
W34a09VCQuQNu2aN6kjIDFavBkJDgXvuUR2J8QwcaI2NWm4l/YCAAOTm5l76fW5uLgIDA696zZ13
3omqVasCAHr27IkLFy7g+PHj7tz2OkVFMtLv39+jl7WMAQN4jCI5Z/ZslnZu5NFHpafV+fOqI3GP
W0k/MjIS2dnZyMnJwfnz5zFv3jzExcVd9ZrCwsJLNf3MzExomoY6deq4c9vrLF8u64nr1vXoZS2j
f39pnHXhgupIyMiKi4Fly2SQQNcLDJSVgStXqo7EPW5VeX18fDBlyhT06NEDpaWleOqppxAeHo5p
06YBAEaMGIGFCxdi6tSp8PHxQdWqVTFXh94ACxbwjXozjRrJI/uaNXIqEFF5VqyQyUp/f9WRGFdZ
iad3b9WRuM70h6gUFQEBAcDBg4CHHyAs5b33gB9/tO5pQOS+QYNkJ/ezz6qOxLiOHAEiIuRXI/Qk
suUhKsuXA506MeHfSv/+ciCE2euRpI8zZ2RezK7tyJ3VoAHQpo08FZmV6ZP+ggUywUI3FxQEhIXJ
kjOia6WlyUlzfn6qIzG+gQOB+fNVR+E6Uyf9oiJg1SqOTpw1YIC536ykHw6enJeYKCP94mLVkbjG
1EmfpZ2K6d/fGkvOyLPOngVSU4GEBNWRmEO9ekD79uYt8Zg66c+fz1U7FREQIEvOVq1SHQkZyddf
A23bctVORSQmStsXMzJt0i8qkt2Ddj3KzVWPPsqNWnQ1lnYqLj5eRvrnzqmOpOJMm/RTU1nacUVC
AvDVV9yoReLcOSmT9uunOhJzqV8faNnSnE/Npk36ixfLIxZVTFAQ0KQJsG6d6kjICFauBFq1kiRG
FWPWEo8pk/7Zs7LE7JqOD+Skfv3M+WYlz1u4kD2rXNWvn7StMNtTsymT/urVskGCa4pdk5AgvXgu
XlQdCal04YKU+rhqxzVBQUDjxsDataojqRhTJv3Fi/lGdUfTpsBddwEZGaojIZXWrpXW29c0xqUK
MGOJx3RJv6QESElh0ndXv37yw5Psa8kSfh+5KzFRvo6lpaojcZ7pkv66dXLAA0/Ick9ioiR99e32
SIWLF6UXE5O+e0JCZH+DmQ5NN13SX7yYy8s8oWVLOTR92zbVkZAKmZlArVpAs2aqIzE/s5V4TJX0
L16URykmffc5HCzx2BlLO56TkCDtTczy1GyqpM/RiWdx6aY9aRoXQ3hSixby1Lxjh+pInGOqpM/S
jmfddx9w8iSwd6/qSMibdu2Spnvt2qmOxBocDmnLkJysOhLnmCbpa5o8krKNsudUqiQb3JYuVR0J
eVNZacfhUB2JdTDp62DPHtmJy9GJZ8XHM+nbDUs7ntepE5CfD+TkqI7k1kyT9JculY6aHJ141kMP
ydm5hYWqIyFvyMkB8vKAzp1VR2ItlSsDffqYYwBlmqSfnMw2ynqoUgXo0UO245P1paQAvXoBPj6q
I7GehARzlHhMkfQLCmSysWtX1ZFYU9++5nizkvvKnpjJ86Kjgaws4Ngx1ZHcnCmS/rJlQM+ewG23
qY7EmmJjpQ9LUZHqSEhPJ04AP/wAdO+uOhJruuMOoFs34z81myLpJydz1Y6eatUCOnSQ3upkXamp
8rRcrZrqSKzLDKt4DJ/0T58GNmwAHnlEdSTWZoY3K7mHpR399eoFrFkDFBerjuTGDJ/009JkOVSN
Gqojsba4ODk2r6REdSSkh3Pn5EmuTx/VkVhb7drAvfcC33yjOpIbM3zSZ2nHO4KCpHvp+vWqIyE9
pKcDERHSEZL0FRcnq6SMytBJ/8IFOXGexyJ6R1ycTJqT9bC04z19+sj3kVFPpjN00l+/XvpV3323
6kjsoWyEYpZugeQcTZP/r0z63tGkiZxMl5mpOpLyGTrpp6RwlO9NrVtLI649e1RHQp60ZYus2AkL
Ux2JffTta9wSj2GTftnohBNP3uNwGL8eSRXHwZP3Gfn7yLBJf/duOXeyVSvVkdiLkd+s5Bomfe9r
3x747Tdg/37VkVzPsEm/7I3KBmve1bWr/MBlAzZrOHxYGqx17Kg6EnupVOnyhK7RGD7pk3dVqSLb
9JcvVx0JecJXX0mbDTZY8z6jPjUbMukXFspkIhusqcGlm9bBwZM60dHA5s3A8eOqI7maIZP+8uUy
2mSDNTViY2Ur+ZkzqiMhd5w+DWzcyAZrqlStKudVrFihOpKrGTLpc3SiVp06QNu2kvjJvFaulFo+
W5ioY8S6vuGS/pkzkmxiY1VHYm9mOQWIbmzZMi55Vq1XL+Drr6W7gFEYLumvWSPn4NapozoSe+vT
RyYBjbqVnG6utFTKpEz6ajVoAISGGqunleGSfkoK0Lu36iioaVPgzjuBrVtVR0KuyMiQ9iWNGqmO
hIxW4jFU0tc0GV1ydGIMRnuzkvNY2jGOPn2M1dPKUEk/K0t6hDRrpjoSApj0zYwtTIyjdWup6Rul
p5Whkj5HJ8bSuTNw6JDs6CTz2L9f1oa3b686EgKkq4CRBlBM+nRDPj5yTKXRD3qmqy1bJqtGKhnq
u9vemPTLUVAAHDggo0syDiO9Wck5nBcznqgoYOdOacKmmmGS/ldfyajS11d1JHSlRx6R5WZ//KE6
EnLGqVNyeEdMjOpI6Eq33y5tGVJTVUfigaSflpaGsLAwhIaGYuLEieW+5uWXX0ZoaChat26NrKys
cl/D0o4x1aoFREYa+6Bnuuzrr4EHHpAFEWQsRnlqdivpl5aWYuTIkUhLS8Pu3bsxZ84c7Llmijo1
NRX79u1DdnY2PvnkEzz//PPlXmvtWhlVkvEY5c1Kt8bBk3H16gWsWiWn06nkVtLPzMxESEgIgoOD
4evri0GDBmHpNXv3U1JSMHToUABAhw4dcPLkSRSW06y9XTugdm13oiG9cHeuOZSUSHMvbm40Jj8/
IDxcBrgqudVlOz8/H0FBQZd+HxgYiO+///6Wr8nLy4O/v/9Vr6tSZSzGjpX/joqKQlRUlDuhkQeF
hEiZZ8sWLgM0sk2bgKAg+SBjKntqdnXOJT09Henp6W7F4FbSdzh5rJV2zVa08j5vypSxCA11JxrS
U9mblUnfuFjaMb4+faSD8OTJrp0KeO2AeNy4cRW+hlvlnYCAAOTm5l76fW5uLgIDA2/6mry8PAQE
BFx3LSZ8Y2Nd3/i4VNP4WrSQMumuXepicCvpR0ZGIjs7Gzk5OTh//jzmzZuHuGsa4cfFxWHmzJkA
gIyMDNSqVeu60g4ZX8eOQG6ufJDx7N8PnDgB3Huv6kjoZsp256rc8OhW0vfx8cGUKVPQo0cPRERE
YODAgQgPD8e0adMwbdo0AEBsbCwaN26MkJAQjBgxAh999JFHAifv8vEBevbk7lyjWrZMJnC5C9f4
VD81O7RrC+4qgnA4rqv7k/HMnw98/rkxNpjQ1R5+GHjlFZ44ZwbnzgH+/kB2NlCvnnvXciV3MumT
006dkpUhR45w84+RnDwJNGwIHD0q57KS8SUmyg/o/65md5kruZMPg+S0mjWB++6TDSZkHGlpwIMP
MuGbicoSD5M+VYjqeiRdj0s1zSc2Fli9Wko93sakTxXSu7ecvcrducZQUiIjfe7CNRc/PyAiQs3u
XCZ9qpAmTeTQ+h9+UB0JAcCGDUBwMFDO1hcyOFVPzUz6VGFxcSzxGAVLO+ZV9n3k7TUsTPpUYazr
GweTvnlFRMi+ip07vXtfJn2qsPvvl2Wbhw6pjsTe9u4FioqkQy2Zj8Oh5qmZSZ8qrHJlWX3A0b5a
ZbtwXWncRcag4qmZSZ9cEhcHpKSojsLeli3jDlyz69IF+Pln2VjnLUz65JLu3YGMDOD331VHYk/H
jgFZWdJ+gczrttuAHj1kGbS3MOmTS6pXBzp3ljNZyftWrJCEf8cdqiMhd3m7xMOkTy7jKh51UlJY
2rGKnj2Bb78Fzpzxzv2Y9MllffpIx82SEtWR2Mu5c8DKlXLQNplfnTpA27bAmjXeuR+TPrms7DzW
jRtVR2Iva9cCzZvLVn6yBm8ujGDSJ7dwd673sbRjPWVJ3xs9rZj0yS1xccDSpaqjsA9NY9K3opAQ
7/W0YtInt7RrBxQXAz/9pDoSe9i+HahSBQgLUx0JeVrfvt4ZQDHpk1vKtpJztO8dZaN87sK1nr59
vVPXZ9Int8XHA8nJqqOwh5QUNlizqvbtZdPd/v363odJn9wWFSXlHW9uJbej3FwgJwd44AHVkZAe
KlWSH+h6PzUz6ZPbyraScxWPvlJSZG2+j4/qSEgv3qjrM+mTR3hrEsrOkpOllEbWFR0NbNsG/Pab
fvdwaJq3z20pJwiHAwYIg9xw8iTQsCFQUCB9ecizTpwAGjWScwyqVVMdDempXz/54T5kyK1f60ru
5EifPKJWLaBDBzZg00tqKvDQQ0z4dqD3UzOTPnkMSzz6YWnHPnr3Blav1q8BG5M+eUzfvmzApoez
Z4FVqyQZkPXVrSubHlet0uf6TPrkMUFBUndev151JNayZg3QqhVQr57qSMhbEhKAJUv0uTaTPnlU
v376vVntiqUd+4mPlyXQejw1M+mTR5WNULgYyzNKS2V9ft++qiMhb2rYEAgO1uepmUmfPCo8XFaY
bN6sOhJr+P57Kes0aaI6EvI2vUo8TPrkUQ6HlHgWL1YdiTUsXixfT7KfhAQp7Xn6qZlJnzwuIUGS
FUs87tE0YNEiIDFRdSSkQni4HHy/ZYtnr8ukTx4XGSk99vfsUR2JuW3bBlSuDLRsqToSUsHh0KfE
w6RPHqfXm9Vuykb57J1vX0z6ZBqs67uP9Xxq3x44dQr4+WfPXZNJn3TxwAPA4cPS/50qbs8e4PRp
+aYn+6pUSX7wL1rkwWt67lJEl/n4yLF+LPG4ZvFiebSvxO9Q2+vfH1iwwHPX41uKdJOY6NkRip1w
1Q6VeeABaam9b59nrsekT7rp1k3KFPn5qiMxl4MH5WvGYxEJkBVcnizxMOmTbm67Tc785Gi/YhYv
lrYLlSurjoSMwpMlHiZ90tWjj3q2HmkHCxdy1Q5d7cEHZWHEwYPuX4tJn3QVEwPs2iXHKNKtHTok
tdvoaNWRkJH4+EjnTU88NTPpk65Y4qmYBQtk1Y6vr+pIyGg89dTMpE+6e/RRYP581VGYw/z5wIAB
qqMgI4qKAvbvl6dBdzDpk+5Y4nHOgQOymS0qSnUkZES+vjLB7+5TM5M+6a5KFZZ4nLFggazN9/FR
HQkZ1YAB7j81u5z0jx8/jpiYGDRt2hTdu3fHyZMny31dcHAwWrVqhbZt2+K+++5zOVAyN67iubV5
81jaoZt7+GF5IjxwwPVruJz0J0yYgJiYGOzduxfR0dGYMGFCua9zOBxIT09HVlYWMjMzXQ6UzK2s
xJOXpzoSY8rOlvLXgw+qjoSMzNdX1uzPnev6NVxO+ikpKRg6dCgAYOjQoUhOTr7hazWepmF7VarI
qpR581RHYkwLFsg3Mzdk0a0MGuRe0ne5elhYWAh/f38AgL+/PwoLC8t9ncPhQLdu3VC5cmWMGDEC
zzzzTLmvGzt27KX/joqKQhRnsywnKQkYMwYYPVp1JMYzbx7wr3+pjoKMLj09Hd9+m45Dh4AXX3Tt
GjdN+jExMTh69Oh1f/72229f9XuHwwHHDU562LBhAxo0aIBff/0VMTExCAsLQ5cuXa573ZVJn6wp
KkoaR/38M9CsmepojGP3buC334DOnVVHQkZXNiD+4w/g9tsBYFyFr3HTpL9q1aob/p2/vz+OHj2K
+vXr48iRI/Dz8yv3dQ0aNAAA1KtXDwkJCcjMzCw36ZP1Va4MDBwIzJkD8Gf8ZbNmAY89xtIOOS8p
yfVJf5dr+nFxcZgxYwYAYMaMGYiPj7/uNcXFxTh9+jQA4I8//sDKlSvRkgd+2tpjjwGzZ/PQ9DIX
L0rSHzxYdSRkJu3auX7WgstJ//XXX8eqVavQtGlTrFmzBq+//joAoKCgAL169QIAHD16FF26dEGb
Nm3QoUMH9O7dG927d3f1lmQBkZGS6LZsUR2JMWzYAFSvDrRqpToSMhOHQ0b7Ln2uZoClNQ6Hgyt8
bORvfwOKioB331UdiXrPPQcEBwP/HTMROW3PHiAiouK5k0mfvG7PHukimZtr7zr2uXNAQACwdSvQ
sKHqaMiMXMmdbMNAXhceDtSvD6Snq45ErRUrgObNmfDJu5j0SYknngBmzlQdhVqcwCUVWN4hJX75
BWjaVEo8d96pOhrvO3kSaNRIumrWrq06GjIrlnfINPz8gK5d7duEbeFCmddgwidvY9InZYYNAz7/
XHUUakyfLv9+Im9jeYeUOX8eCAwENm4EQkJUR+M9e/ZIi9zcXPbOJ/ewvEOmctttskP3vxu7bWP6
dGDoUCZc1LS0AAAJ8UlEQVR8UoMjfVJq2zYgLk4mNF3dVm4mFy4AQUHA2rVsOkfu40ifTKdNG6Bu
XeDbb1VH4h3LlwOhoUz4pA6TPin35JNS8rCD//wHGD5cdRRkZyzvkHLHjgFNmgD79gF33aU6Gv0U
FMgO3NxcabJG5C6Wd8iU6taVur7Vl2/OnAkkJjLhk1oc6ZMhbNokrRn27rXmhO7Fi7ID+YsvgI4d
VUdDVsGRPpnW/ffLCPibb1RHoo+vvwZq1JB/J5FKTPpkCA6H9JafOlV1JPr48ENg5Ej5dxKpxPIO
Gcbp09KEbOdO6TNvFfv3ywj/8GHgjjtUR0NWwvIOmdqddwKDBgGffqo6Es+aOlX67DDhkxFwpE+G
snMn8MgjskPX11d1NO4rLpZDUn74AbjnHtXRkNVwpE+m17KlNF9btEh1JJ4xZw7QqRMTPhkHkz4Z
zquvApMmAWZ/+NM0YMoUmcAlMgomfTKcXr2AP/6QpmRmtm6dlHe6dVMdCdFlTPpkOJUqAaNHA++8
ozoS90yYALz2mjU3m5F5cSKXDOnsWSA4GFizBoiIUB1NxW3bBvTuLcs1q1RRHQ1ZFSdyyTJuvx14
8UXg3XdVR+KaCROAUaOY8Ml4ONInwzp2THrP794N1K+vOhrn7dsn/XUOHJC9B0R64UifLKVuXTlO
8b33VEdSMZMmAc8/z4RPxsSRPhlaXh7QurWM9v39VUdzawUFQIsWwM8/A/XqqY6GrM6V3MmkT4b3
yivy6/vvq43DGaNHyzm4H3ygOhKyAyZ9sqSjR+XEqW3b5FBxozp8GGjbFvjxR6BBA9XRkB0w6ZNl
vf46cPIk8PHHqiO5sWHDpDvoW2+pjoTsgkmfLOvYMaBZMyAzE2jcWHU019u5U3beZmfLYSlE3sDV
O2RZdetKD5tx41RHUr433pAPJnwyOo70yTROnQLCwoCUFKB9e9XRXLZ+PTBkCPDTT9yMRd7FkT5Z
Ws2astP1hReA0lLV0YiLF4ExY6SOz4RPZsCkT6YyZIi0aDDK6Vr//rf8mpSkNg4iZ7G8Q6azY4dM
mu7apXYDVEEB0KaNNIVr0UJdHGRfXL1DtjFqlBykXjbSViExUfYP/OMf6mIge2PSJ9v4/XcgPByY
PRvo2tX791+yBPjLX2TD2O23e//+RAAncslGatSQuv4TT8gafm86dQp46SW5PxM+mQ1H+mRqr74K
7N0LLF0KOBz630/TgP79pdXzhx/qfz+im+FIn2xn/HjpzeOtBmcTJgD5+eY93IWII30yvQMHgPvv
B1asAO69V7/7rFwJPPmktIIIDNTvPkTO4kifbKlxY2DqVCA+Xs6k1cPBgzJ/MHcuEz6Zm4/qAIg8
ITER+PVXWb+/bp1nWzDn5wOxscD//i/w4IOeuy6RCkz6ZBnPPQecOQNER0vi98S5uvv3AzExcvzh
Sy+5fz0i1VjeMZj09HTVIRiGK1+LUaOkVUN0tLQ5dseuXbIHYMwY4LXX3LuWu/i+uIxfC/e4nPQX
LFiA5s2bo3Llyti6desNX5eWloawsDCEhoZi4sSJrt7ONviGvszVr8Vf/ypN2Tp1AmbMkGWWFaFp
UruPjpbVOs8951IYHsX3xWX8WrjH5aTfsmVLLFmyBA/epMhZWlqKkSNHIi0tDbt378acOXOwZ88e
V29J5BSHA3jxRemJM2mSNEP75RfnPnffPqBHD1kKumQJMHiwvrESeZvLST8sLAxNmza96WsyMzMR
EhKC4OBg+Pr6YtCgQVi6dKmrtySqkJYtgR9+kPNqmzaVTVUrVlzflvn33yXBP/OMLP3s3h3YsgXo
2FFN3ES60twUFRWlbdmypdy/W7Bggfb0009f+v0XX3yhjRw58rrXAeAHP/jBD3648FFRN129ExMT
g6NHj1735+PHj0efPn1u9qkAZOOAMzRuzCIi8oqbJv1Vq1a5dfGAgADk5uZe+n1ubi4CubOFiEgZ
jyzZvNFIPTIyEtnZ2cjJycH58+cxb948xMXFeeKWRETkApeT/pIlSxAUFISMjAz06tULPXv2BAAU
FBSgV69eAAAfHx9MmTIFPXr0QEREBAYOHIjw8HDPRE5ERBVX4VkAD1uxYoXWrFkzLSQkRJswYYLq
cJQ5fPiwFhUVpUVERGjNmzfXJk+erDokpUpKSrQ2bdpovXv3Vh2KcidOnNASExO1sLAwLTw8XNu0
aZPqkJQZP368FhERobVo0UJLSkrSzp49qzokrxk2bJjm5+entWjR4tKfHTt2TOvWrZsWGhqqxcTE
aCdOnLjldZTuyOU6/st8fX3x3nvvYdeuXcjIyMCHH35o268FAEyePBkRERFOLwawsj/96U+IjY3F
nj17sGPHDts+Lefk5ODTTz/F1q1bsXPnTpSWlmLu3Lmqw/KaYcOGIS0t7ao/mzBhAmJiYrB3715E
R0djwoQJt7yO0qTPdfyX1a9fH23atAEAVK9eHeHh4SgoKFAclRp5eXlITU3F008/bfuVXadOncL6
9esxfPhwAFIyrVmzpuKo1KhRowZ8fX1RXFyMkpISFBcXIyAgQHVYXtOlSxfUrl37qj9LSUnB0KFD
AQBDhw5FcnLyLa+jNOnn5+cj6Ip2iIGBgcjPz1cYkTHk5OQgKysLHTp0UB2KEqNGjcKkSZNQqRJb
Qx08eBD16tXDsGHD0K5dOzzzzDMoLi5WHZYSderUwejRo9GwYUPcfffdqFWrFrp166Y6LKUKCwvh
7+8PAPD390dhYeEtP0fpdxUf3a9XVFSE/v37Y/LkyahevbrqcLzuq6++gp+fH9q2bWv7UT4AlJSU
YOvWrXjhhRewdetWVKtWzalHeCvav38/3n//feTk5KCgoABFRUWYNWuW6rAMw+FwOJVTlSZ9ruO/
2oULF5CYmIjBgwcjPj5edThKbNy4ESkpKbjnnnuQlJSENWvWYMiQIarDUiYwMBCBgYFo3749AKB/
//43bXBoZZs3b0anTp1Qt25d+Pj4oF+/fti4caPqsJTy9/e/tIH2yJEj8PPzu+XnKE36XMd/maZp
eOqppxAREYFXXnlFdTjKjB8/Hrm5uTh48CDmzp2Lhx9+GDNnzlQdljL169dHUFAQ9u7dCwBYvXo1
mjdvrjgqNcLCwpCRkYEzZ85A0zSsXr0aERERqsNSKi4uDjNmzAAAzJgxw7nBol7Li5yVmpqqNW3a
VGvSpIk2fvx41eEos379es3hcGitW7fW2rRpo7Vp00ZbsWKF6rCUSk9P1/r06aM6DOW2bdumRUZG
aq1atdISEhK0kydPqg5JmYkTJ15asjlkyBDt/PnzqkPymkGDBmkNGjTQfH19tcDAQG369OnasWPH
tOjo6Aot2TTEwehEROQdXB5BRGQjTPpERDbCpE9EZCNM+kRENsKkT0RkI0z6REQ28v8ujsxbbCsI
oAAAAABJRU5ErkJggg==
"></img>
</div>
</div>
</div>
</div>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can do pretty much anything else a notebook does as well.  The IPython team did the hard part.</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h2 class="ipynb">
  Where to go from here?
</h2>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>There&#8217;s clearly a cleaner way to do this.  If the IPython team would be open to the idea, I think their HTML stylesheets should be modified so that notebooks can be embedded within any CSS framework with as few conflicts as possible.  This means getting rid of all top-level formatting in the style-sheets, and removing potentially common class names like &#8220;highlight&#8221;.  Once this is done, <code>nbconvert.py</code> could output this directly, obviating the need for my unforgivable hack shown above.</p>
<p>Second, I&#8217;d love to build notebook support directly into octopress.  If <code>nbconvert.py</code> is available on the user&#8217;s system, it could be called directly from the Ruby script that generates Octopress HTML.  I have about as much experience with Ruby as I do with Swahili (read: None) so this would take some work for me.  I&#8217;d be happy to pass the baton to any Octopress gurus out there&#8230;</p>
<p>Either of those options will smooth out the notebook/blogging combo considerably, and give me the potential to prognosticate Python in perpetuum.
By the way, the notebook used to generate this page can be downloaded <a href="http://jakevdp.github.com/downloads/notebooks/nb_in_octopress.ipynb">here</a>.  Happy coding!</p>
</div>

</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Optical Illusions in Matplotlib]]></title>
    <link href="http://jakevdp.github.com/blog/2012/09/26/optical-illusions-in-matplotlib/"/>
    <updated>2012-09-26T07:27:00-07:00</updated>
    <id>http://jakevdp.github.com/blog/2012/09/26/optical-illusions-in-matplotlib</id>
    <content type="html"><![CDATA[<p>A while ago I posted some information on the new matplotlib animation
package (see my tutorial
<a href="http://jakevdp.github.com/blog/2012/08/18/matplotlib-animation-tutorial">here</a> and
a followup post <a href="http://jakevdp.github.com/blog/2012/09/05/quantum-python">here</a>).  In them, I show
how easy it is to  use matplotlib to create simple animations.</p>

<p>This morning I came across this cool optical illusion on
<a href="http://gizmodo.com/5945194/this-optical-trick-is-annoying-the-hell-out-of-me">gizmodo</a></p>

<!-- more -->


<p><a href="http://gizmodo.com/5945194/this-optical-trick-is-annoying-the-hell-out-of-me"><img src="http://jakevdp.github.com/images/original_illusion.gif"></a></p>

<p>It intrigued me, so I decided to see if I could create it using matplotlib.
Using my previous template and a bit of geometry, I was able to finish it
before breakfast!  Here&#8217;s the code:</p>

<figure class='code'><figcaption><span>Optical Illusion (animate_square.py)</span> <a href='http://jakevdp.github.com/downloads/code/animate_square.py'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
</pre></td><td class='code'><pre><code class='py'><span class='line'><span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">Optical Illusion in Matplotlib</span>
</span><span class='line'>
</span><span class='line'><span class="sd">author: Jake Vanderplas</span>
</span><span class='line'><span class="sd">email: vanderplas@astro.washington.edu</span>
</span><span class='line'><span class="sd">website: http://jakevdp.github.com</span>
</span><span class='line'><span class="sd">license: BSD</span>
</span><span class='line'><span class="sd">Please feel free to use and modify this, but keep the above information.</span>
</span><span class='line'><span class="sd">Thanks!</span>
</span><span class='line'><span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">animation</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">matplotlib.patches</span> <span class="kn">import</span> <span class="n">RegularPolygon</span>
</span><span class='line'>
</span><span class='line'><span class="c"># First set up the figure, the axis, and the plot element we want to animate</span>
</span><span class='line'><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span class='line'><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">),</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">),</span> <span class="n">aspect</span><span class="o">=</span><span class="s">&#39;equal&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Add lines and patches</span>
</span><span class='line'><span class="n">lines</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;black&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">squares</span> <span class="o">=</span> <span class="p">[</span><span class="n">RegularPolygon</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">y</span><span class="p">),</span>
</span><span class='line'>                          <span class="mi">4</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;black&#39;</span><span class="p">)</span>
</span><span class='line'>           <span class="k">for</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)]]</span>
</span><span class='line'><span class="k">for</span> <span class="n">sq</span> <span class="ow">in</span> <span class="n">squares</span><span class="p">:</span>
</span><span class='line'>    <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">sq</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># initialization function: plot the background of each frame</span>
</span><span class='line'><span class="k">def</span> <span class="nf">init</span><span class="p">():</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
</span><span class='line'>        <span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">([],</span> <span class="p">[])</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">sq</span> <span class="ow">in</span> <span class="n">squares</span><span class="p">:</span>
</span><span class='line'>        <span class="n">sq</span><span class="o">.</span><span class="n">set_alpha</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">lines</span> <span class="o">+</span> <span class="n">squares</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># animation function.  This is called sequentially</span>
</span><span class='line'><span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
</span><span class='line'>    <span class="c"># Set transparency level for squares</span>
</span><span class='line'>    <span class="n">level</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">-</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mf">0.005</span> <span class="o">*</span> <span class="n">i</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
</span><span class='line'>    <span class="n">level</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>    <span class="n">level</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">sq</span> <span class="ow">in</span> <span class="n">squares</span><span class="p">:</span>
</span><span class='line'>        <span class="n">sq</span><span class="o">.</span><span class="n">set_alpha</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Set location for lines</span>
</span><span class='line'>    <span class="n">s</span> <span class="o">=</span> <span class="mf">0.6</span>
</span><span class='line'>    <span class="n">d1</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">0.05</span> <span class="o">*</span> <span class="n">i</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
</span><span class='line'>    <span class="n">d2</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mf">0.05</span> <span class="o">*</span> <span class="n">i</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_data</span><span class="p">([(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">d1</span> <span class="o">-</span> <span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
</span><span class='line'>                      <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">d1</span> <span class="o">+</span> <span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)],</span>
</span><span class='line'>                     <span class="p">[(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">d1</span> <span class="o">+</span> <span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
</span><span class='line'>                      <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">d1</span> <span class="o">-</span> <span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)])</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_data</span><span class="p">([(</span><span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="n">d1</span> <span class="o">-</span> <span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
</span><span class='line'>                      <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="n">d1</span> <span class="o">+</span> <span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)],</span>
</span><span class='line'>                     <span class="p">[(</span><span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="n">d1</span> <span class="o">+</span> <span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
</span><span class='line'>                      <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="n">d1</span> <span class="o">-</span> <span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)])</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">lines</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_data</span><span class="p">([(</span><span class="o">-</span><span class="mi">1</span> <span class="o">-</span> <span class="n">d2</span> <span class="o">-</span> <span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
</span><span class='line'>                      <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">-</span> <span class="n">d2</span> <span class="o">+</span> <span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)],</span>
</span><span class='line'>                     <span class="p">[(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">d2</span> <span class="o">-</span> <span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
</span><span class='line'>                      <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">d2</span> <span class="o">+</span> <span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)])</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">set_data</span><span class="p">([(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">d2</span> <span class="o">-</span> <span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
</span><span class='line'>                      <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">d2</span> <span class="o">+</span> <span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)],</span>
</span><span class='line'>                     <span class="p">[(</span><span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="n">d2</span> <span class="o">-</span> <span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
</span><span class='line'>                      <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="n">d2</span> <span class="o">+</span> <span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)])</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">lines</span> <span class="o">+</span> <span class="n">squares</span>
</span><span class='line'>
</span><span class='line'><span class="c"># call the animator.  blit=True means only re-draw parts that have changed.</span>
</span><span class='line'><span class="n">anim</span> <span class="o">=</span> <span class="n">animation</span><span class="o">.</span><span class="n">FuncAnimation</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">animate</span><span class="p">,</span> <span class="n">init_func</span><span class="o">=</span><span class="n">init</span><span class="p">,</span>
</span><span class='line'>                               <span class="n">frames</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">28</span><span class="p">,</span> <span class="n">blit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># save the animation as an mp4.  This requires ffmpeg or mencoder to be</span>
</span><span class='line'><span class="c"># installed.  The extra_args ensure that the x264 codec is used, so that</span>
</span><span class='line'><span class="c"># the video can be embedded in html5.  You may need to adjust this for</span>
</span><span class='line'><span class="c"># your system: for more information, see</span>
</span><span class='line'><span class="c"># http://matplotlib.sourceforge.net/api/animation_api.html</span>
</span><span class='line'><span class="c">#anim.save(&#39;basic_animation.mp4&#39;, fps=30, extra_args=[&#39;-vcodec&#39;, &#39;libx264&#39;])</span>
</span><span class='line'>
</span><span class='line'><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>And here&#8217;s the result:</p>

<p><video width='360' height='270' preload='none' controls poster=' /downloads/videos/animate_square.png'><source src='http://jakevdp.github.com/downloads/videos/animate_square.mp4' type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'/></video></p>

<p>This just confirms my suspicion that a few lines of python really can do
anything.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Why Python is the Last Language You'll Have To Learn]]></title>
    <link href="http://jakevdp.github.com/blog/2012/09/20/why-python-is-the-last/"/>
    <updated>2012-09-20T20:50:00-07:00</updated>
    <id>http://jakevdp.github.com/blog/2012/09/20/why-python-is-the-last</id>
    <content type="html"><![CDATA[<p>This week, for part of a textbook I&#8217;m helping to write,
I spent some time reading and researching the history of Python as
a scientific computing tool.  I had heard bits and pieces of this in the past,
but it was fascinating to put it all together and learn about how all the
individual contributions that have made Python what it is today.
All of this got me thinking: for most of us, Python was a replacement for
something: IDL, MatLab, Java, Mathematica, Perl&#8230; you name it.
But what will replace Python?
Ten years down the road, what language will people be espousing in
blogs with awkwardly-alliterated titles?  As I thought it through, I
became more and more convinced that, at least in the scientific computing
world, Python is here to stay.</p>

<!-- more -->


<p>Now I’m not simply talking about inertia.  Javascript has inertia, and that&#8217;s
a main reason that web admins still begrudgingly use it.  But Python is
different.  Yes, it&#8217;s everywhere, and yes, something so ubiquitous is
hard to shake.  But look at the 1970s: punch card programming was
everywhere, and now it&#8217;s nothing but a footnote. Inertia can be overcome
with time.  But I think Python’s hold is much deeper than that: I think it
will remain relevant long into the future.  Here’s why:</p>

<h2>GitHub</h2>

<p>The first reason Python will be around for a while is
<a href="http://github.com">GitHub</a>.  GitHub has done wonders both for Python
and for the broader open source community.
It has replaced the clunky Trac system of
submitting static patches to projects, and removed the contribution barrier
for the core scientific python projects.  Numpy, Scipy, and Matplotlib were
all moved to GitHub in late 2010, and the results have been impressive.
I did some quick data mining of the commit logs on GitHub to learn
about the rate of new author contributions to core python projects with
time, and this is what I found:</p>

<p><img src="http://jakevdp.github.com/figures/author_count.png" width="600" title="[Cumulative number of contributors for python packages]" ></p>

<p>See it? The late 2010 transition to GitHub is extremely apparent,
and this reflects the first reason that NumPy, SciPy, Matplotlib,
and Python will remain relevant far into the future.
Python not only has an astoundingly large user-base; thanks to GitHub,
it has an astoundingly large and ever-increasing <em>developer</em> base.
And that means Python is well-poised to evolve as the needs of users change.</p>

<h2>Julia</h2>

<p>The second reason Python will be around for a while is
<a href="http://julialang.org/">Julia</a>.  This statement may strike some as strange:
Julia is a
language which aims to improve on many of Python’s weaknesses.
It uses JIT compilation and efficient built-in array
support to beat Python on nearly every benchmark.  It seems a likely
candidate to <em>replace</em> Python, not a support for my assertion that Python will
remain relevant. But this is the thing: Python’s strength lies in community,
and that community is incredibly difficult to replicate.</p>

<p>A recent
<a href="https://groups.google.com/forum/?fromgroups=#!topic/julia-dev/YftOOEfcwrk">thread</a>
on the julia-dev list highlights what I’m talking about:
in it, Dag Seljebotn, a core developer of Cython, contrasts the
strengths of Python (large user- and developer-base, large collection of
libraries) with the strengths of Julia (state-of-the-art performance,
JIT compilation).  He
proposes that the two languages should work together, each drawing from the
strengths of the other.  The response from the Julia community was incredibly
positive.</p>

<p>The Julia developers know that Julia can’t succeed as a scientific
computing platform without building an active community, and currently the
best way to do that is to work hand-in-hand with Python.  After this thread
on julia-dev, the Julia  developers were invited to give
<a href="http://pyvideo.org/video/1204/julia-a-fast-dynamic-language-for-technical-comp">a talk</a>
at the Scipy2012 conference,
and I think many would say that some good bridges were built.
I&#8217;m extremely excited about the prospects of Julia as a scientific computing
platform, but it will only succeed if it can embrace Python, and if Python
can embrace it.</p>

<h2>The next Travis Oliphant</h2>

<p>The third reason Python will be around for a while is this: <em>there will be
another Travis Oliphant</em>.  What do I mean by this?  Well, if you go back
ten years or so, the Python scientific community was looking a bit weak.
Numeric was a
well-established array interface, and the beginnings of SciPy were built
upon it.  But Numeric was clunky, so some folks got together and built
Numarray.  Numarray fixed some of the problems, but had its own weaknesses.
The biggest problem, though, was that it split the community:
when the core of your platform has divided allegiances, neither side wins.
Travis realized this, and against the advice of many, audaciously set out
on a quest to unify the two.  The result was NumPy, which is now the
unrivaled basis for nearly all scientific tools in Python.</p>

<p>Python faces a similar crisis today: it is split in the area of
High-performance and parallel computing.  There is an alphabet soup of
packages which aim to address this:
Cython, PyPy, Theano, Numba, Numexpr, and more.  But
here’s the thing: someone <em>will</em> come along who has the audacity to strike
out and unify them.  I love this recent tweet by Dave Warde-Farley:</p>

<p><a href="http://twitter.com/dwf/status/246756226367643650"><img src="http://jakevdp.github.com/images/dwf_tweet.png" width="400" title="[Cumulative number of contributors for python packages]" ></a></p>

<p>Somebody is going to do this: somebody will be the next Travis Oliphant
and create NumTron to re-unite the community.
Maybe Dave will be the next Travis Oliphant: he&#8217;s done some great work on
<a href="http://deeplearning.net/software/theano/">Theano</a>.
But then again, the merging of Python and LLVM in Travis&#8217;
<a href="http://numba.pydata.org/">Numba</a> project is
<a href="http://jakevdp.github.com/blog/2012/08/24/numba-vs-cython/">pretty exciting</a>:
maybe Travis Oliphant will be the next Travis Oliphant &#8211;
he’s done it before, after all.  Or perhaps it will be someone
we’ve never heard of, who as we speak is brewing a new idea in
an unwatched GitHub repository. Time will tell,
but I’m confident that it will happen.</p>

<h2>Conclusion</h2>

<p>Maybe I’ve convinced you, maybe I haven’t.  But I’m going to continue using
Python, and I predict you will too.  We&#8217;ll see what the future holds for
scientific computing, but in my mind, Python remains a pretty solid bet.</p>

<p><em>Finally, a brief post-script on the history of Python:
some of the most interesting sources I found were
<a href="http://www.artima.com/intv/pythonP.html">this interview</a> with Guido Van Rossum,
the official <a href="http://www.scipy.org/History_of_SciPy">Scipy history page</a>, the
<a href="http://pyvideo.org/video/1192/matplotlib-lessons-from-middle-age-or-how-you">Scipy2012 talk</a>
John Hunter gave this summer shortly before his sudden passing,
and the <a href="http://mail.scipy.org/pipermail/numpy-discussion/2012-February/060640.html">numpy-discussion post</a>
John referenced in his talk.  If you use Python regularly and have some
time, I’d highly recommend browsing these: it’s incredible to see
how the unwavering vision of folks throughout the years has led to what we
have today: an unmatched open-source environment for scientific computing.</em></p>

<p><em>Edit: also check out the
<a href="http://python-history.blogspot.com/">History of Python</a> blog.  Thanks to
Fernando for the tip</em></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Dynamic Programming in Python: Bayesian Blocks]]></title>
    <link href="http://jakevdp.github.com/blog/2012/09/12/dynamic-programming-in-python/"/>
    <updated>2012-09-12T19:02:00-07:00</updated>
    <id>http://jakevdp.github.com/blog/2012/09/12/dynamic-programming-in-python</id>
    <content type="html"><![CDATA[<p>Of all the programming styles I have learned,
<a href="http://en.wikipedia.org/wiki/Dynamic_programming">dynamic programming</a>
is perhaps the most beautiful.  It can take problems that, at first glance,
look ugly and intractable, and solve the problem with clean, concise code.
Where a simplistic algorithm might accomplish something by brute force,
dynamic programming steps back, breaks the task into a smaller set of
sequential parts, and then proceeds in the most efficient way possible.</p>

<h3>Bayesian Blocks</h3>

<p>I&#8217;ll go through an example here where the ideas of dynamic programming
are vital to some very cool data analysis resuts.
This post draws heavily from a recent
<a href="http://adsabs.harvard.edu/abs/2012arXiv1207.5578S">paper</a> by Jeff Scargle
and collaborators (this is the Scargle of <em>Lomb-Scargle Periodogram</em>
fame), as well as some conversations I had with Jeff at
<a href="http://www.astro.caltech.edu/ai12/">Astroinformatics 2012</a>.
The paper discusses
a framework called <em>Bayesian Blocks</em>, which is essentially a method of
creating histograms with bin sizes that adapt to the data (there&#8217;s a bit
more to it than that: here we&#8217;ll focus on histograms for simplicity).</p>

<!-- more -->


<p>To motivate this, let&#8217;s take a look at the histogram of some sampled data.
We&#8217;ll create a complicated set of random data in the following way:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># Define our test distribution: a mix of Cauchy-distributed variables</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
</span><span class='line'>
</span><span class='line'><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">stats</span><span class="o">.</span><span class="n">cauchy</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mf">1.8</span><span class="p">)</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span>
</span><span class='line'>                    <span class="n">stats</span><span class="o">.</span><span class="n">cauchy</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">)</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="mi">2000</span><span class="p">),</span>
</span><span class='line'>                    <span class="n">stats</span><span class="o">.</span><span class="n">cauchy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span>
</span><span class='line'>                    <span class="n">stats</span><span class="o">.</span><span class="n">cauchy</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">)</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span>
</span><span class='line'>                    <span class="n">stats</span><span class="o">.</span><span class="n">cauchy</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="mi">500</span><span class="p">)])</span>
</span><span class='line'>
</span><span class='line'><span class="c"># truncate values to a reasonable range</span>
</span><span class='line'><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">[(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">15</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">)]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now what does this distribution look like?  We can plot a histogram to find
out:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">pylab</span> <span class="kn">as</span> <span class="nn">pl</span>
</span><span class='line'><span class="n">pl</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><img src="http://jakevdp.github.com/figures/bayesblocks1.png" title="[Simple Histogram of our Distribution]" ></p>

<p>Not too informative.  The default bins in <code>matplotlib</code> are too wide for this
dataset.  We might be able to do better by increasing the number of bins:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">pl</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><img src="http://jakevdp.github.com/figures/bayesblocks2.png" title="[More Detailed Histogram of our Distribution]" ></p>

<p>This is better.  But having to choose the bin width each time we plot a
distribution is not only tiresome, it may lead to missing some important
information in our data.  In a perfect world, we&#8217;d like for
the bin width to be learned in an automated fashion, based on the
properties of the data itself.
There have been many rules-of-thumb proposed for this task
(look up <em>Scott&#8217;s Rule</em>, <em>Knuth&#8217;s Rule</em>, the <em>Freedman-Diaconis Rule</em>,
and others in your favorite statistics text).
But all these rules of thumb share a disadvantage: they make the assumption
that all the bins are the same size.  This is not necessarily optimal.  But
can we do better?</p>

<p>Scargle and collaborators showed that the answer is yes.  This is their insight:
For a set of histogram bins or <em>blocks</em>, each of an arbitrary size,
one can use a Bayesian
likelihood framework to compute a <em>fitness function</em> which only depends on
two numbers: the width of each block, and the number of points in each block.
The edges between these blocks (the <em>change-points</em>) can be varied, and
the overall block configuration with the maximum fitness is quantitatively
the best binning.</p>

<p>Simple, right?</p>

<p>Well, no.  The problem is, as the number of points N grows large, the number
of possible configurations grows as 2<sup>N</sup> .  For N=300 points, there are already
more possible configurations than the number of subatomic particles in the
observable universe!  Clearly an exhaustive search will fail in cases of
interest.  This is where <em>dynamic programming</em> comes to the rescue.</p>

<h3>Dynamic Programming</h3>

<p>Dynamic programming is very similar to mathematical proof by induction. By
way of example, consider the formula</p>

<p>$1 + 2 + \cdots + n = \frac{n(n+1)}{2}$.</p>

<p>How could you prove that this is true for all positive integers $n$?
An inductive proof of this formula proceeds in the following fashion:</p>

<ol>
<li><p><strong>Base Case</strong>: We can easily show that the formula holds for $n = 1$.</p></li>
<li><p><strong>Inductive Step</strong>: For some value $k$, assume that
$1 + 2 + \cdots + k = \frac{k(k+1)}{2}$ holds.
Adding $(k + 1)$ to each side and rearranging the result yields
$1 + 2 + \cdots + k + (k + 1) = \frac{(k + 1)(k + 2)}{2}$.  Looking
closely at this, we see that we have shown the following:
if our formula is true for $k$, then it must be true for $k + 1$.</p></li>
<li>By 1 and 2, we can show that the formula is true for any positive integer
$n$, simply by starting at $n=1$ and repeating the inductive step
$n - 1$ times.</li>
</ol>


<p>Dynamic programming proceeds in much the same vein.  In our Bayesian Blocks
example, we can easily find the optimal binning for a single point.  By
making use of some mathematical proofs concerning the fitness functions,
we can devise a simple step from the optimal binning for $k$ points to the
optimal binning for $k + 1$ points (the details can be found in the
appendices of the
<a href="http://adsabs.harvard.edu/abs/2012arXiv1207.5578S">Scargle paper</a>).
In this way, Scargle and collaborators showed that the 2<sup>N</sup> possible states
can be explored in N<sup>2</sup> time.</p>

<h3>The Algorithm</h3>

<p>The resulting algorithm is deceptively simple, but it can be proven to converge
to the single best configuration among the 2<sup>N</sup> possibilities.  Below is the
basic code written in python.  Note that there are a few details that are
missing from this version (e.g. priors on the number of bins, other forms
of fitness functions, etc.) but this gets the basic job done:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">bayesian_blocks</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;Bayesian Blocks Implementation</span>
</span><span class='line'>
</span><span class='line'><span class="sd">    By Jake Vanderplas.  License: BSD</span>
</span><span class='line'><span class="sd">    Based on algorithm outlined in http://adsabs.harvard.edu/abs/2012arXiv1207.5578S</span>
</span><span class='line'>
</span><span class='line'><span class="sd">    Parameters</span>
</span><span class='line'><span class="sd">    ----------</span>
</span><span class='line'><span class="sd">    t : ndarray, length N</span>
</span><span class='line'><span class="sd">        data to be histogrammed</span>
</span><span class='line'>
</span><span class='line'><span class="sd">    Returns</span>
</span><span class='line'><span class="sd">    -------</span>
</span><span class='line'><span class="sd">    bins : ndarray</span>
</span><span class='line'><span class="sd">        array containing the (N+1) bin edges</span>
</span><span class='line'>
</span><span class='line'><span class="sd">    Notes</span>
</span><span class='line'><span class="sd">    -----</span>
</span><span class='line'><span class="sd">    This is an incomplete implementation: it may fail for some</span>
</span><span class='line'><span class="sd">    datasets.  Alternate fitness functions and prior forms can</span>
</span><span class='line'><span class="sd">    be found in the paper listed above.</span>
</span><span class='line'><span class="sd">    &quot;&quot;&quot;</span>
</span><span class='line'>    <span class="c"># copy and sort the array</span>
</span><span class='line'>    <span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span class='line'>    <span class="n">N</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">size</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># create length-(N + 1) array of cell edges</span>
</span><span class='line'>    <span class="n">edges</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">t</span><span class="p">[:</span><span class="mi">1</span><span class="p">],</span>
</span><span class='line'>                            <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">+</span> <span class="n">t</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span>
</span><span class='line'>                            <span class="n">t</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]])</span>
</span><span class='line'>    <span class="n">block_length</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">edges</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># arrays needed for the iteration</span>
</span><span class='line'>    <span class="n">nn_vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</span><span class='line'>    <span class="n">best</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
</span><span class='line'>    <span class="n">last</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#-----------------------------------------------------------------</span>
</span><span class='line'>    <span class="c"># Start with first data cell; add one cell at each iteration</span>
</span><span class='line'>    <span class="c">#-----------------------------------------------------------------</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">K</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
</span><span class='line'>        <span class="c"># Compute the width and count of the final bin for all possible</span>
</span><span class='line'>        <span class="c"># locations of the K^th changepoint</span>
</span><span class='line'>        <span class="n">width</span> <span class="o">=</span> <span class="n">block_length</span><span class="p">[:</span><span class="n">K</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">block_length</span><span class="p">[</span><span class="n">K</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'>        <span class="n">count_vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">nn_vec</span><span class="p">[:</span><span class="n">K</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][::</span><span class="o">-</span><span class="mi">1</span><span class="p">])[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># evaluate fitness function for these possibilities</span>
</span><span class='line'>        <span class="n">fit_vec</span> <span class="o">=</span> <span class="n">count_vec</span> <span class="o">*</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">count_vec</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">width</span><span class="p">))</span>
</span><span class='line'>        <span class="n">fit_vec</span> <span class="o">-=</span> <span class="mi">4</span>  <span class="c"># 4 comes from the prior on the number of changepoints</span>
</span><span class='line'>        <span class="n">fit_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">+=</span> <span class="n">best</span><span class="p">[:</span><span class="n">K</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># find the max of the fitness: this is the K^th changepoint</span>
</span><span class='line'>        <span class="n">i_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">fit_vec</span><span class="p">)</span>
</span><span class='line'>        <span class="n">last</span><span class="p">[</span><span class="n">K</span><span class="p">]</span> <span class="o">=</span> <span class="n">i_max</span>
</span><span class='line'>        <span class="n">best</span><span class="p">[</span><span class="n">K</span><span class="p">]</span> <span class="o">=</span> <span class="n">fit_vec</span><span class="p">[</span><span class="n">i_max</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#-----------------------------------------------------------------</span>
</span><span class='line'>    <span class="c"># Recover changepoints by iteratively peeling off the last block</span>
</span><span class='line'>    <span class="c">#-----------------------------------------------------------------</span>
</span><span class='line'>    <span class="n">change_points</span> <span class="o">=</span>  <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
</span><span class='line'>    <span class="n">i_cp</span> <span class="o">=</span> <span class="n">N</span>
</span><span class='line'>    <span class="n">ind</span> <span class="o">=</span> <span class="n">N</span>
</span><span class='line'>    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
</span><span class='line'>        <span class="n">i_cp</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span class='line'>        <span class="n">change_points</span><span class="p">[</span><span class="n">i_cp</span><span class="p">]</span> <span class="o">=</span> <span class="n">ind</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">ind</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>            <span class="k">break</span>
</span><span class='line'>        <span class="n">ind</span> <span class="o">=</span> <span class="n">last</span><span class="p">[</span><span class="n">ind</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'>    <span class="n">change_points</span> <span class="o">=</span> <span class="n">change_points</span><span class="p">[</span><span class="n">i_cp</span><span class="p">:]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">edges</span><span class="p">[</span><span class="n">change_points</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>The details of the step from $K$ to $K + 1$ may be a bit confusing from this
implementation: it boils down to the fact that Scargle <em>et al.</em> were able to
show that given an optimal configuration of $K$ points, the $(K + 1)$<sup>th</sup>
configuration is limited to one of $K$ possibilities.</p>

<p>The function as written above takes a sequence of points, and returns the
edges of the optimal bins.  We&#8217;ll visualize the result on top of the histogram
we saw earlier:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># plot a standard histogram in the background, with alpha transparency</span>
</span><span class='line'><span class="n">H1</span> <span class="o">=</span> <span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="s">&#39;stepfilled&#39;</span><span class="p">,</span>
</span><span class='line'>          <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'><span class="c"># plot an adaptive-width histogram on top</span>
</span><span class='line'><span class="n">H2</span> <span class="o">=</span> <span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bayesian_blocks</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;black&#39;</span><span class="p">,</span>
</span><span class='line'>          <span class="n">histtype</span><span class="o">=</span><span class="s">&#39;step&#39;</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><img src="http://jakevdp.github.com/figures/bayesblocks3.png" title="[Adaptive Histogram of our Distribution]" ></p>

<p>The adaptive-width bins lead to a very clean representation of the important
features in the data.  More importantly, these bins are quantifiably optimal,
and their properties can be used to make quantitative statistical
statements about the nature of the data.  This type of procedure has proven
very useful in analysis of time-series data in Astronomy.</p>

<h3>Conclusion</h3>

<p>We&#8217;ve just scratched the surface of Bayesian Blocks and Dynamic Programming.
Some of the more interesting details of this algorithm require much more
depth: the appendicies of the
<a href="http://adsabs.harvard.edu/abs/2012arXiv1207.5578S">Scargle paper</a>
provide these details.  Dynamic Programming ideas have been shown to be
useful in many optimization problems.  One other example I&#8217;ve worked with
extensively is
<a href="http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm">Dijkstra&#8217;s Algorithm</a>
for computing the shortest paths on a connected graph.  This is available in
the <a href="http://docs.scipy.org/doc/scipy/reference/tutorial/csgraph.html">scipy.sparse.csgraph</a>
submodule, which is included in the most recent release of scipy.</p>

<p>The above python implementation of Bayesian Blocks
is an extremely basic form of the algorithm: I plan to include some
more sophisticated options in the python package I&#8217;m currently
working on, called <em>astroML: Machine Learning for Astrophysics</em>.
I&#8217;ll release version 0.1 of astroML at the end of October 2012,
in time to present it at <a href="http://c3.nasa.gov/dashlink/events/1/">CIDU 2012</a>.
If you&#8217;re interested, I&#8217;ll have updates here on the blog, as well as on
my <a href="http://twitter.com/jakevdp">twitter feed</a>.</p>

<p><em>Update: astroML version 0.1 has been released: see the web site
<a href="http://astroML.github.com">here</a>.  It includes a full-featured Bayesian
blocks implementation with histogram tools, which you can read about
<a href="http://astroml.github.com/user_guide/density_estimation.html#bayesian-blocks-histograms-the-right-way">here</a>.</em></p>

<p>Finally, all of the above code snippets are available as an ipython
notebook: <a href="http://jakevdp.github.com/downloads/notebooks/bayesian_blocks.ipynb">bayesian_blocks.ipynb</a>.
For information on how to view this file, see the
<a href="http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html">IPython page</a>.
Alternatively, you can view this notebook (but not modify it) using the
nbviewer utility <a href="http://nbviewer.ipython.org/url/jakevdp.github.com/downloads/notebooks/bayesian_blocks.ipynb">here</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Quantum Python: Animating the Schrodinger Equation]]></title>
    <link href="http://jakevdp.github.com/blog/2012/09/05/quantum-python/"/>
    <updated>2012-09-05T20:12:00-07:00</updated>
    <id>http://jakevdp.github.com/blog/2012/09/05/quantum-python</id>
    <content type="html"><![CDATA[<p><em>Update: a reader contributed some improvements to the Python code presented
 below.  Please see the
<a href="https://github.com/jakevdp/pySchrodinger">pySchrodinger</a> github repository
for updated code</em></p>

<p>In a <a href="http://jakevdp.github.com/blog/2012/08/18/matplotlib-animation-tutorial/">previous post</a>
I explored the new animation capabilities of the latest
<a href="http://matplotlib.sourceforge.net">matplotlib</a> release.
It got me wondering whether it would be possible to simulate more complicated
physical systems in real time in python.  Quantum Mechanics was the first
thing that came to mind.  It turns out that by mixing a bit of Physics
knowledge with a bit of computing knowledge, it&#8217;s quite straightforward
to simulate and animate a simple quantum mechanical system with python.</p>

<h2>The Schrodinger Equation</h2>

<p>The dynamics of a one-dimensional quantum system are governed by the
time-dependent Schrodinger equation:</p>

<div markdown="0">\[
i\hbar\frac{\partial \psi}{\partial t}
  = \frac{-\hbar^2}{2m} \frac{\partial^2 \psi}{\partial x^2} + V \psi
\]</div>




<!-- more -->


<p>The <em>wave function</em> $\psi$ is a function of both position $x$ and time $t$,
and is the fundamental description of the realm of the very small.
Imagine we are following the motion of a single particle in one
dimension.  This wave function represents a probability of measuring
the particle at a position $x$ at a time $t$. Quantum mechanics tells us that
(contrary to our familiar classical reasoning) this probability is not
a limitation of our knowledge of the system, but a reflection of an
unavoidable uncertainty about the position and time of events in the realm
of the very small.</p>

<p>Still, this equation is a bit opaque, but to visualize the results we&#8217;ll need
to solve this numerically.  We&#8217;ll approach this using the split-step Fourier
method.</p>

<h2>The Split-step Fourier Method</h2>

<p>A standard way to numerically solve certain differential equations is
through the use of the Fourier transform.  We&#8217;ll use a Fourier convention
of the following form:</p>

<div markdown="0">\[
\widetilde{\psi}(k, t) = \frac{1}{\sqrt{2\pi}}
  \int_{-\infty}^{\infty} \psi(x, t) e^{-ikx} dx
\]</div>


<p>Under this convention, the associated inverse Fourier Transform is given by:</p>

<div markdown="0">\[
\psi(x, t) = \frac{1}{\sqrt{2\pi}}
  \int_{-\infty}^{\infty} \widetilde{\psi}(k, t) e^{ikx} dk
\]</div>


<p>Substituting this into the Schrodinger equation and simplifying gives the
Fourier-space form of the Schrodinger equation:</p>

<div markdown="0">\[
i\hbar\frac{\partial \widetilde{\psi}}{\partial t}
  = \frac{\hbar^2 k^2}{2m} \widetilde{\psi}
  + V(i\frac{\partial}{\partial k})\widetilde{\psi}
\]</div>


<p>The two versions of the Schrodinger equation contain an interesting symmetry:
the time step in each case depends on a straightforward multiplication of
the wave function $\psi$, as well as a more complicated term involving
derivatives with respect to $x$ or $k$.  The key observation is that while
the equation is difficult to evaluate fully within one of the forms, each
basis offers a straightforward calculation of one of the two contributions.
This suggests an efficient strategy to numerically solve the Schrodinger
Equation.</p>

<p>First we solve the straightforward part of the $x$-space Schrodinger
equation:</p>

<div markdown="0">\[
i\hbar\frac{\partial \psi}{\partial t}
  = V(x) \psi
\]</div>


<p>For a small time step $\Delta t$, this has a solution of the form</p>

<div markdown="0">\[
\psi(x, t + \Delta t) = \psi(x, t) e^{-i V(x) \Delta t / \hbar}
\]</div>


<p>Second, we solve the straightforward part of the $k$-space Schrodinger
equation:</p>

<div markdown="0">\[
i\hbar\frac{\partial \widetilde{\psi}}{\partial t}
  = \frac{\hbar^2 k^2}{2 m} \widetilde{\psi}
\]</div>


<p>For a small time step $\Delta t$, this has a solution of the form</p>

<div markdown="0">\[
\widetilde{\psi}(k, t + \Delta t)
    = \widetilde{\psi}(k, t) e^{-i \hbar k^2 \Delta t / 2m}
\]</div>


<h2>Numerical Considerations</h2>

<p>Solving this system numerically will require repeated computations of the
Fourier transform of $\psi(x, t)$ and the inverse Fourier transform of
$\widetilde{\psi}(k, t)$.  The best-known algorithm for computation of
numerical Fourier transforms is the Fast Fourier Transform (FFT), which
is <a href="http://docs.scipy.org/doc/scipy/reference/fftpack.html">available in scipy</a>
and efficiently computes the following form of the
discrete Fourier transform:</p>

<div markdown="0">\[
  \widetilde{F}_m = \sum_{n=0}^{N-1} F_n e^{-2\pi i n m / N}
\]</div>


<p>and its inverse</p>

<div markdown="0">\[
  F_n = \frac{1}{N} \sum_{m=0}^{N-1} \widetilde{F}_m e^{2\pi i n m / N}
\]</div>


<p>We need to know how these relate to the continuous Fourier transforms defined
and used above.  Let&#8217;s take the example of the forward transform.  Assume that
the infinite integral is well-approximated by the finite integral from
$a$ to $b$, so that we can write</p>

<div markdown="0">\[
\widetilde{\psi}(k, t) = \frac{1}{\sqrt{2\pi}}
   \int_a^b \psi(x, t) e^{-ikx} dx
\]</div>


<p>This approximation ends up being equivalent to assuming that the potential
$V(x) \to \infty$ at $x \le a$ and $x \ge b$.  We&#8217;ll now approximate this
integral as a Riemann sum of $N$ terms, and define $\Delta x = (b - a) / N$,
and $x_n = a + n\Delta x$:</p>

<div markdown="0">\[
\widetilde{\psi}(k, t) \simeq \frac{1}{\sqrt{2\pi}}
   \sum_{n=0}^{N-1} \psi(x_n, t) e^{-ikx_n} \Delta x
\]</div>


<p>This is starting to look like the discrete Fourier transform!  To bring it
even closer, let&#8217;s define $k_m = k_0 + m\Delta k$, with
$\Delta k = 2\pi / (N\Delta x)$.  Then our approximation becomes</p>

<div markdown="0">\[
\widetilde{\psi}(k_m, t) \simeq \frac{1}{\sqrt{2\pi}}
   \sum_{n=0}^{N-1} \psi(x_n, t) e^{-ik_m x_n} \Delta x
\]</div>


<p>(Note that just as we have limited the range of $x$ above, we have here limited
the range of $k$ as well.  This means that high-frequency components of the
signal will be lost in our approximation.  The Nyquist sampling theorem tells
us that this is an unavoidable consequence of choosing discrete steps in
space, and it can be shown that the spacing we chose above exactly satisfies
the Nyquist limit if we choose $k_0 = - \pi / \Delta x$).</p>

<p>Plugging our expressions for $x_n$ and $k_m$ into the Fourier
approximation and rearranging, we find the following:</p>

<div markdown="0">\[
\left[\widetilde{\psi}(k_m, t) e^{i m x_0 \Delta k}\right]
   \simeq \sum_{n=0}^{N-1} 
   \left[ \frac{\Delta x}{\sqrt{2\pi}}
   \psi(x_n, t) e^{-ik_0 x_n} \right]
   e^{-2\pi i m n / N}
\]</div>


<p>Similar arguments from the inverse Fourier transform yield:</p>

<div markdown="0">\[
\left[\frac{\Delta x}{\sqrt{2 \pi}} \psi(x_n, t) e^{-i k_0 x_n}\right]
   \simeq \frac{1}{N} \sum_{m=0}^{N-1} 
   \left[\widetilde{\psi}(k_m, t) e^{-i m x_0 \Delta k} \right]
   e^{2\pi i m n / N}
\]</div>


<p>Comparing these to the discrete Fourier transforms above, we find that the
<em>continuous</em> Fourier pair</p>

<div markdown="0">\[
   \psi(x, t) \Longleftrightarrow \widetilde{\psi}(k, t)
\]</div>


<p>corresponds to the <em>discrete</em> Fourier pair</p>

<div markdown="0">\[
   \frac{\Delta x}{\sqrt{2 \pi}} \psi(x_n, t) e^{-i k_0 x_n}
   \Longleftrightarrow
   \widetilde{\psi}(k_m, t) e^{-i m x_0 \Delta k}
\]</div>


<p>subject to the approximations mentioned above.  This allows a fast numerical
evaluation of the Schrodinger equation.</p>

<h2>Putting It All Together: the Algorithm</h2>

<p>We now put this all together using the following algorithm</p>

<ol>
<li><p>Choose $a$, $b$, $N$, and $k_0$ as above, sufficient to represent the
initial state of your wave function $\psi(x)$. (<strong>Warning:</strong> this is perhaps
the hardest part of the entire solution. If limits in $x$ or $k$ are chosen
which do not suit your problem, then the approximations used above can
destroy the accuracy of the calculation!)  Once these are chosen, then
$\Delta x = (b - a) / N$ and $\Delta k = 2\pi / (b - a)$.  Define
$x_n = a + n \Delta x$ and $k_m = k_0 + m \Delta k$.</p></li>
<li><p>Discretize the wave-functions on this grid.  Let $\psi_n(t) = \psi(x_n, t)$,
$V_n = V(x_n)$, and $\widetilde{\psi}_m = \widetilde{\psi}(k_m, t)$.</p></li>
<li><p>To progress the system by a time-step $\Delta t$, perform the following:</p>

<ol>
<li><p>Compute a half-step in $x$:
$\psi_n \longleftarrow \psi_n
 \exp[-i (\Delta t / 2) (V_n / \hbar)]$</p></li>
<li><p>Calculate $\widetilde{\psi}_m$ from $\psi_n$ using the FFT.</p></li>
<li><p>Compute a full-step in $k$:
$\widetilde{\psi}_m \longleftarrow \widetilde{\psi}_m
\exp[-i \hbar (k \cdot k) \Delta t / (2 m)]$</p></li>
<li><p>Calculate $\psi_n$ from $\widetilde{\psi}_m$ using the inverse FFT.</p></li>
<li><p>Compute a second half-step in $x$:
$\psi_n \longleftarrow \psi_n
 \exp[-i (\Delta t / 2)(V_n / \hbar)]$</p></li>
</ol>
</li>
<li><p>Repeat step 3 until the desired time is reached.</p></li>
</ol>


<p>Note that we have split the $x$-space time-step into two half-steps: this
turns out to lead to a more stable numerical solution than performing
the step all at once. Those familiar with numerical integration
algorithms may recognize this as an example of the
well-known leap-frog integration technique.</p>

<p>To test this out, I&#8217;ve written a python code which sets up a particle in a
box with a potential barrier.  The barrier is high enough that a classical
particle would be unable to penetrate it.  A quantum particle, however, can
&#8220;tunnel&#8221; through, leading to a non-zero probability of finding the particle
on the other side of the partition.  This quantum tunneling effect lies at
the core of technologies as diverse as electron microsopy, semiconding diodes,
and perhaps even the future of low-powered transistors.</p>

<p>The animation of the result is below (for a brief introduction to the animation
capabilities of python, see
<a href="http://jakevdp.github.com/blog/2012/08/18/matplotlib-animation-tutorial/">this post</a>).
The top panel shows the position-space wave function, while the bottom panel
shows the momentum-space wave function.</p>

<p><video width='360' height='270' preload='none' controls poster=' /downloads/videos/schrodinger_barrier_frame.png'><source src='http://jakevdp.github.com/downloads/videos/schrodinger_barrier.mp4' type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'/></video></p>

<p>Notice that the height of the potential barrier (denoted by the dashed line in
the bottom panel) is far larger than the energy of the particle.  Still, due
to quantum effects, a small part of the wave function is able to tunnel through
the barrier and reach the other side.</p>

<p>The python code used to generate this animation is included below.  It&#8217;s pretty
long, but I&#8217;ve tried to comment extensively to make the algorithm more clear.
If you&#8217;re so inclined, you might try running the example and adjusting the
potential or the input wave function to see the effect on the dynamics of
the quantum system.</p>

<figure class='code'><figcaption><span>Schrodinger (schrodinger.py)</span> <a href='http://jakevdp.github.com/downloads/code/schrodinger.py'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
<span class='line-number'>191</span>
<span class='line-number'>192</span>
<span class='line-number'>193</span>
<span class='line-number'>194</span>
<span class='line-number'>195</span>
<span class='line-number'>196</span>
<span class='line-number'>197</span>
<span class='line-number'>198</span>
<span class='line-number'>199</span>
<span class='line-number'>200</span>
<span class='line-number'>201</span>
<span class='line-number'>202</span>
<span class='line-number'>203</span>
<span class='line-number'>204</span>
<span class='line-number'>205</span>
<span class='line-number'>206</span>
<span class='line-number'>207</span>
<span class='line-number'>208</span>
<span class='line-number'>209</span>
<span class='line-number'>210</span>
<span class='line-number'>211</span>
<span class='line-number'>212</span>
<span class='line-number'>213</span>
<span class='line-number'>214</span>
<span class='line-number'>215</span>
<span class='line-number'>216</span>
<span class='line-number'>217</span>
<span class='line-number'>218</span>
<span class='line-number'>219</span>
<span class='line-number'>220</span>
<span class='line-number'>221</span>
<span class='line-number'>222</span>
<span class='line-number'>223</span>
<span class='line-number'>224</span>
<span class='line-number'>225</span>
<span class='line-number'>226</span>
<span class='line-number'>227</span>
<span class='line-number'>228</span>
<span class='line-number'>229</span>
<span class='line-number'>230</span>
<span class='line-number'>231</span>
<span class='line-number'>232</span>
<span class='line-number'>233</span>
<span class='line-number'>234</span>
<span class='line-number'>235</span>
<span class='line-number'>236</span>
<span class='line-number'>237</span>
<span class='line-number'>238</span>
<span class='line-number'>239</span>
<span class='line-number'>240</span>
<span class='line-number'>241</span>
<span class='line-number'>242</span>
<span class='line-number'>243</span>
<span class='line-number'>244</span>
<span class='line-number'>245</span>
<span class='line-number'>246</span>
<span class='line-number'>247</span>
<span class='line-number'>248</span>
<span class='line-number'>249</span>
<span class='line-number'>250</span>
<span class='line-number'>251</span>
<span class='line-number'>252</span>
<span class='line-number'>253</span>
<span class='line-number'>254</span>
<span class='line-number'>255</span>
<span class='line-number'>256</span>
<span class='line-number'>257</span>
<span class='line-number'>258</span>
<span class='line-number'>259</span>
<span class='line-number'>260</span>
<span class='line-number'>261</span>
<span class='line-number'>262</span>
<span class='line-number'>263</span>
<span class='line-number'>264</span>
<span class='line-number'>265</span>
<span class='line-number'>266</span>
<span class='line-number'>267</span>
<span class='line-number'>268</span>
<span class='line-number'>269</span>
<span class='line-number'>270</span>
<span class='line-number'>271</span>
<span class='line-number'>272</span>
<span class='line-number'>273</span>
<span class='line-number'>274</span>
<span class='line-number'>275</span>
<span class='line-number'>276</span>
<span class='line-number'>277</span>
<span class='line-number'>278</span>
<span class='line-number'>279</span>
<span class='line-number'>280</span>
<span class='line-number'>281</span>
<span class='line-number'>282</span>
<span class='line-number'>283</span>
<span class='line-number'>284</span>
<span class='line-number'>285</span>
<span class='line-number'>286</span>
<span class='line-number'>287</span>
<span class='line-number'>288</span>
<span class='line-number'>289</span>
<span class='line-number'>290</span>
<span class='line-number'>291</span>
<span class='line-number'>292</span>
<span class='line-number'>293</span>
<span class='line-number'>294</span>
<span class='line-number'>295</span>
<span class='line-number'>296</span>
<span class='line-number'>297</span>
<span class='line-number'>298</span>
<span class='line-number'>299</span>
<span class='line-number'>300</span>
<span class='line-number'>301</span>
<span class='line-number'>302</span>
<span class='line-number'>303</span>
<span class='line-number'>304</span>
<span class='line-number'>305</span>
<span class='line-number'>306</span>
<span class='line-number'>307</span>
<span class='line-number'>308</span>
<span class='line-number'>309</span>
</pre></td><td class='code'><pre><code class='py'><span class='line'><span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">General Numerical Solver for the 1D Time-Dependent Schrodinger&#39;s equation.</span>
</span><span class='line'>
</span><span class='line'><span class="sd">author: Jake Vanderplas</span>
</span><span class='line'><span class="sd">email: vanderplas@astro.washington.edu</span>
</span><span class='line'><span class="sd">website: http://jakevdp.github.com</span>
</span><span class='line'><span class="sd">license: BSD</span>
</span><span class='line'><span class="sd">Please feel free to use and modify this, but keep the above information. Thanks!</span>
</span><span class='line'><span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">pl</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">animation</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">scipy.fftpack</span> <span class="kn">import</span> <span class="n">fft</span><span class="p">,</span><span class="n">ifft</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Schrodinger</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">    Class which implements a numerical solution of the time-dependent</span>
</span><span class='line'><span class="sd">    Schrodinger equation for an arbitrary potential</span>
</span><span class='line'><span class="sd">    &quot;&quot;&quot;</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">psi_x0</span><span class="p">,</span> <span class="n">V_x</span><span class="p">,</span>
</span><span class='line'>                 <span class="n">k0</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">hbar</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">t0</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">        Parameters</span>
</span><span class='line'><span class="sd">        ----------</span>
</span><span class='line'><span class="sd">        x : array_like, float</span>
</span><span class='line'><span class="sd">            length-N array of evenly spaced spatial coordinates</span>
</span><span class='line'><span class="sd">        psi_x0 : array_like, complex</span>
</span><span class='line'><span class="sd">            length-N array of the initial wave function at time t0</span>
</span><span class='line'><span class="sd">        V_x : array_like, float</span>
</span><span class='line'><span class="sd">             length-N array giving the potential at each x</span>
</span><span class='line'><span class="sd">        k0 : float</span>
</span><span class='line'><span class="sd">            the minimum value of k.  Note that, because of the workings of the</span>
</span><span class='line'><span class="sd">            fast fourier transform, the momentum wave-number will be defined</span>
</span><span class='line'><span class="sd">            in the range</span>
</span><span class='line'><span class="sd">              k0 &lt; k &lt; 2*pi / dx</span>
</span><span class='line'><span class="sd">            where dx = x[1]-x[0].  If you expect nonzero momentum outside this</span>
</span><span class='line'><span class="sd">            range, you must modify the inputs accordingly.  If not specified,</span>
</span><span class='line'><span class="sd">            k0 will be calculated such that the range is [-k0,k0]</span>
</span><span class='line'><span class="sd">        hbar : float</span>
</span><span class='line'><span class="sd">            value of planck&#39;s constant (default = 1)</span>
</span><span class='line'><span class="sd">        m : float</span>
</span><span class='line'><span class="sd">            particle mass (default = 1)</span>
</span><span class='line'><span class="sd">        t0 : float</span>
</span><span class='line'><span class="sd">            initial tile (default = 0)</span>
</span><span class='line'><span class="sd">        &quot;&quot;&quot;</span>
</span><span class='line'>        <span class="c"># Validation of array inputs</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">psi_x0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">V_x</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">psi_x0</span><span class="p">,</span> <span class="n">V_x</span><span class="p">))</span>
</span><span class='line'>        <span class="n">N</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">size</span>
</span><span class='line'>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">N</span><span class="p">,)</span>
</span><span class='line'>        <span class="k">assert</span> <span class="n">psi_x0</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">N</span><span class="p">,)</span>
</span><span class='line'>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">V_x</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">N</span><span class="p">,)</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># Set internal parameters</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">hbar</span> <span class="o">=</span> <span class="n">hbar</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">=</span> <span class="n">m</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">t</span> <span class="o">=</span> <span class="n">t0</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">dt_</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">dx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">dk</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">N</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">dx</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># set momentum scale</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">k0</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">k0</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">N</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">dk</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">k0</span> <span class="o">=</span> <span class="n">k0</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">k</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">k0</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dk</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">N</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">psi_x</span> <span class="o">=</span> <span class="n">psi_x0</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">compute_k_from_x</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># variables which hold steps in evolution of the</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">x_evolve_half</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">x_evolve</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">k_evolve</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># attributes used for dynamic plotting</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">psi_x_line</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">psi_k_line</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">V_x_line</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_set_psi_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">psi_x</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">psi_mod_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">psi_x</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mi">1j</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
</span><span class='line'>                          <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">dx</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_get_psi_x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">psi_mod_x</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mi">1j</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
</span><span class='line'>                <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">dx</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_set_psi_k</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">psi_k</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">psi_mod_k</span> <span class="o">=</span> <span class="n">psi_k</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mi">1j</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>                                        <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">dk</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">N</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_get_psi_k</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">psi_mod_k</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mi">1j</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span>
</span><span class='line'>                                        <span class="bp">self</span><span class="o">.</span><span class="n">dk</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">N</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_get_dt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dt_</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_set_dt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">dt</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dt_</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">dt_</span> <span class="o">=</span> <span class="n">dt</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">x_evolve_half</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="mi">1j</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">V_x</span>
</span><span class='line'>                                         <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">hbar</span> <span class="o">*</span> <span class="n">dt</span> <span class="p">)</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">x_evolve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_evolve_half</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_evolve_half</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">k_evolve</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="mi">1j</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">hbar</span> <span class="o">/</span>
</span><span class='line'>                                    <span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">k</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="p">)</span> <span class="o">*</span> <span class="n">dt</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">psi_x</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_psi_x</span><span class="p">,</span> <span class="n">_set_psi_x</span><span class="p">)</span>
</span><span class='line'>    <span class="n">psi_k</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_psi_k</span><span class="p">,</span> <span class="n">_set_psi_k</span><span class="p">)</span>
</span><span class='line'>    <span class="n">dt</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_dt</span><span class="p">,</span> <span class="n">_set_dt</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">compute_k_from_x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">psi_mod_k</span> <span class="o">=</span> <span class="n">fft</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">psi_mod_x</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">compute_x_from_k</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">psi_mod_x</span> <span class="o">=</span> <span class="n">ifft</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">psi_mod_k</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">time_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">Nsteps</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">        Perform a series of time-steps via the time-dependent</span>
</span><span class='line'><span class="sd">        Schrodinger Equation.</span>
</span><span class='line'>
</span><span class='line'><span class="sd">        Parameters</span>
</span><span class='line'><span class="sd">        ----------</span>
</span><span class='line'><span class="sd">        dt : float</span>
</span><span class='line'><span class="sd">            the small time interval over which to integrate</span>
</span><span class='line'><span class="sd">        Nsteps : float, optional</span>
</span><span class='line'><span class="sd">            the number of intervals to compute.  The total change</span>
</span><span class='line'><span class="sd">            in time at the end of this method will be dt * Nsteps.</span>
</span><span class='line'><span class="sd">            default is N = 1</span>
</span><span class='line'><span class="sd">        &quot;&quot;&quot;</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">dt</span> <span class="o">=</span> <span class="n">dt</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="n">Nsteps</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">psi_mod_x</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_evolve_half</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">Nsteps</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">compute_k_from_x</span><span class="p">()</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">psi_mod_k</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">k_evolve</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">compute_x_from_k</span><span class="p">()</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">psi_mod_x</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_evolve</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">compute_k_from_x</span><span class="p">()</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">psi_mod_k</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">k_evolve</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">compute_x_from_k</span><span class="p">()</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">psi_mod_x</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_evolve_half</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">compute_k_from_x</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">t</span> <span class="o">+=</span> <span class="n">dt</span> <span class="o">*</span> <span class="n">Nsteps</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">######################################################################</span>
</span><span class='line'><span class="c"># Helper functions for gaussian wave-packets</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">gauss_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">k0</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">    a gaussian wave packet of width a, centered at x0, with momentum k0</span>
</span><span class='line'><span class="sd">    &quot;&quot;&quot;</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">((</span><span class="n">a</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span> <span class="o">**</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span>
</span><span class='line'>            <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.</span> <span class="o">/</span> <span class="n">a</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1j</span> <span class="o">*</span> <span class="n">x</span> <span class="o">*</span> <span class="n">k0</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">gauss_k</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">x0</span><span class="p">,</span><span class="n">k0</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">    analytical fourier transform of gauss_x(x), above</span>
</span><span class='line'><span class="sd">    &quot;&quot;&quot;</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">((</span><span class="n">a</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span><span class="o">**</span><span class="mf">0.5</span>
</span><span class='line'>            <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="n">k0</span><span class="p">))</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1j</span> <span class="o">*</span> <span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="n">k0</span><span class="p">)</span> <span class="o">*</span> <span class="n">x0</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">######################################################################</span>
</span><span class='line'><span class="c"># Utility functions for running the animation</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">theta</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">    theta function :</span>
</span><span class='line'><span class="sd">      returns 0 if x&lt;=0, and 1 if x&gt;0</span>
</span><span class='line'><span class="sd">    &quot;&quot;&quot;</span>
</span><span class='line'>    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span class='line'>    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</span><span class='line'>    <span class="n">y</span><span class="p">[</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">y</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">square_barrier</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">height</span> <span class="o">*</span> <span class="p">(</span><span class="n">theta</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="n">theta</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">width</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="c">######################################################################</span>
</span><span class='line'><span class="c"># Create the animation</span>
</span><span class='line'>
</span><span class='line'><span class="c"># specify time steps and duration</span>
</span><span class='line'><span class="n">dt</span> <span class="o">=</span> <span class="mf">0.01</span>
</span><span class='line'><span class="n">N_steps</span> <span class="o">=</span> <span class="mi">50</span>
</span><span class='line'><span class="n">t_max</span> <span class="o">=</span> <span class="mi">120</span>
</span><span class='line'><span class="n">frames</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">t_max</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">N_steps</span> <span class="o">*</span> <span class="n">dt</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="c"># specify constants</span>
</span><span class='line'><span class="n">hbar</span> <span class="o">=</span> <span class="mf">1.0</span>   <span class="c"># planck&#39;s constant</span>
</span><span class='line'><span class="n">m</span> <span class="o">=</span> <span class="mf">1.9</span>      <span class="c"># particle mass</span>
</span><span class='line'>
</span><span class='line'><span class="c"># specify range in x coordinate</span>
</span><span class='line'><span class="n">N</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">11</span>
</span><span class='line'><span class="n">dx</span> <span class="o">=</span> <span class="mf">0.1</span>
</span><span class='line'><span class="n">x</span> <span class="o">=</span> <span class="n">dx</span> <span class="o">*</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">N</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">N</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># specify potential</span>
</span><span class='line'><span class="n">V0</span> <span class="o">=</span> <span class="mf">1.5</span>
</span><span class='line'><span class="n">L</span> <span class="o">=</span> <span class="n">hbar</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">m</span> <span class="o">*</span> <span class="n">V0</span><span class="p">)</span>
</span><span class='line'><span class="n">a</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">L</span>
</span><span class='line'><span class="n">x0</span> <span class="o">=</span> <span class="o">-</span><span class="mi">60</span> <span class="o">*</span> <span class="n">L</span>
</span><span class='line'><span class="n">V_x</span> <span class="o">=</span> <span class="n">square_barrier</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">V0</span><span class="p">)</span>
</span><span class='line'><span class="n">V_x</span><span class="p">[</span><span class="n">x</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">98</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1E6</span>
</span><span class='line'><span class="n">V_x</span><span class="p">[</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">98</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1E6</span>
</span><span class='line'>
</span><span class='line'><span class="c"># specify initial momentum and quantities derived from it</span>
</span><span class='line'><span class="n">p0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">m</span> <span class="o">*</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="n">V0</span><span class="p">)</span>
</span><span class='line'><span class="n">dp2</span> <span class="o">=</span> <span class="n">p0</span> <span class="o">*</span> <span class="n">p0</span> <span class="o">*</span> <span class="mf">1.</span><span class="o">/</span><span class="mi">80</span>
</span><span class='line'><span class="n">d</span> <span class="o">=</span> <span class="n">hbar</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">dp2</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">k0</span> <span class="o">=</span> <span class="n">p0</span> <span class="o">/</span> <span class="n">hbar</span>
</span><span class='line'><span class="n">v0</span> <span class="o">=</span> <span class="n">p0</span> <span class="o">/</span> <span class="n">m</span>
</span><span class='line'><span class="n">psi_x0</span> <span class="o">=</span> <span class="n">gauss_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">k0</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># define the Schrodinger object which performs the calculations</span>
</span><span class='line'><span class="n">S</span> <span class="o">=</span> <span class="n">Schrodinger</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
</span><span class='line'>                <span class="n">psi_x0</span><span class="o">=</span><span class="n">psi_x0</span><span class="p">,</span>
</span><span class='line'>                <span class="n">V_x</span><span class="o">=</span><span class="n">V_x</span><span class="p">,</span>
</span><span class='line'>                <span class="n">hbar</span><span class="o">=</span><span class="n">hbar</span><span class="p">,</span>
</span><span class='line'>                <span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="p">,</span>
</span><span class='line'>                <span class="n">k0</span><span class="o">=-</span><span class="mi">28</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c">######################################################################</span>
</span><span class='line'><span class="c"># Set up plot</span>
</span><span class='line'><span class="n">fig</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c"># plotting limits</span>
</span><span class='line'><span class="n">xlim</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</span><span class='line'><span class="n">klim</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># top axes show the x-space data</span>
</span><span class='line'><span class="n">ymin</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'><span class="n">ymax</span> <span class="o">=</span> <span class="n">V0</span>
</span><span class='line'><span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">,</span> <span class="n">xlim</span><span class="o">=</span><span class="n">xlim</span><span class="p">,</span>
</span><span class='line'>                      <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="n">ymin</span> <span class="o">-</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="p">(</span><span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span><span class="p">),</span>
</span><span class='line'>                            <span class="n">ymax</span> <span class="o">+</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="p">(</span><span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span><span class="p">)))</span>
</span><span class='line'><span class="n">psi_x_line</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">([],</span> <span class="p">[],</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">r&#39;$|\psi(x)|$&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">V_x_line</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">([],</span> <span class="p">[],</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">r&#39;$V(x)$&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">center_line</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;:&#39;</span><span class="p">,</span>
</span><span class='line'>                          <span class="n">label</span> <span class="o">=</span> <span class="s">r&quot;$x_0 + v_0t$&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">title</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">prop</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">))</span>
</span><span class='line'><span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;$x$&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">r&#39;$|\psi(x)|$&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># bottom axes show the k-space data</span>
</span><span class='line'><span class="n">ymin</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">psi_k</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
</span><span class='line'><span class="n">ymax</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">psi_k</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</span><span class='line'><span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">,</span> <span class="n">xlim</span><span class="o">=</span><span class="n">klim</span><span class="p">,</span>
</span><span class='line'>                      <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="n">ymin</span> <span class="o">-</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="p">(</span><span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span><span class="p">),</span>
</span><span class='line'>                            <span class="n">ymax</span> <span class="o">+</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="p">(</span><span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span><span class="p">)))</span>
</span><span class='line'><span class="n">psi_k_line</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">([],</span> <span class="p">[],</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">r&#39;$|\psi(k)|$&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">p0_line1</span> <span class="o">=</span> <span class="n">ax2</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="o">-</span><span class="n">p0</span> <span class="o">/</span> <span class="n">hbar</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">r&#39;$\pm p_0$&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">p0_line2</span> <span class="o">=</span> <span class="n">ax2</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">p0</span> <span class="o">/</span> <span class="n">hbar</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;:&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">mV_line</span> <span class="o">=</span> <span class="n">ax2</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">V0</span><span class="p">)</span> <span class="o">/</span> <span class="n">hbar</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="p">,</span>
</span><span class='line'>                      <span class="n">label</span><span class="o">=</span><span class="s">r&#39;$\sqrt{2mV_0}$&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">prop</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">))</span>
</span><span class='line'><span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;$k$&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">r&#39;$|\psi(k)|$&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">V_x_line</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">S</span><span class="o">.</span><span class="n">V_x</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c">######################################################################</span>
</span><span class='line'><span class="c"># Animate plot</span>
</span><span class='line'><span class="k">def</span> <span class="nf">init</span><span class="p">():</span>
</span><span class='line'>    <span class="n">psi_x_line</span><span class="o">.</span><span class="n">set_data</span><span class="p">([],</span> <span class="p">[])</span>
</span><span class='line'>    <span class="n">V_x_line</span><span class="o">.</span><span class="n">set_data</span><span class="p">([],</span> <span class="p">[])</span>
</span><span class='line'>    <span class="n">center_line</span><span class="o">.</span><span class="n">set_data</span><span class="p">([],</span> <span class="p">[])</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">psi_k_line</span><span class="o">.</span><span class="n">set_data</span><span class="p">([],</span> <span class="p">[])</span>
</span><span class='line'>    <span class="n">title</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">(</span><span class="n">psi_x_line</span><span class="p">,</span> <span class="n">V_x_line</span><span class="p">,</span> <span class="n">center_line</span><span class="p">,</span> <span class="n">psi_k_line</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
</span><span class='line'>    <span class="n">S</span><span class="o">.</span><span class="n">time_step</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">N_steps</span><span class="p">)</span>
</span><span class='line'>    <span class="n">psi_x_line</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">psi_x</span><span class="p">))</span>
</span><span class='line'>    <span class="n">V_x_line</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">S</span><span class="o">.</span><span class="n">V_x</span><span class="p">)</span>
</span><span class='line'>    <span class="n">center_line</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="p">[</span><span class="n">x0</span> <span class="o">+</span> <span class="n">S</span><span class="o">.</span><span class="n">t</span> <span class="o">*</span> <span class="n">p0</span> <span class="o">/</span> <span class="n">m</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">psi_k_line</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">k</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">psi_k</span><span class="p">))</span>
</span><span class='line'>    <span class="n">title</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="s">&quot;t = </span><span class="si">%.2f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">S</span><span class="o">.</span><span class="n">t</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">(</span><span class="n">psi_x_line</span><span class="p">,</span> <span class="n">V_x_line</span><span class="p">,</span> <span class="n">center_line</span><span class="p">,</span> <span class="n">psi_k_line</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># call the animator.  blit=True means only re-draw the parts that have changed.</span>
</span><span class='line'><span class="n">anim</span> <span class="o">=</span> <span class="n">animation</span><span class="o">.</span><span class="n">FuncAnimation</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">animate</span><span class="p">,</span> <span class="n">init_func</span><span class="o">=</span><span class="n">init</span><span class="p">,</span>
</span><span class='line'>                               <span class="n">frames</span><span class="o">=</span><span class="n">frames</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">blit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># uncomment the following line to save the video in mp4 format.  This</span>
</span><span class='line'><span class="c"># requires either mencoder or ffmpeg to be installed on your system</span>
</span><span class='line'>
</span><span class='line'><span class="c">#anim.save(&#39;schrodinger_barrier.mp4&#39;, fps=15, extra_args=[&#39;-vcodec&#39;, &#39;libx264&#39;])</span>
</span><span class='line'>
</span><span class='line'><span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p><em>Edit: I changed the legend font properties to play nicely with older
 matplotlib versions.  Thanks to Yann for pointing it out.</em></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Numba vs Cython]]></title>
    <link href="http://jakevdp.github.com/blog/2012/08/24/numba-vs-cython/"/>
    <updated>2012-08-24T10:41:00-07:00</updated>
    <id>http://jakevdp.github.com/blog/2012/08/24/numba-vs-cython</id>
    <content type="html"><![CDATA[<p>Often I&#8217;ll tell people that I use python for computational analysis, and they
look at me inquisitively.  &#8220;Isn&#8217;t python pretty slow?&#8221;  They have a point.
Python is an interpreted language, and as such cannot natively perform
many operations as quickly as a compiled language such as C or Fortran.
There is also the issue of the oft-misunderstood and much-maligned
<a href="http://wiki.python.org/moin/GlobalInterpreterLock">GIL</a>,
which calls into question python&#8217;s ability to allow true parallel computing.</p>

<p>Many solutions have been proposed: <a href="http://pypy.org/">PyPy</a> is a much faster
version of the core python language;
<a href="http://code.google.com/p/numexpr/">numexpr</a> provides optimized performance
on certain classes of operations from within python;
<a href="http://www.scipy.org/Weave/">weave</a> allows inline inclusion of compiled
C/C++ code;
<a href="http://www.cython.org/">cython</a> provides extra markup that allows python
and/or python-like code to be compiled into C for fast operations.  But
a naysayer might point out: many of these &#8220;python&#8221; solutions in practice
are not really python at all, but clever hacks into Fortran or C.</p>

<!-- more -->


<p>I personally have no problem with this. I like python because it gives me a nice
work-flow: it has a clean syntax, I don&#8217;t need to spend my time hunting down
memory errors, it&#8217;s quick to try-out code snippets, it&#8217;s easy to wrap legacy
code written in C and Fortran, and I&#8217;m much more productive when writing
python vs writing C or C++.  <a href="http://numpy.scipy.org">Numpy</a>,
<a href="http://www.scipy.org">scipy</a>, and <a href="http://www.scikit-learn.org">scikit-learn</a>
give me optimized routines for most of what I need to do on a daily basis,
and if something more specialized comes up, cython has never failed me.
Nevertheless, the whole setup is a bit clunky:
why can&#8217;t I have the best of both worlds: a beautiful, scripted, dynamically
typed language like python, with the speed of C or Fortran?</p>

<p>In recent years, new languages like <a href="http://golang.org/">go</a> and
<a href="http://julialang.org/">julia</a> have popped up which try to address some of
these issues.  Julia in particular has a number of nice properties (see the
<a href="http://www.youtube.com/watch?v=VCp1jUgVRgE">talk</a> from Scipy 2012 for a
good introduction) and uses <a href="http://llvm.org">LLVM</a> to enable just-in-time
(JIT) compilation and achieve some impressive benchmarks.  Julia holds promise,
but I&#8217;m not yet ready to abandon the incredible code-base and user-base
of the python community.</p>

<p>Enter <a href="http://numba.pydata.org/">numba</a>.  This is an attempt to bring JIT
compilation cleanly to python, using the LLVM framework.  In a
<a href="http://jakevdp.github.com/blog/2012/08/08/memoryview-benchmarks/">recent post</a>, one commenter pointed
out numba as an alternative to cython.  I had heard about it before (See
Travis Oliphant&#8217;s scipy 2012 talk
<a href="http://www.youtube.com/watch?v=WYi1cymszqY">here</a>) but hadn&#8217;t had the chance
to try it out until now. Installation is a bit involved, but the directions
on the <a href="http://numba.pydata.org/">numba website</a> are pretty good.</p>

<p>To test this out, I decided to run some benchmarks using the
pairwise distance function I&#8217;ve explored before (see posts
<a href="http://jakevdp.github.com/blog/2012/08/08/memoryview-benchmarks/">here</a>
and <a href="http://jakevdp.github.com/blog/2012/08/16/memoryview-benchmarks-2/">here</a>).</p>

<h3>Pure Python Version</h3>

<p>The pure python version of the function looks like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">pairwise_python</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">D</span><span class="p">):</span>
</span><span class='line'>    <span class="n">M</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>    <span class="n">N</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">M</span><span class="p">):</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">M</span><span class="p">):</span>
</span><span class='line'>            <span class="n">d</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span class='line'>            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
</span><span class='line'>                <span class="n">tmp</span> <span class="o">=</span> <span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span> <span class="o">-</span> <span class="n">X</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span>
</span><span class='line'>                <span class="n">d</span> <span class="o">+=</span> <span class="n">tmp</span> <span class="o">*</span> <span class="n">tmp</span>
</span><span class='line'>            <span class="n">D</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Not surprisingly, this is very slow.  For an array consisting of 1000 points
in three dimensions, execution takes over 12 seconds on my machine:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</span><span class='line'><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">D</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">))</span>
</span><span class='line'><span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">pairwise_python</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">D</span><span class="p">)</span>
</span><span class='line'><span class="mi">1</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mf">12.1</span> <span class="n">s</span> <span class="n">per</span> <span class="n">loop</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Numba Version</h3>

<p>Once numba is installed, we add only a single line to our above definition
to allow numba to interface our code with LLVM:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">double</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">numba.decorators</span> <span class="kn">import</span> <span class="n">jit</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@jit</span><span class="p">(</span><span class="n">arg_types</span><span class="o">=</span><span class="p">[</span><span class="n">double</span><span class="p">[:,:],</span> <span class="n">double</span><span class="p">[:,:]])</span>
</span><span class='line'><span class="k">def</span> <span class="nf">pairwise_numba</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">D</span><span class="p">):</span>
</span><span class='line'>    <span class="n">M</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>    <span class="n">N</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">M</span><span class="p">):</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">M</span><span class="p">):</span>
</span><span class='line'>            <span class="n">d</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span class='line'>            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
</span><span class='line'>                <span class="n">tmp</span> <span class="o">=</span> <span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span> <span class="o">-</span> <span class="n">X</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span>
</span><span class='line'>                <span class="n">d</span> <span class="o">+=</span> <span class="n">tmp</span> <span class="o">*</span> <span class="n">tmp</span>
</span><span class='line'>            <span class="n">D</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>I should emphasize that this is the <em>exact same</em> code, except for numba&#8217;s
<code>jit</code> decorator.  The results are pretty astonishing:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</span><span class='line'><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">D</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">))</span>
</span><span class='line'><span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">pairwise_numba</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">D</span><span class="p">)</span>
</span><span class='line'><span class="mi">100</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mf">15.5</span> <span class="n">ms</span> <span class="n">per</span> <span class="n">loop</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is a three order-of-magnitude speedup, simply by adding a numba
decorator!</p>

<h3>Cython Version</h3>

<p>For completeness, let&#8217;s do the same thing in cython.  Cython
takes a bit more than just some decorators: there are also type specifiers
and other imports required.  Additionally, we&#8217;ll use the <code>sqrt</code> function
from the C math library rather than from numpy.  Here&#8217;s the code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='cython'><span class='line'><span class="k">cimport</span> <span class="nn">cython</span>
</span><span class='line'><span class="k">from</span> <span class="nn">libc.math</span> <span class="k">cimport</span> <span class="n">sqrt</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="k">def</span> <span class="nf">pairwise_cython</span><span class="p">(</span><span class="n">double</span><span class="p">[:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">X</span><span class="p">,</span> <span class="n">double</span><span class="p">[:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">D</span><span class="p">):</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">M</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">N</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">tmp</span><span class="p">,</span> <span class="nf">d</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">M</span><span class="p">):</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">M</span><span class="p">):</span>
</span><span class='line'>            <span class="n">d</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span class='line'>            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
</span><span class='line'>                <span class="n">tmp</span> <span class="o">=</span> <span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span> <span class="o">-</span> <span class="n">X</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span>
</span><span class='line'>                <span class="n">d</span> <span class="o">+=</span> <span class="n">tmp</span> <span class="o">*</span> <span class="n">tmp</span>
</span><span class='line'>            <span class="n">D</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Running this shows about a 30% speedup over numba:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='cython'><span class='line'><span class="n">In</span> <span class="p">[</span><span class="mf">2</span><span class="p">]:</span> <span class="k">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span class='line'><span class="n">In</span> <span class="p">[</span><span class="mf">3</span><span class="p">]:</span> <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mf">1000</span><span class="p">,</span> <span class="mf">3</span><span class="p">))</span>
</span><span class='line'><span class="n">In</span> <span class="p">[</span><span class="mf">4</span><span class="p">]:</span> <span class="n">D</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="mf">1000</span><span class="p">,</span> <span class="mf">1000</span><span class="p">))</span>
</span><span class='line'><span class="n">In</span> <span class="p">[</span><span class="mf">5</span><span class="p">]:</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">pairwise_numba</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">D</span><span class="p">)</span>
</span><span class='line'><span class="mf">100</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mf">3</span><span class="p">:</span> <span class="mf">9.86</span> <span class="n">ms</span> <span class="n">per</span> <span class="n">loop</span>
</span></code></pre></td></tr></table></div></figure>


<h3>The Takeaway</h3>

<p>So numba is 1000 times faster than a pure python implementation, and only
marginally slower than nearly identical cython code.
There are some caveats here: first of all, I have years of experience with
cython, and only an hour&#8217;s experience with numba.  I&#8217;ve used every optimization
I know for the cython version, and just the basic vanilla syntax for numba.
There are likely ways to tweak the numba version to make it even faster,
as indicated in the comments of
<a href="http://jakevdp.github.com/blog/2012/08/08/memoryview-benchmarks/">this post</a>.</p>

<p>All in all, I should say I&#8217;m very impressed.  Using numba, I added
just a <em>single line</em> to the original python code, and
was able to attain speeds competetive with a highly-optimized (and
significantly less &#8220;pythonic&#8221;)  cython implementation.  Based on this,
I&#8217;m extremely excited to see what numba brings in the future.</p>

<p>All the above code is available as an ipython notebook:
<a href="http://jakevdp.github.com/downloads/notebooks/numba_vs_cython.ipynb">numba_vs_cython.ipynb</a>.
For information on how to view this file, see the
<a href="http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html">IPython page</a>
Alternatively, you can view this notebook (but not modify it) using the
nbviewer <a href="http://nbviewer.ipython.org/url/jakevdp.github.com/downloads/notebooks/numba_vs_cython.ipynb">here</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Matplotlib Animation Tutorial]]></title>
    <link href="http://jakevdp.github.com/blog/2012/08/18/matplotlib-animation-tutorial/"/>
    <updated>2012-08-18T08:01:00-07:00</updated>
    <id>http://jakevdp.github.com/blog/2012/08/18/matplotlib-animation-tutorial</id>
    <content type="html"><![CDATA[<p><a href="http://matplotlib.sourceforge.net">Matplotlib</a> version 1.1 added some tools
for creating
<a href="http://matplotlib.sourceforge.net/api/animation_api.html">animations</a>
which are really slick.  You can find some good example animations on
the matplotlib
<a href="http://matplotlib.sourceforge.net/examples/animation/index.html">examples</a>
page.  I thought I&#8217;d share here some of the things I&#8217;ve learned when playing
around with these tools.</p>

<h3>Basic Animation</h3>

<p>The animation tools center around the <code>matplotlib.animation.Animation</code> base
class, which provides a framework around which the animation functionality
is built.  The main interfaces are <code>TimedAnimation</code> and <code>FuncAnimation</code>,
which you can read more about in the
<a href="http://matplotlib.sourceforge.net/api/animation_api.html">documentation</a>.
Here I&#8217;ll explore using the <code>FuncAnimation</code> tool, which I have found
to be the most useful.</p>

<!-- more -->


<p>First we&#8217;ll use <code>FuncAnimation</code> to do a basic animation of a sine wave moving
across the screen:</p>

<figure class='code'><figcaption><span>Basic Animation (basic_animation.py)</span> <a href='http://jakevdp.github.com/downloads/code/basic_animation.py'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='py'><span class='line'><span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">Matplotlib Animation Example</span>
</span><span class='line'>
</span><span class='line'><span class="sd">author: Jake Vanderplas</span>
</span><span class='line'><span class="sd">email: vanderplas@astro.washington.edu</span>
</span><span class='line'><span class="sd">website: http://jakevdp.github.com</span>
</span><span class='line'><span class="sd">license: BSD</span>
</span><span class='line'><span class="sd">Please feel free to use and modify this, but keep the above information. Thanks!</span>
</span><span class='line'><span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">animation</span>
</span><span class='line'>
</span><span class='line'><span class="c"># First set up the figure, the axis, and the plot element we want to animate</span>
</span><span class='line'><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span class='line'><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</span><span class='line'><span class="n">line</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([],</span> <span class="p">[],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># initialization function: plot the background of each frame</span>
</span><span class='line'><span class="k">def</span> <span class="nf">init</span><span class="p">():</span>
</span><span class='line'>    <span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">([],</span> <span class="p">[])</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">line</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'><span class="c"># animation function.  This is called sequentially</span>
</span><span class='line'><span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
</span><span class='line'>    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
</span><span class='line'>    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="n">i</span><span class="p">))</span>
</span><span class='line'>    <span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">line</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'><span class="c"># call the animator.  blit=True means only re-draw the parts that have changed.</span>
</span><span class='line'><span class="n">anim</span> <span class="o">=</span> <span class="n">animation</span><span class="o">.</span><span class="n">FuncAnimation</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">animate</span><span class="p">,</span> <span class="n">init_func</span><span class="o">=</span><span class="n">init</span><span class="p">,</span>
</span><span class='line'>                               <span class="n">frames</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">blit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># save the animation as an mp4.  This requires ffmpeg or mencoder to be</span>
</span><span class='line'><span class="c"># installed.  The extra_args ensure that the x264 codec is used, so that</span>
</span><span class='line'><span class="c"># the video can be embedded in html5.  You may need to adjust this for</span>
</span><span class='line'><span class="c"># your system: for more information, see</span>
</span><span class='line'><span class="c"># http://matplotlib.sourceforge.net/api/animation_api.html</span>
</span><span class='line'><span class="n">anim</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;basic_animation.mp4&#39;</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">extra_args</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;-vcodec&#39;</span><span class="p">,</span> <span class="s">&#39;libx264&#39;</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>Let&#8217;s step through this and see what&#8217;s going on.  After importing required
pieces of <code>numpy</code> and <code>matplotlib</code>, The script sets up the plot:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span class='line'><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</span><span class='line'><span class="n">line</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([],</span> <span class="p">[],</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here we create a figure window, create a single axis in the figure, and then
create our line object which will be modified in the animation.  Note that
here we simply plot an empty line: we&#8217;ll add data to the line later.</p>

<p>Next we&#8217;ll create the functions which make the animation happen.  <code>init()</code>
is the function which will be called to create the base frame upon which
the animation takes place.  Here we use just a simple function which sets
the line data to nothing.  It is important that this function return the
line object, because this tells the animator which objects on the plot to
update after each frame:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">init</span><span class="p">():</span>
</span><span class='line'>    <span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">([],</span> <span class="p">[])</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">line</span><span class="p">,</span>
</span></code></pre></td></tr></table></div></figure>


<p>The next piece is the animation function.  It takes a single parameter, the
frame number <code>i</code>, and draws a sine wave with a shift that depends on <code>i</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># animation function.  This is called sequentially</span>
</span><span class='line'><span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
</span><span class='line'>    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
</span><span class='line'>    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="n">i</span><span class="p">))</span>
</span><span class='line'>    <span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">line</span><span class="p">,</span>
</span></code></pre></td></tr></table></div></figure>


<p>Note that again here we return a tuple of the plot objects which have been
modified.  This tells the animation framework what parts of the plot should
be animated.</p>

<p>Finally, we create the animation object:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">anim</span> <span class="o">=</span> <span class="n">animation</span><span class="o">.</span><span class="n">FuncAnimation</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">animate</span><span class="p">,</span> <span class="n">init_func</span><span class="o">=</span><span class="n">init</span><span class="p">,</span>
</span><span class='line'>                               <span class="n">frames</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">blit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>This object needs to persist, so it must be assigned to a variable.  We&#8217;ve
chosen a 100 frame animation with a 20ms delay between frames.  The
<code>blit</code> keyword is an important one: this tells the animation to only re-draw
the pieces of the plot which have changed.  The time saved with <code>blit=True</code>
means that the animations display much more quickly.</p>

<p>We end with an optional save command, and then a show command to show the
result.  Here&#8217;s what the script generates:
<video width='360' height='270' preload='none' controls poster=' /downloads/videos/basic_animation_frame.png'><source src='http://jakevdp.github.com/downloads/videos/basic_animation.mp4' type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'/></video></p>

<p>This framework for generating and saving animations is very powerful and
flexible: if we put some physics into the <code>animate</code> function, the possibilities
are endless.  Below are a couple examples of some physics animations that
I&#8217;ve been playing around with.</p>

<h3>Double Pendulum</h3>

<p>One of the examples provided on the matplotlib
<a href="http://matplotlib.sourceforge.net/examples/animation/index.html">example page</a>
is an animation of a double pendulum.  This example operates by precomputing
the pendulum position over 10 seconds, and then animating the results.  I
saw this and wondered if python would be fast enough to compute the dynamics
on the fly.  It turns out it is:</p>

<figure class='code'><figcaption><span>Double Pendulum (double_pendulum.py)</span> <a href='http://jakevdp.github.com/downloads/code/double_pendulum.py'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
</pre></td><td class='code'><pre><code class='py'><span class='line'><span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">General Numerical Solver for the 1D Time-Dependent Schrodinger&#39;s equation.</span>
</span><span class='line'>
</span><span class='line'><span class="sd">adapted from code at http://matplotlib.sourceforge.net/examples/animation/double_pendulum_animated.py</span>
</span><span class='line'>
</span><span class='line'><span class="sd">Double pendulum formula translated from the C code at</span>
</span><span class='line'><span class="sd">http://www.physics.usyd.edu.au/~wheat/dpend_html/solve_dpend.c</span>
</span><span class='line'>
</span><span class='line'><span class="sd">author: Jake Vanderplas</span>
</span><span class='line'><span class="sd">email: vanderplas@astro.washington.edu</span>
</span><span class='line'><span class="sd">website: http://jakevdp.github.com</span>
</span><span class='line'><span class="sd">license: BSD</span>
</span><span class='line'><span class="sd">Please feel free to use and modify this, but keep the above information. Thanks!</span>
</span><span class='line'><span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">sin</span><span class="p">,</span> <span class="n">cos</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">scipy.integrate</span> <span class="kn">as</span> <span class="nn">integrate</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">matplotlib.animation</span> <span class="kn">as</span> <span class="nn">animation</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">DoublePendulum</span><span class="p">:</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;Double Pendulum Class</span>
</span><span class='line'>
</span><span class='line'><span class="sd">    init_state is [theta1, omega1, theta2, omega2] in degrees,</span>
</span><span class='line'><span class="sd">    where theta1, omega1 is the angular position and velocity of the first</span>
</span><span class='line'><span class="sd">    pendulum arm, and theta2, omega2 is that of the second pendulum arm</span>
</span><span class='line'><span class="sd">    &quot;&quot;&quot;</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span class='line'>                 <span class="n">init_state</span> <span class="o">=</span> <span class="p">[</span><span class="mi">120</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
</span><span class='line'>                 <span class="n">L1</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>  <span class="c"># length of pendulum 1 in m</span>
</span><span class='line'>                 <span class="n">L2</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>  <span class="c"># length of pendulum 2 in m</span>
</span><span class='line'>                 <span class="n">M1</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>  <span class="c"># mass of pendulum 1 in kg</span>
</span><span class='line'>                 <span class="n">M2</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>  <span class="c"># mass of pendulum 2 in kg</span>
</span><span class='line'>                 <span class="n">G</span><span class="o">=</span><span class="mf">9.8</span><span class="p">,</span>  <span class="c"># acceleration due to gravity, in m/s^2</span>
</span><span class='line'>                 <span class="n">origin</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">init_state</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">init_state</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;float&#39;</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="p">(</span><span class="n">L1</span><span class="p">,</span> <span class="n">L2</span><span class="p">,</span> <span class="n">M1</span><span class="p">,</span> <span class="n">M2</span><span class="p">,</span> <span class="n">G</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">origin</span> <span class="o">=</span> <span class="n">origin</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">time_elapsed</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">init_state</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">180.</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;compute the current x,y positions of the pendulum arms&quot;&quot;&quot;</span>
</span><span class='line'>        <span class="p">(</span><span class="n">L1</span><span class="p">,</span> <span class="n">L2</span><span class="p">,</span> <span class="n">M1</span><span class="p">,</span> <span class="n">M2</span><span class="p">,</span> <span class="n">G</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span class='line'>                       <span class="n">L1</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span class='line'>                       <span class="n">L2</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="mi">2</span><span class="p">])])</span>
</span><span class='line'>        <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span class='line'>                       <span class="o">-</span><span class="n">L1</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span class='line'>                       <span class="o">-</span><span class="n">L2</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="mi">2</span><span class="p">])])</span>
</span><span class='line'>        <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">energy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;compute the energy of the current state&quot;&quot;&quot;</span>
</span><span class='line'>        <span class="p">(</span><span class="n">L1</span><span class="p">,</span> <span class="n">L2</span><span class="p">,</span> <span class="n">M1</span><span class="p">,</span> <span class="n">M2</span><span class="p">,</span> <span class="n">G</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">([</span><span class="n">L1</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span class='line'>                       <span class="n">L2</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="mi">2</span><span class="p">])])</span>
</span><span class='line'>        <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">([</span><span class="o">-</span><span class="n">L1</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span class='line'>                       <span class="o">-</span><span class="n">L2</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="mi">2</span><span class="p">])])</span>
</span><span class='line'>        <span class="n">vx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">([</span><span class="n">L1</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span class='line'>                        <span class="n">L2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="mi">2</span><span class="p">])])</span>
</span><span class='line'>        <span class="n">vy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">([</span><span class="n">L1</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span class='line'>                        <span class="n">L2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="mi">2</span><span class="p">])])</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">U</span> <span class="o">=</span> <span class="n">G</span> <span class="o">*</span> <span class="p">(</span><span class="n">M1</span> <span class="o">*</span> <span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">M2</span> <span class="o">*</span> <span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span class='line'>        <span class="n">K</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">M1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">vx</span><span class="p">,</span> <span class="n">vx</span><span class="p">)</span> <span class="o">+</span> <span class="n">M2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">vy</span><span class="p">,</span> <span class="n">vy</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">U</span> <span class="o">+</span> <span class="n">K</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">dstate_dt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;compute the derivative of the given state&quot;&quot;&quot;</span>
</span><span class='line'>        <span class="p">(</span><span class="n">M1</span><span class="p">,</span> <span class="n">M2</span><span class="p">,</span> <span class="n">L1</span><span class="p">,</span> <span class="n">L2</span><span class="p">,</span> <span class="n">G</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">dydx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span class='line'>        <span class="n">dydx</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>        <span class="n">dydx</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">cos_delta</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">state</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span class='line'>        <span class="n">sin_delta</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">state</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">den1</span> <span class="o">=</span> <span class="p">(</span><span class="n">M1</span> <span class="o">+</span> <span class="n">M2</span><span class="p">)</span> <span class="o">*</span> <span class="n">L1</span> <span class="o">-</span> <span class="n">M2</span> <span class="o">*</span> <span class="n">L1</span> <span class="o">*</span> <span class="n">cos_delta</span> <span class="o">*</span> <span class="n">cos_delta</span>
</span><span class='line'>        <span class="n">dydx</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">M2</span> <span class="o">*</span> <span class="n">L1</span> <span class="o">*</span> <span class="n">state</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">state</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">sin_delta</span> <span class="o">*</span> <span class="n">cos_delta</span>
</span><span class='line'>                   <span class="o">+</span> <span class="n">M2</span> <span class="o">*</span> <span class="n">G</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">*</span> <span class="n">cos_delta</span>
</span><span class='line'>                   <span class="o">+</span> <span class="n">M2</span> <span class="o">*</span> <span class="n">L2</span> <span class="o">*</span> <span class="n">state</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">state</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">sin_delta</span>
</span><span class='line'>                   <span class="o">-</span> <span class="p">(</span><span class="n">M1</span> <span class="o">+</span> <span class="n">M2</span><span class="p">)</span> <span class="o">*</span> <span class="n">G</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">/</span> <span class="n">den1</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">den2</span> <span class="o">=</span> <span class="p">(</span><span class="n">L2</span> <span class="o">/</span> <span class="n">L1</span><span class="p">)</span> <span class="o">*</span> <span class="n">den1</span>
</span><span class='line'>        <span class="n">dydx</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">M2</span> <span class="o">*</span> <span class="n">L2</span> <span class="o">*</span> <span class="n">state</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">state</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="n">sin_delta</span> <span class="o">*</span> <span class="n">cos_delta</span>
</span><span class='line'>                   <span class="o">+</span> <span class="p">(</span><span class="n">M1</span> <span class="o">+</span> <span class="n">M2</span><span class="p">)</span> <span class="o">*</span> <span class="n">G</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="n">cos_delta</span>
</span><span class='line'>                   <span class="o">-</span> <span class="p">(</span><span class="n">M1</span> <span class="o">+</span> <span class="n">M2</span><span class="p">)</span> <span class="o">*</span> <span class="n">L1</span> <span class="o">*</span> <span class="n">state</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">state</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">sin_delta</span>
</span><span class='line'>                   <span class="o">-</span> <span class="p">(</span><span class="n">M1</span> <span class="o">+</span> <span class="n">M2</span><span class="p">)</span> <span class="o">*</span> <span class="n">G</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span> <span class="o">/</span> <span class="n">den2</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">dydx</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;execute one time step of length dt and update state&quot;&quot;&quot;</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">integrate</span><span class="o">.</span><span class="n">odeint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dstate_dt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">dt</span><span class="p">])[</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">time_elapsed</span> <span class="o">+=</span> <span class="n">dt</span>
</span><span class='line'>
</span><span class='line'><span class="c">#------------------------------------------------------------</span>
</span><span class='line'><span class="c"># set up initial state and global variables</span>
</span><span class='line'><span class="n">pendulum</span> <span class="o">=</span> <span class="n">DoublePendulum</span><span class="p">([</span><span class="mf">180.</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">20.</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
</span><span class='line'><span class="n">dt</span> <span class="o">=</span> <span class="mf">1.</span><span class="o">/</span><span class="mi">30</span> <span class="c"># 30 fps</span>
</span><span class='line'>
</span><span class='line'><span class="c">#------------------------------------------------------------</span>
</span><span class='line'><span class="c"># set up figure and animation</span>
</span><span class='line'><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span class='line'><span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s">&#39;equal&#39;</span><span class="p">,</span> <span class="n">autoscale_on</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
</span><span class='line'>                     <span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</span><span class='line'><span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="n">line</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([],</span> <span class="p">[],</span> <span class="s">&#39;o-&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'><span class="n">time_text</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
</span><span class='line'><span class="n">energy_text</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.90</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">init</span><span class="p">():</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;initialize animation&quot;&quot;&quot;</span>
</span><span class='line'>    <span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">([],</span> <span class="p">[])</span>
</span><span class='line'>    <span class="n">time_text</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">energy_text</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">line</span><span class="p">,</span> <span class="n">time_text</span><span class="p">,</span> <span class="n">energy_text</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;perform animation step&quot;&quot;&quot;</span>
</span><span class='line'>    <span class="k">global</span> <span class="n">pendulum</span><span class="p">,</span> <span class="n">dt</span>
</span><span class='line'>    <span class="n">pendulum</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="o">*</span><span class="n">pendulum</span><span class="o">.</span><span class="n">position</span><span class="p">())</span>
</span><span class='line'>    <span class="n">time_text</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="s">&#39;time = </span><span class="si">%.1f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">pendulum</span><span class="o">.</span><span class="n">time_elapsed</span><span class="p">)</span>
</span><span class='line'>    <span class="n">energy_text</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="s">&#39;energy = </span><span class="si">%.3f</span><span class="s"> J&#39;</span> <span class="o">%</span> <span class="n">pendulum</span><span class="o">.</span><span class="n">energy</span><span class="p">())</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">line</span><span class="p">,</span> <span class="n">time_text</span><span class="p">,</span> <span class="n">energy_text</span>
</span><span class='line'>
</span><span class='line'><span class="c"># choose the interval based on dt and the time to animate one step</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
</span><span class='line'><span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
</span><span class='line'><span class="n">animate</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'><span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
</span><span class='line'><span class="n">interval</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">dt</span> <span class="o">-</span> <span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">ani</span> <span class="o">=</span> <span class="n">animation</span><span class="o">.</span><span class="n">FuncAnimation</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">animate</span><span class="p">,</span> <span class="n">frames</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
</span><span class='line'>                              <span class="n">interval</span><span class="o">=</span><span class="n">interval</span><span class="p">,</span> <span class="n">blit</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">init_func</span><span class="o">=</span><span class="n">init</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># save the animation as an mp4.  This requires ffmpeg or mencoder to be</span>
</span><span class='line'><span class="c"># installed.  The extra_args ensure that the x264 codec is used, so that</span>
</span><span class='line'><span class="c"># the video can be embedded in html5.  You may need to adjust this for</span>
</span><span class='line'><span class="c"># your system: for more information, see</span>
</span><span class='line'><span class="c"># http://matplotlib.sourceforge.net/api/animation_api.html</span>
</span><span class='line'><span class="c">#ani.save(&#39;double_pendulum.mp4&#39;, fps=30, extra_args=[&#39;-vcodec&#39;, &#39;libx264&#39;])</span>
</span><span class='line'>
</span><span class='line'><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here we&#8217;ve created a class which stores the state of the double pendulum
(encoded in the angle of each arm plus the angular velocity of each arm)
and also provides some functions for computing the dynamics.  The animation
functions are the same as above, but we just have a bit more complicated
update function: it not only changes the position of the points, but also
changes the text to keep track of time and energy (energy should be constant
if our math is correct: it&#8217;s comforting that it is).  The video below
lasts only ten seconds, but by running the script you can watch the
pendulum chaotically oscillate until your laptop runs out of power:</p>

<p><video width='360' height='270' preload='none' controls poster=' /downloads/videos/double_pendulum_frame.png'><source src='http://jakevdp.github.com/downloads/videos/double_pendulum.mp4' type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'/></video></p>

<h3>Particles in a Box</h3>

<p>Another animation I created is the elastic collisions of a group of particles
in a box under the force of gravity.  The collisions are elastic: they conserve
energy and 2D momentum, and the particles bounce realistically off the walls
of the box and fall under the influence of a constant gravitational force:</p>

<figure class='code'><figcaption><span>Particles in a Box (particle_box.py)</span> <a href='http://jakevdp.github.com/downloads/code/particle_box.py'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
</pre></td><td class='code'><pre><code class='py'><span class='line'><span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">Animation of Elastic collisions with Gravity</span>
</span><span class='line'>
</span><span class='line'><span class="sd">author: Jake Vanderplas</span>
</span><span class='line'><span class="sd">email: vanderplas@astro.washington.edu</span>
</span><span class='line'><span class="sd">website: http://jakevdp.github.com</span>
</span><span class='line'><span class="sd">license: BSD</span>
</span><span class='line'><span class="sd">Please feel free to use and modify this, but keep the above information. Thanks!</span>
</span><span class='line'><span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">scipy.spatial.distance</span> <span class="kn">import</span> <span class="n">pdist</span><span class="p">,</span> <span class="n">squareform</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">scipy.integrate</span> <span class="kn">as</span> <span class="nn">integrate</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">matplotlib.animation</span> <span class="kn">as</span> <span class="nn">animation</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">ParticleBox</span><span class="p">:</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;Orbits class</span>
</span><span class='line'><span class="sd">    </span>
</span><span class='line'><span class="sd">    init_state is an [N x 4] array, where N is the number of particles:</span>
</span><span class='line'><span class="sd">       [[x1, y1, vx1, vy1],</span>
</span><span class='line'><span class="sd">        [x2, y2, vx2, vy2],</span>
</span><span class='line'><span class="sd">        ...               ]</span>
</span><span class='line'>
</span><span class='line'><span class="sd">    bounds is the size of the box: [xmin, xmax, ymin, ymax]</span>
</span><span class='line'><span class="sd">    &quot;&quot;&quot;</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span class='line'>                 <span class="n">init_state</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span>
</span><span class='line'>                               <span class="p">[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span>
</span><span class='line'>                               <span class="p">[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]],</span>
</span><span class='line'>                 <span class="n">bounds</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
</span><span class='line'>                 <span class="n">size</span> <span class="o">=</span> <span class="mf">0.04</span><span class="p">,</span>
</span><span class='line'>                 <span class="n">M</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">,</span>
</span><span class='line'>                 <span class="n">G</span> <span class="o">=</span> <span class="mf">9.8</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">init_state</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">init_state</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">M</span> <span class="o">=</span> <span class="n">M</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">init_state</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">init_state</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">time_elapsed</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="n">bounds</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">G</span> <span class="o">=</span> <span class="n">G</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;step once by dt seconds&quot;&quot;&quot;</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">time_elapsed</span> <span class="o">+=</span> <span class="n">dt</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># update positions</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="n">dt</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:]</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># find pairs of particles undergoing a collision</span>
</span><span class='line'>        <span class="n">D</span> <span class="o">=</span> <span class="n">squareform</span><span class="p">(</span><span class="n">pdist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]))</span>
</span><span class='line'>        <span class="n">ind1</span><span class="p">,</span> <span class="n">ind2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">D</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
</span><span class='line'>        <span class="n">unique</span> <span class="o">=</span> <span class="p">(</span><span class="n">ind1</span> <span class="o">&lt;</span> <span class="n">ind2</span><span class="p">)</span>
</span><span class='line'>        <span class="n">ind1</span> <span class="o">=</span> <span class="n">ind1</span><span class="p">[</span><span class="n">unique</span><span class="p">]</span>
</span><span class='line'>        <span class="n">ind2</span> <span class="o">=</span> <span class="n">ind2</span><span class="p">[</span><span class="n">unique</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># update velocities of colliding pairs</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">ind1</span><span class="p">,</span> <span class="n">ind2</span><span class="p">):</span>
</span><span class='line'>            <span class="c"># mass</span>
</span><span class='line'>            <span class="n">m1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">M</span><span class="p">[</span><span class="n">i1</span><span class="p">]</span>
</span><span class='line'>            <span class="n">m2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">M</span><span class="p">[</span><span class="n">i2</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>            <span class="c"># location vector</span>
</span><span class='line'>            <span class="n">r1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">i1</span><span class="p">,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span>
</span><span class='line'>            <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">i2</span><span class="p">,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>            <span class="c"># velocity vector</span>
</span><span class='line'>            <span class="n">v1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">i1</span><span class="p">,</span> <span class="mi">2</span><span class="p">:]</span>
</span><span class='line'>            <span class="n">v2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">i2</span><span class="p">,</span> <span class="mi">2</span><span class="p">:]</span>
</span><span class='line'>
</span><span class='line'>            <span class="c"># relative location &amp; velocity vectors</span>
</span><span class='line'>            <span class="n">r_rel</span> <span class="o">=</span> <span class="n">r1</span> <span class="o">-</span> <span class="n">r2</span>
</span><span class='line'>            <span class="n">v_rel</span> <span class="o">=</span> <span class="n">v1</span> <span class="o">-</span> <span class="n">v2</span>
</span><span class='line'>
</span><span class='line'>            <span class="c"># momentum vector of the center of mass</span>
</span><span class='line'>            <span class="n">v_cm</span> <span class="o">=</span> <span class="p">(</span><span class="n">m1</span> <span class="o">*</span> <span class="n">v1</span> <span class="o">+</span> <span class="n">m2</span> <span class="o">*</span> <span class="n">v2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">m1</span> <span class="o">+</span> <span class="n">m2</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>            <span class="c"># collisions of spheres reflect v_rel over r_rel</span>
</span><span class='line'>            <span class="n">rr_rel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">r_rel</span><span class="p">,</span> <span class="n">r_rel</span><span class="p">)</span>
</span><span class='line'>            <span class="n">vr_rel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">v_rel</span><span class="p">,</span> <span class="n">r_rel</span><span class="p">)</span>
</span><span class='line'>            <span class="n">v_rel</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">r_rel</span> <span class="o">*</span> <span class="n">vr_rel</span> <span class="o">/</span> <span class="n">rr_rel</span> <span class="o">-</span> <span class="n">v_rel</span>
</span><span class='line'>
</span><span class='line'>            <span class="c"># assign new velocities</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">i1</span><span class="p">,</span> <span class="mi">2</span><span class="p">:]</span> <span class="o">=</span> <span class="n">v_cm</span> <span class="o">+</span> <span class="n">v_rel</span> <span class="o">*</span> <span class="n">m2</span> <span class="o">/</span> <span class="p">(</span><span class="n">m1</span> <span class="o">+</span> <span class="n">m2</span><span class="p">)</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">i2</span><span class="p">,</span> <span class="mi">2</span><span class="p">:]</span> <span class="o">=</span> <span class="n">v_cm</span> <span class="o">-</span> <span class="n">v_rel</span> <span class="o">*</span> <span class="n">m1</span> <span class="o">/</span> <span class="p">(</span><span class="n">m1</span> <span class="o">+</span> <span class="n">m2</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># check for crossing boundary</span>
</span><span class='line'>        <span class="n">crossed_x1</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
</span><span class='line'>        <span class="n">crossed_x2</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
</span><span class='line'>        <span class="n">crossed_y1</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
</span><span class='line'>        <span class="n">crossed_y2</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">crossed_x1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">crossed_x2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">crossed_y1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">crossed_y2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">crossed_x1</span> <span class="o">|</span> <span class="n">crossed_x2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">crossed_y1</span> <span class="o">|</span> <span class="n">crossed_y2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># add gravity</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">M</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">G</span> <span class="o">*</span> <span class="n">dt</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">#------------------------------------------------------------</span>
</span><span class='line'><span class="c"># set up initial state</span>
</span><span class='line'><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'><span class="n">init_state</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.5</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">50</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
</span><span class='line'><span class="n">init_state</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">*=</span> <span class="mf">3.9</span>
</span><span class='line'>
</span><span class='line'><span class="n">box</span> <span class="o">=</span> <span class="n">ParticleBox</span><span class="p">(</span><span class="n">init_state</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mf">0.04</span><span class="p">)</span>
</span><span class='line'><span class="n">dt</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">/</span> <span class="mi">30</span> <span class="c"># 30fps</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">#------------------------------------------------------------</span>
</span><span class='line'><span class="c"># set up figure and animation</span>
</span><span class='line'><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span class='line'><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'><span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s">&#39;equal&#39;</span><span class="p">,</span> <span class="n">autoscale_on</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
</span><span class='line'>                     <span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">3.2</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">),</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">2.4</span><span class="p">,</span> <span class="mf">2.4</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="c"># particles holds the locations of the particles</span>
</span><span class='line'><span class="n">particles</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([],</span> <span class="p">[],</span> <span class="s">&#39;bo&#39;</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># rect is the box edge</span>
</span><span class='line'><span class="n">rect</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">(</span><span class="n">box</span><span class="o">.</span><span class="n">bounds</span><span class="p">[::</span><span class="mi">2</span><span class="p">],</span>
</span><span class='line'>                     <span class="n">box</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">box</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span class='line'>                     <span class="n">box</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">box</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
</span><span class='line'>                     <span class="n">ec</span><span class="o">=</span><span class="s">&#39;none&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s">&#39;none&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">init</span><span class="p">():</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;initialize animation&quot;&quot;&quot;</span>
</span><span class='line'>    <span class="k">global</span> <span class="n">box</span><span class="p">,</span> <span class="n">rect</span>
</span><span class='line'>    <span class="n">particles</span><span class="o">.</span><span class="n">set_data</span><span class="p">([],</span> <span class="p">[])</span>
</span><span class='line'>    <span class="n">rect</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="s">&#39;none&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">particles</span><span class="p">,</span> <span class="n">rect</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;perform animation step&quot;&quot;&quot;</span>
</span><span class='line'>    <span class="k">global</span> <span class="n">box</span><span class="p">,</span> <span class="n">rect</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">fig</span>
</span><span class='line'>    <span class="n">box</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">ms</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">fig</span><span class="o">.</span><span class="n">dpi</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">box</span><span class="o">.</span><span class="n">size</span> <span class="o">*</span> <span class="n">fig</span><span class="o">.</span><span class="n">get_figwidth</span><span class="p">()</span>
</span><span class='line'>             <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">())[</span><span class="mi">0</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># update pieces of the animation</span>
</span><span class='line'>    <span class="n">rect</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="s">&#39;k&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">particles</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">box</span><span class="o">.</span><span class="n">state</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">box</span><span class="o">.</span><span class="n">state</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>
</span><span class='line'>    <span class="n">particles</span><span class="o">.</span><span class="n">set_markersize</span><span class="p">(</span><span class="n">ms</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">particles</span><span class="p">,</span> <span class="n">rect</span>
</span><span class='line'>
</span><span class='line'><span class="n">ani</span> <span class="o">=</span> <span class="n">animation</span><span class="o">.</span><span class="n">FuncAnimation</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">animate</span><span class="p">,</span> <span class="n">frames</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
</span><span class='line'>                              <span class="n">interval</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">blit</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">init_func</span><span class="o">=</span><span class="n">init</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># save the animation as an mp4.  This requires ffmpeg or mencoder to be</span>
</span><span class='line'><span class="c"># installed.  The extra_args ensure that the x264 codec is used, so that</span>
</span><span class='line'><span class="c"># the video can be embedded in html5.  You may need to adjust this for</span>
</span><span class='line'><span class="c"># your system: for more information, see</span>
</span><span class='line'><span class="c"># http://matplotlib.sourceforge.net/api/animation_api.html</span>
</span><span class='line'><span class="c">#ani.save(&#39;particle_box.mp4&#39;, fps=30, extra_args=[&#39;-vcodec&#39;, &#39;libx264&#39;])</span>
</span><span class='line'>
</span><span class='line'><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>The math should be familiar to anyone with a physics background, and the
result is pretty mesmerizing.  I coded this up during a flight, and ended
up just sitting and watching it for about ten minutes.</p>

<p><video width='360' height='270' preload='none' controls poster=' /downloads/videos/particle_box_frame.png'><source src='http://jakevdp.github.com/downloads/videos/particle_box.mp4' type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'/></video></p>

<p>This is just the beginning: it might be an interesting exercise to add
other elements, like computation of the temperature and pressure to demonstrate
the ideal gas law, or real-time plotting of the velocity distribution to
watch it approach the expected Maxwellian distribution.  It opens up many
possibilities for virtual physics demos&#8230;</p>

<h3>Summing it up</h3>

<p>The matplotlib animation module is an excellent addition to what was already
an excellent package.  I think I&#8217;ve just scratched the surface of what&#8217;s
possible with these tools&#8230; what cool animation ideas can you come up
with?</p>

<p>Edit: in a <a href="http://jakevdp.github.com/blog/2012/09/05/quantum-python">followup post</a>, I show how
these tools can be used to generate an animation of a simple Quantum
Mechanical system.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Memoryview Benchmarks 2]]></title>
    <link href="http://jakevdp.github.com/blog/2012/08/16/memoryview-benchmarks-2/"/>
    <updated>2012-08-16T14:19:00-07:00</updated>
    <id>http://jakevdp.github.com/blog/2012/08/16/memoryview-benchmarks-2</id>
    <content type="html"><![CDATA[<p>In the <a href="http://jakevdp.github.com/blog/2012/08/08/memoryview-benchmarks/">previous post</a>, I explored
how cython typed memoryviews can be used to speed up repeated array
operations.  It became clear that typed memoryviews are superior to
the ndarray syntax for slicing, and as fast as raw pointers for single
element access.  In the comments, Mathieu brought up an interesting
question: is the ndarray syntax as good as typed memoryviews if you&#8217;re
not doing slicing?</p>

<p>The answer turns out to be yes, <em>unless</em> the compiler tries to inline your
function.</p>

<!-- more -->


<h3>Inlined Memoryview</h3>

<p>We&#8217;ll use a slightly simpler benchmark script here for simplicity.  We&#8217;ll
use inlined typed memoryviews for the inner function, and call this function
within an outer loop:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='cython'><span class='line'><span class="k">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span class='line'><span class="k">cimport</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span class='line'><span class="k">cimport</span> <span class="nn">cython</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="k">cdef</span> <span class="kr">inline</span> <span class="kt">double</span> <span class="nf">inner_func</span><span class="p">(</span><span class="n">double</span><span class="p">[:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">X</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">X</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">loop_1</span><span class="p">(</span><span class="nb">int</span> <span class="n">N</span><span class="p">,</span> <span class="n">switch</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">double</span>[<span class="p">:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mf">100</span><span class="p">,</span> <span class="mf">100</span><span class="p">))</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">i</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
</span><span class='line'>        <span class="c"># this should be inlined by the compiler</span>
</span><span class='line'>        <span class="n">inner_func</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>The inner function is called <code>N</code> times.  We&#8217;ve used the &#8220;inline&#8221; keyword here:
it turns out this is optional with common compiler optimizations turned on.
<code>gcc</code> and other compilers are smart enough to figure out that this function
should be inlined, even if the cython code doesn&#8217;t mark it as such.  Timing
the function on one million loops gives us our comparison benchmark:</p>

<pre><code>%timeit loop_1(1E6)
100000 loops, best of 3: 10.1 us per loop
</code></pre>

<p>Just over a millisecond to perform this loop one million times.</p>

<h3>Non-inlined Memoryview</h3>

<p>Because the compilers are generally so smart, we actually need to be a bit
clever to make sure our function is <em>not</em> inlined.  We&#8217;ll do that through
a switch statement in the loop call, which selects between two possible
inner functions.  This may seem a bit contrived, but it could come up
in practice: for example, if we wanted to create a KDTree for nearest neighbor
searches which can use one of several distance metrics within a single tree
framework, we might be tempted to try a solution like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='cython'><span class='line'><span class="k">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span class='line'><span class="k">cimport</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span class='line'><span class="k">cimport</span> <span class="nn">cython</span>
</span><span class='line'>
</span><span class='line'><span class="k">ctypedef</span> <span class="n">double</span> <span class="p">(</span><span class="o">*</span><span class="n">inner_func_ptr</span><span class="p">)(</span><span class="n">double</span><span class="p">[:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="k">cdef</span> <span class="kt">double</span> <span class="nf">inner_func_1</span><span class="p">(</span><span class="n">double</span><span class="p">[:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">X</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">X</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="k">cdef</span> <span class="kt">double</span> <span class="nf">inner_func_2</span><span class="p">(</span><span class="n">double</span><span class="p">[:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">X</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">X</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">loop_2</span><span class="p">(</span><span class="nb">int</span> <span class="n">N</span><span class="p">,</span> <span class="n">switch</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
</span><span class='line'>    <span class="c"># use a switch to ensure that inlining can&#39;t happen: compilers</span>
</span><span class='line'>    <span class="c"># are usually smart enough to figure it out otherwise.</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">inner_func_ptr</span> <span class="nf">func</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">switch</span><span class="p">:</span>
</span><span class='line'>        <span class="n">func</span> <span class="o">=</span> <span class="n">inner_func_1</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="n">func</span> <span class="o">=</span> <span class="n">inner_func_2</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">double</span>[<span class="p">:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mf">100</span><span class="p">,</span> <span class="mf">100</span><span class="p">))</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">i</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
</span><span class='line'>        <span class="n">func</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>By adding the switch function, it means the compiler cannot know at compile
time which of the inner functions will be used in the loop, and they
cannot be inlined.  The timing results are as follows:</p>

<pre><code>%timeit loop_2(1E6)
10 loops, best of 3: 22.9 ms per loop
</code></pre>

<p>Using a non-inlined function makes things significantly slower in this case!
So, if you&#8217;re repeatedly calling a small function, inlining can be <em>very</em>
important for optimal execution times.</p>

<h3>The Problem with ndarray</h3>

<p>It turns out that beyond slicing, the problem with the ndarray type is that
multi-dimensional arrays require relatively expensive buffer checks whenever
a function is called.  This causes similar code with ndarrays to be
significantly slower:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='cython'><span class='line'><span class="k">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span class='line'><span class="k">cimport</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span class='line'><span class="k">cimport</span> <span class="nn">cython</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="k">cdef</span> <span class="kr">inline</span> <span class="kt">double</span> <span class="nf">inner_func</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">double</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;c&#39;</span><span class="p">]</span> <span class="n">X</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">X</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">loop_3</span><span class="p">(</span><span class="nb">int</span> <span class="n">N</span><span class="p">,</span> <span class="n">switch</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="nf">double</span><span class="p">,</span> <span class="nf">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;c&#39;</span><span class="p">]</span> <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mf">100</span><span class="p">,</span> <span class="mf">100</span><span class="p">))</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">i</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
</span><span class='line'>        <span class="n">inner_func</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Compiling this gives the following warning:</p>

<pre><code>warning: Buffer unpacking not optimized away.
</code></pre>

<p>The result of this buffer unpacking in each loop is a much slower execution
time:</p>

<pre><code>%timeit loop_3(1E6)
1 loops, best of 3: 617 ms per loop
</code></pre>

<p>This is about 30 times slower than the non-inlined version of the memoryview,
and 6000 times slower than the inlined memoryview above!
Is there any way around this?
Well, there are two options: raw pointers, or explicit inlining in the
code (that is, copying and pasting your code).  Both options will have
speeds similar to that of the inlined memoryviews, but each solution
is inconvenient in its own way.</p>

<p>So why wouldn&#8217;t you use memoryviews?  Well, several projects strive to
remain compatible with python 2.4 (one example is scipy) and python 2.4 is
not compatible with cython&#8217;s typed memoryviews.  Other projects seek to
remain compatible with earlier cython versions which don&#8217;t support
the relatively new memoryview syntax.
In these situations, one of the two partial solutions above
probably need to be used.  In practice, I have usually resorted to passing
around raw pointers.</p>

<h3>Summary</h3>

<p>Here are the timings we found above:</p>

<ul>
<li>Inlined memoryviews: 0.1 ms</li>
<li>Non-inlined memoryviews: 22.9 ms</li>
<li>Inlined ndarray: 617 ms</li>
</ul>


<p>So we see yet another reason that typed memoryviews are superior to
the ndarray syntax: they not only have very speedy slicing, but also
play well with the compiler&#8217;s inlining optimization.  Granted, these
time differences will be insignificant if your inlined function does
some non-negligible amount of computation, but there may be situations
where this affects things.</p>

<h3>Back to my problem</h3>

<p>If you recall, I started all of this because I wanted to create a binary tree
that can compute pairwise distances with arbitrary distance metrics.  Where
do these results put me?  Not in a great position, it turns out.  Abstracting
out the distance function so that the same machinery can be used with
different functions will lead to speed penalties from the inability to inline.
C++ libraries accomplish this through compile-time conditionals (i.e. templates)
but cython doesn&#8217;t have this capability.  Duplicating the tree
framework with a new hard-coded (and thus inlinable) distance metric may
be the only option.  That, or wrapping a templated C++ implementation.</p>

<p>All of the above scripts are available as an ipython
notebook: <a href="http://jakevdp.github.com/downloads/notebooks/memview_bench_2.ipynb">memview_bench_2.ipynb</a>.
For information on how to view this file, see the
<a href="http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html">IPython page</a>
Alternatively, you can view this notebook (but not modify it) using the
nbviewer <a href="http://nbviewer.ipython.org/url/jakevdp.github.com/downloads/notebooks/memview_bench_2.ipynb">here</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Memoryview Benchmarks]]></title>
    <link href="http://jakevdp.github.com/blog/2012/08/08/memoryview-benchmarks/"/>
    <updated>2012-08-08T18:50:00-07:00</updated>
    <id>http://jakevdp.github.com/blog/2012/08/08/memoryview-benchmarks</id>
    <content type="html"><![CDATA[<p>There was recently a <a href="https://groups.google.com/forum/?fromgroups#!topic/cython-users/8uuxjB_wbBQ[1-25]" title="cython-users archive">thread</a>
on cython-users which caught my eye.  It has to do with
<a href="http://docs.cython.org/src/userguide/memoryviews.html">memoryviews</a>, a new
way of working with memory buffers in cython.</p>

<p>I&#8217;ve been thinking recently about how to do fast
and flexible memory buffer access in cython.  I contributed the
<a href="http://scikit-learn.org/stable/modules/generated/sklearn.neighbors.BallTree.html">BallTree</a>
implementation for nearest neighbors searching in
<a href="http://www.scikit-learn.org">scikit-learn</a>, and have been actively thinking
about how to make it faster and more flexible, including adding the ability
to specify distance metrics other than euclidean and minkowski.</p>

<p>In order to accomplish this, I&#8217;d like to have a set of distance metric
functions which take two vectors and compute a distance.  There would
be many functions with similar call signatures which could then be
plugged into a code that would iterate over a set of vectors and
compute the appropriate distances.</p>

<!-- more -->


<h3>Pure python version</h3>

<p>In pure python, the implementation described above might look something
like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># memview_bench_v1.py</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">euclidean_distance</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">):</span>
</span><span class='line'>    <span class="n">x1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
</span><span class='line'>    <span class="n">x2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">x2</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">((</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>This looks promising.  Let&#8217;s create a function based on this which will compute
the pairwise distance between all points in a matrix (this is similar
to <a href="http://scikit-learn.org/stable/modules/generated/sklearn.metrics.pairwise.pairwise_distances.html">pairwise_distances</a> in scikit-learn or
<a href="http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.pdist.html">pdist</a> in scipy).  The simple form of the function might look
like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># memview_bench_v1 (continued)</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">pairwise</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="n">euclidean_distance</span><span class="p">):</span>
</span><span class='line'>    <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">n_samples</span><span class="p">,</span> <span class="n">n_dim</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">D</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">n_samples</span><span class="p">,</span> <span class="n">n_samples</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
</span><span class='line'>            <span class="n">D</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">metric</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">X</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">D</span>
</span></code></pre></td></tr></table></div></figure>


<p>We could exploit symmetry to reduce the number of computations required, but
we&#8217;ll skip that step for now: this simple version of the function will give
us a good benchmark for comparison with alternatives below.  Using the
<code>timeit</code> magic in ipython, we can learn how fast this implementation is:</p>

<pre><code>In [1]: import numpy as np

In [2]:from memview_bench_v1 import pairwise

In [3]: X = np.random.random((500, 3))

In [4]: timeit pairwise(X)
1 loops, best of 3: 6.51 s per loop
</code></pre>

<p>It takes nearly seven seconds to compute 250,000 distances.  This is much
too slow.</p>

<h3>Cython Speedup</h3>

<p>Perhaps we can speed this up using cython declarations.  Before typed
memoryviews were added in cython 0.16, the way to quickly index numpy
arrays in cython was through the numpy specific syntax, adding type
information to each array that specifies its data type, its dimension, and
its order:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
</pre></td><td class='code'><pre><code class='cython'><span class='line'><span class="c"># memview_bench.pyx</span>
</span><span class='line'><span class="k">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span class='line'>
</span><span class='line'><span class="k">cimport</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span class='line'><span class="k">from</span> <span class="nn">libc.math</span> <span class="k">cimport</span> <span class="n">sqrt</span>
</span><span class='line'><span class="k">cimport</span> <span class="nn">cython</span>
</span><span class='line'>
</span><span class='line'><span class="c"># define a function pointer to a metric</span>
</span><span class='line'><span class="k">ctypedef</span> <span class="n">double</span> <span class="p">(</span><span class="o">*</span><span class="n">metric_ptr</span><span class="p">)(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="k">cdef</span> <span class="kt">double</span> <span class="nf">euclidean_distance</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">double</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;c&#39;</span><span class="p">]</span> <span class="n">x1</span><span class="p">,</span>
</span><span class='line'>                               <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">double</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;c&#39;</span><span class="p">]</span> <span class="n">x2</span><span class="p">):</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">tmp</span><span class="p">,</span> <span class="nf">d</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">intp_t</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">N</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">d</span> <span class="o">=</span> <span class="mf">0</span>
</span><span class='line'>    <span class="n">N</span> <span class="o">=</span> <span class="n">x1</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
</span><span class='line'>    <span class="c"># assume x2 has the same shape as x1.  This could be dangerous!</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
</span><span class='line'>        <span class="n">tmp</span> <span class="o">=</span> <span class="n">x1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">x2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span class='line'>        <span class="n">d</span> <span class="o">+=</span> <span class="n">tmp</span> <span class="o">*</span> <span class="n">tmp</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="k">def</span> <span class="nf">pairwise</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">double</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;c&#39;</span><span class="p">]</span> <span class="n">X</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">,</span>
</span><span class='line'>             <span class="n">metric</span> <span class="o">=</span> <span class="s">&#39;euclidean&#39;</span><span class="p">):</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">metric_ptr</span> <span class="nf">dist_func</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">metric</span> <span class="o">==</span> <span class="s">&#39;euclidean&#39;</span><span class="p">:</span>
</span><span class='line'>        <span class="n">dist_func</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">euclidean_distance</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;unrecognized metric&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">intp_t</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">j</span><span class="p">,</span> <span class="nf">n_samples</span>
</span><span class='line'>    <span class="n">n_samples</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="nf">double</span><span class="p">,</span> <span class="nf">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;c&#39;</span><span class="p">]</span> <span class="n">D</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">n_samples</span><span class="p">,</span>
</span><span class='line'>                                                            <span class="n">n_samples</span><span class="p">))</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
</span><span class='line'>            <span class="n">D</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">dist_func</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">X</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">D</span>
</span></code></pre></td></tr></table></div></figure>


<p>Notice that we&#8217;re essentially running the same code, except we have added
type identifiers to speed up function calls and loops.  The <code>mode='c'</code>
argument in the <code>np.ndarray</code> type says that the array is contiguous in
memory, and C-ordered.</p>

<p>For reference, this can be compiled in-place by running
<code>python setup.py build_ext --inplace</code> with the following
setup.py file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># setup.py</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">os</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">numpy</span>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">distutils.core</span> <span class="kn">import</span> <span class="n">setup</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">distutils.extension</span> <span class="kn">import</span> <span class="n">Extension</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">Cython.Distutils</span> <span class="kn">import</span> <span class="n">build_ext</span>
</span><span class='line'>
</span><span class='line'><span class="n">module</span> <span class="o">=</span> <span class="s">&#39;memview_bench_v2&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">setup</span><span class="p">(</span><span class="n">cmdclass</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;build_ext&#39;</span><span class="p">:</span> <span class="n">build_ext</span><span class="p">},</span>
</span><span class='line'>      <span class="n">name</span><span class="o">=</span><span class="n">module</span><span class="p">,</span>
</span><span class='line'>      <span class="n">version</span><span class="o">=</span><span class="s">&#39;1.0&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="n">ext_modules</span><span class="o">=</span><span class="p">[</span><span class="n">Extension</span><span class="p">(</span><span class="n">module</span><span class="p">,</span>
</span><span class='line'>                             <span class="p">[</span><span class="n">module</span> <span class="o">+</span> <span class="s">&quot;.pyx&quot;</span><span class="p">])],</span>
</span><span class='line'>      <span class="n">include_dirs</span><span class="o">=</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">get_include</span><span class="p">(),</span>
</span><span class='line'>                    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">get_include</span><span class="p">(),</span> <span class="s">&#39;numpy&#39;</span><span class="p">)]</span>
</span><span class='line'>      <span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>We&#8217;ll time the resulting function on the same sized array as we did previously:</p>

<pre><code>In [1]: import numpy as np

In [2]: from memview_bench_v2 import pairwise

In [3]: X = np.random.random((500, 3))

In [4]: timeit pairwise(X)
1 loops, best of 3: 668 ms per loop
</code></pre>

<p>That&#8217;s a factor of 10 speedup over the pure python version!  It turns out,
though, that we can do better.  In particular, the slicing operation when
we call <code>X[i]</code> and <code>X[j]</code> must generate a new numpy array each time, which
leads to a lot of python overhead in reference counting, etc.  This is the
reason that the cython team introduced typed memoryviews in cython v0.16.</p>

<h3>Typed Memoryviews</h3>

<p>The equivalent of the above code using typed memoryviews looks like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
</pre></td><td class='code'><pre><code class='cython'><span class='line'><span class="c"># memview_bench_v3.pyx</span>
</span><span class='line'><span class="k">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span class='line'>
</span><span class='line'><span class="k">cimport</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span class='line'><span class="k">from</span> <span class="nn">libc.math</span> <span class="k">cimport</span> <span class="n">sqrt</span>
</span><span class='line'><span class="k">cimport</span> <span class="nn">cython</span>
</span><span class='line'>
</span><span class='line'><span class="c"># define a function pointer to a metric</span>
</span><span class='line'><span class="k">ctypedef</span> <span class="n">double</span> <span class="p">(</span><span class="o">*</span><span class="n">metric_ptr</span><span class="p">)(</span><span class="n">double</span><span class="p">[::</span><span class="mf">1</span><span class="p">],</span> <span class="n">double</span><span class="p">[::</span><span class="mf">1</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="k">cdef</span> <span class="kt">double</span> <span class="nf">euclidean_distance</span><span class="p">(</span><span class="n">double</span><span class="p">[::</span><span class="mf">1</span><span class="p">]</span> <span class="n">x1</span><span class="p">,</span>
</span><span class='line'>                               <span class="n">double</span><span class="p">[::</span><span class="mf">1</span><span class="p">]</span> <span class="n">x2</span><span class="p">):</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">tmp</span><span class="p">,</span> <span class="nf">d</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">intp_t</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">N</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">d</span> <span class="o">=</span> <span class="mf">0</span>
</span><span class='line'>    <span class="n">N</span> <span class="o">=</span> <span class="n">x1</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
</span><span class='line'>    <span class="c"># assume x2 has the same shape as x1.  This could be dangerous!</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
</span><span class='line'>        <span class="n">tmp</span> <span class="o">=</span> <span class="n">x1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">x2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span class='line'>        <span class="n">d</span> <span class="o">+=</span> <span class="n">tmp</span> <span class="o">*</span> <span class="n">tmp</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="k">def</span> <span class="nf">pairwise</span><span class="p">(</span><span class="n">double</span><span class="p">[:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">X</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">,</span>
</span><span class='line'>             <span class="n">metric</span> <span class="o">=</span> <span class="s">&#39;euclidean&#39;</span><span class="p">):</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">metric_ptr</span> <span class="nf">dist_func</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">metric</span> <span class="o">==</span> <span class="s">&#39;euclidean&#39;</span><span class="p">:</span>
</span><span class='line'>        <span class="n">dist_func</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">euclidean_distance</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;unrecognized metric&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">intp_t</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">j</span><span class="p">,</span> <span class="nf">n_samples</span>
</span><span class='line'>    <span class="n">n_samples</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">double</span>[<span class="p">:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">D</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">n_samples</span><span class="p">,</span> <span class="n">n_samples</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
</span><span class='line'>            <span class="n">D</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">dist_func</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">X</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">D</span>
</span></code></pre></td></tr></table></div></figure>


<p>The only change is that instead of using the <code>np.ndarray[...]</code> type specifier,
we use the typed memoryview <code>double[:, ::1]</code> specifier.  The <code>::1</code> in the
second position means that we are passing a two-dimensional array, which
is contiguous and C-ordered.  We time the results and see the following:</p>

<pre><code>In [1]: import numpy as np

In [2]: from memview_bench_v3 import pairwise

In [3]: X = np.random.random((500, 3))

In [4]: timeit pairwise(X)
10 loops, best of 3: 22 ms per loop
</code></pre>

<p>This gives another factor of 30 improvement over the previous version, simply
by switching to typed memoryviews rather than the numpy interface.  Still,
our function is creating memoryview objects each time we slice the array.  We
can determine how much overhead this is generating by using raw C pointers
instead.  It is not as clean, but it should be very fast:</p>

<h3>Raw Pointers</h3>

<p>The fundamental benchmark for this sort of operation should be working
directly with the pointers themselves.  While this is not a very &#8220;pythonic&#8221;
way of doing things, it does lead to very fast code, as we will see:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
</pre></td><td class='code'><pre><code class='cython'><span class='line'><span class="c"># memview_bench_v4.pyx</span>
</span><span class='line'><span class="k">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span class='line'>
</span><span class='line'><span class="k">cimport</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span class='line'><span class="k">from</span> <span class="nn">libc.math</span> <span class="k">cimport</span> <span class="n">sqrt</span>
</span><span class='line'><span class="k">cimport</span> <span class="nn">cython</span>
</span><span class='line'>
</span><span class='line'><span class="c"># define a function pointer to a metric</span>
</span><span class='line'><span class="k">ctypedef</span> <span class="n">double</span> <span class="p">(</span><span class="o">*</span><span class="n">metric_ptr</span><span class="p">)(</span><span class="n">double</span><span class="o">*</span><span class="p">,</span> <span class="n">double</span><span class="o">*</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="k">cdef</span> <span class="kt">double</span> <span class="nf">euclidean_distance</span><span class="p">(</span><span class="n">double</span><span class="o">*</span> <span class="n">x1</span><span class="p">,</span>
</span><span class='line'>                               <span class="n">double</span><span class="o">*</span> <span class="n">x2</span><span class="p">,</span>
</span><span class='line'>                               <span class="nb">int</span> <span class="n">N</span><span class="p">):</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">tmp</span><span class="p">,</span> <span class="nf">d</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">intp_t</span> <span class="nf">i</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">d</span> <span class="o">=</span> <span class="mf">0</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
</span><span class='line'>        <span class="n">tmp</span> <span class="o">=</span> <span class="n">x1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">x2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span class='line'>        <span class="n">d</span> <span class="o">+=</span> <span class="n">tmp</span> <span class="o">*</span> <span class="n">tmp</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="k">def</span> <span class="nf">pairwise</span><span class="p">(</span><span class="n">double</span><span class="p">[:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">X</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">,</span>
</span><span class='line'>             <span class="n">metric</span> <span class="o">=</span> <span class="s">&#39;euclidean&#39;</span><span class="p">):</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">metric_ptr</span> <span class="nf">dist_func</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">metric</span> <span class="o">==</span> <span class="s">&#39;euclidean&#39;</span><span class="p">:</span>
</span><span class='line'>        <span class="n">dist_func</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">euclidean_distance</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;unrecognized metric&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">intp_t</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">j</span><span class="p">,</span> <span class="nf">n_samples</span><span class="p">,</span> <span class="nf">n_dim</span>
</span><span class='line'>    <span class="n">n_samples</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
</span><span class='line'>    <span class="n">n_dim</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">double</span>[<span class="p">:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">D</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">n_samples</span><span class="p">,</span> <span class="n">n_samples</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">double</span>* <span class="nf">Dptr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">D</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">]</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">double</span>* <span class="nf">Xptr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">X</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
</span><span class='line'>            <span class="n">Dptr</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="n">n_samples</span> <span class="o">+</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">dist_func</span><span class="p">(</span><span class="n">Xptr</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">n_dim</span><span class="p">,</span>
</span><span class='line'>                                                <span class="n">Xptr</span> <span class="o">+</span> <span class="n">j</span> <span class="o">*</span> <span class="n">n_dim</span><span class="p">,</span>
</span><span class='line'>                                                <span class="n">n_dim</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">D</span>
</span></code></pre></td></tr></table></div></figure>


<p>Instead of passing around slices of arrays, we&#8217;ve accessed the raw memory
buffer using C pointer syntax.  This is not as easy to read, and can lead
to <code>glibc</code> errors or segmentation faults if we&#8217;re not careful.  Testing
this implementation, we find that it is extremely fast:</p>

<pre><code>In [1]: import numpy as np

In [2]: from memview_bench_v4 import pairwise

In [3]: X = np.random.random((500, 3))

In [4]: timeit pairwise(X)
100 loops, best of 3: 2.47 ms per loop
</code></pre>

<p>This is another factor of 10 faster than the memoryview benchmark above!
Essentially, what this is telling us is that creating a memoryview slice
takes about 0.02 / 500,000 = 40 nanoseconds on our machine.  This is extremely
fast, but because we&#8217;re performing this operation half a million times, the
cost of the allocations is significant compared to the rest of our
computation.  If our vectors were, say, length 1000, this cost may not be
a significant percentage of the total cost.</p>

<p>So what are we left with?  Do we need to use raw pointers in all circumstances
when working with collections of small vectors?  Perhaps not.</p>

<h3>A Faster Implementation with Memoryviews</h3>

<p>The creation of memoryview slices, though extremely fast, is causing a problem
simply because we&#8217;re creating so many slices.  Here is an alternative which
uses no raw pointers, but matches the speed of raw pointers:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
</pre></td><td class='code'><pre><code class='cython'><span class='line'><span class="c"># memview_bench_v5.pyx</span>
</span><span class='line'><span class="k">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span class='line'>
</span><span class='line'><span class="k">cimport</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span class='line'><span class="k">from</span> <span class="nn">libc.math</span> <span class="k">cimport</span> <span class="n">sqrt</span>
</span><span class='line'><span class="k">cimport</span> <span class="nn">cython</span>
</span><span class='line'>
</span><span class='line'><span class="c"># define a function pointer to a metric</span>
</span><span class='line'><span class="k">ctypedef</span> <span class="n">double</span> <span class="p">(</span><span class="o">*</span><span class="n">metric_ptr</span><span class="p">)(</span><span class="n">double</span><span class="p">[:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">intp_t</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">intp_t</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="k">cdef</span> <span class="kt">double</span> <span class="nf">euclidean_distance</span><span class="p">(</span><span class="n">double</span><span class="p">[:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">X</span><span class="p">,</span>
</span><span class='line'>                               <span class="n">np</span><span class="o">.</span><span class="n">intp_t</span> <span class="n">i1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">intp_t</span> <span class="n">i2</span><span class="p">):</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">tmp</span><span class="p">,</span> <span class="nf">d</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">intp_t</span> <span class="nf">j</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">d</span> <span class="o">=</span> <span class="mf">0</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">1</span><span class="p">]):</span>
</span><span class='line'>        <span class="n">tmp</span> <span class="o">=</span> <span class="n">X</span><span class="p">[</span><span class="n">i1</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="n">X</span><span class="p">[</span><span class="n">i2</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>
</span><span class='line'>        <span class="n">d</span> <span class="o">+=</span> <span class="n">tmp</span> <span class="o">*</span> <span class="n">tmp</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="k">def</span> <span class="nf">pairwise</span><span class="p">(</span><span class="n">double</span><span class="p">[:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">X</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">,</span>
</span><span class='line'>             <span class="n">metric</span> <span class="o">=</span> <span class="s">&#39;euclidean&#39;</span><span class="p">):</span>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">metric_ptr</span> <span class="nf">dist_func</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">metric</span> <span class="o">==</span> <span class="s">&#39;euclidean&#39;</span><span class="p">:</span>
</span><span class='line'>        <span class="n">dist_func</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">euclidean_distance</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;unrecognized metric&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">intp_t</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">j</span><span class="p">,</span> <span class="nf">n_samples</span><span class="p">,</span> <span class="nf">n_dim</span>
</span><span class='line'>    <span class="n">n_samples</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
</span><span class='line'>    <span class="n">n_dim</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">cdef</span> <span class="kt">double</span>[<span class="p">:,</span> <span class="p">::</span><span class="mf">1</span><span class="p">]</span> <span class="n">D</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">n_samples</span><span class="p">,</span> <span class="n">n_samples</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
</span><span class='line'>            <span class="n">D</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">dist_func</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">D</span>
</span></code></pre></td></tr></table></div></figure>


<p>Timing this implementation we find the following:</p>

<pre><code>In [1]: import numpy as np

In [2]: from memview_bench_v5 import pairwise

In [3]: X = np.random.random((500, 3))

In [4]: timeit pairwise(X)
100 loops, best of 3: 2.45 ms per loop
</code></pre>

<p>Just as fast as using raw pointers, but much cleaner and easier to read.</p>

<h3>Summary</h3>

<p>Here are the timing results we&#8217;ve seen above:</p>

<ul>
<li><strong>Python + numpy</strong>: 6510 ms</li>
<li><strong>Cython + numpy</strong>: 668 ms</li>
<li><strong>Cython + memviews (slicing)</strong>: 22 ms</li>
<li><strong>Cython + raw pointers</strong>: 2.47 ms</li>
<li><strong>Cython + memviews (no slicing)</strong>: 2.45 ms</li>
</ul>


<p>So what have we learned here?  First of all, typed memoryviews are fast.
Blazing fast.  If used correctly, they can be comparable to raw pointers,
but are much cleaner easier to debug.  For example, in the last
version, if we ran into a memory error we could simply turn on bounds-checking
and quickly find the source of the problem.  Slicing with memoryviews is
also fast, but should be used carefully if your operation time on each slice
is compararable to the cost of building the slice.</p>

<p>The moral of the story?  <em>Use typed memoryviews.</em>  It will lead to fast cython
code which is cleaner, more readable, and more easily debuggable than any other
alternative.</p>

<p><strong>Update</strong>: All of the above scripts are now available as an ipython
notebook: <a href="http://jakevdp.github.com/downloads/notebooks/memview_bench.ipynb">memview_bench.ipynb</a>.
For information on how to view this file, see the
<a href="http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html">IPython page</a>
Alternatively, you can view this notebook (but not modify it) using the
nbviewer <a href="http://nbviewer.ipython.org/url/jakevdp.github.com/downloads/notebooks/memview_bench.ipynb">here</a>.</p>

<p>Thanks to Dave for the tip.</p>
]]></content>
  </entry>
  
</feed>
